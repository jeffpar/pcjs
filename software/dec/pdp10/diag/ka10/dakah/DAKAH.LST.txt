DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 1
DAKAHT	MAC	19-JAN-77 17:35		DIAGNOSTIC PARAMETERS                                                              SEQ 0007

     1					;DAKAH
     2
     3
     4
     5			000002			DECVER==2
     6			000000			MCNVER==0
     7
     8						XLIST
     9						LIST
    10						LALL
    11						NAME	\MCNVER,\DECVER^
    12
    13					TITLE	DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2
    14					^
    15
    16					;TEST DESIGNED FOR INITIAL DEBUGGING OF PROCESSOR HARDWARE
    17					;AND TO DETECT (SOLID) FAILURES IN THE FIELD.
    18
    19					;COPYRIGHT 1972,1977
    20					;DIGITAL EQUIPMENT CORPORATION
    21					;MARLBORO, MASS. 01752
    22
    23					;JOHN R. KIRCHOFF
    24
    25	000137					LOC	137
    26	000137	000000	000002			MCNVER,,DECVER
    27
    28						NOSYM
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 2
DAKAHT	MAC	19-JAN-77 17:35		DIAGNOSTIC PARAMETERS                                                              SEQ 0008

    29					SUBTTL	DIAGNOSTIC PARAMETERS
    30
    31					;CONTROL WORDS
    32
    33			004000		EXIOT=4000		;USER PRIV I/O FLAG
    34			010000		USERF=10000		;USER MODE FLAG
    35
    36			000400		DACT=400
    37			000774		ME=774
    38			002377		PIG0=2377
    39			040000		PIH1=40000
    40			020000		PIH2=20000
    41			010000		PIH3=10000
    42			004000		PIH4=4000
    43			002000		PIH5=2000
    44			001000		PIH6=1000
    45			000400		PIH7=400
    46			002000		PIOSET=2000
    47			001000		PIOCLR=1000
    48			004000		PIREQ=4000
    49			000200		ACT=200
    50			020000		PROT=20000
    51			010000		NONEX=10000
    52			004000		UMIOT=4000
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 3
DAKAHT	MAC	19-JAN-77 17:35		DIAGNOSTIC PARAMETERS                                                              SEQ 0009

    53					;SUBROUTINE DEFINITIONS
    54
    55			030726		SADR1=START
    56			030726		SADR2=START
    57			030726		SADR3=START
    58			030726		SADR4=START
    59			030726		SADR5=START
    60			030726		SADR6=START
    61		254000	030726		SADR7=JRST START
    62		254000	030726		SADR8=JRST START
    63		254000	030726		SADR9=JRST START
    64		254000	030726		SADR10=JRST START
    65		254000	030726		SADR11=JRST START
    66			000000		PAREA1=0
    67			000000		PAREA2=0
    68			000000		PAREA3=0
    69			000000		PAREA4=0
    70			000000		PAREA5=0
    71			000000		PAREA6=0
    72			000001		ITERAT=1
    73			000001		EXCASB==1
    74			000001		PGMEND==1
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 4
DAKAHT	MAC	19-JAN-77 17:35		DIAGNOSTIC PARAMETERS                                                              SEQ 0010

    75
    76					;MACROS
    77
    78					;STOP -	USED FOR SCOPE LOOP, IF INSTRUCTION FAILS, CHANGE (JUMP .+1)
    79					;	TO A (JUMP .-X) TO CYCLE ON FAILING INSTRUCTION.
    80
    81					DEFINE	STOP	(A)<
    82						HALT	.+1
    83						JUMP	.+1
    84									>
    85
    86					;SFLAG - USED TO CLEAR ALL FLAGS THEN TO SET REQUESTED
    87					;	 FLAG FOR TESTING.
    88
    89					DEFINE	SFLAG	(A)<
    90						MOVSI	1,A
    91						JFCL	17,.+1
    92						JRST	2,.+1(1)
    93									>
    94
    95					;CHANEL - USED FOR 2 CHANNEL SYSTEM CHECK
    96
    97					DEFINE	CHANEL	(A)<
    98						SKIPN	PI7SYS#
    99						JRST	A
   100									>
   101
   102					;RETURN - USED TO SETUP UUO TRAP
   103
   104					DEFINE	RETURN	(A)<
   105						MOVE	2,[JSP 2,A]
   106						MOVEM	2,41
   107						SETOB	2,40
   108									>
   109
   110					;CLEAN - USED TO CLEAR THE PROCESSOR EXCEPT CLOCK
   111					;	CLEAR DEVICES AND PI SYSTEM
   112
   113					DEFINE	CLEAN	(A)<
   114						CONO	634440
   115						CONO	PI,10000
   116									>
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 1
PARAM	KLM	18-JAN-77 11:38		*PARAM*	CONSOLE DATA SWITCH ASSIGNMENTS, JAN 18,1977                               SEQ 0011

   117					SUBTTL	*PARAM*	CONSOLE DATA SWITCH ASSIGNMENTS, JAN 18,1977
   118
   119					DEFINE	S,<;*********************************************************************>
   120
   121					S^;*********************************************************************^
   122					;*DATA SWITCHES (READ FROM CONSOLE IN EXEC MODE OR TYPED IN IN USER MODE)
   123					;*LEFT HALF SWITCHES ARE PRE-ASSIGNED FOR SUBROUTINE PACKAGE USE
   124					;*AND CONTROL LOOPING, PRINTING (TTY OR OTHER DEVICE) AND MISC. FUNCTIONS
   125					S^;*********************************************************************^
   126
   127			400000		ABORT==	400000			;ABORT PROGRAM ON PASS COMPLETION
   128			200000		RSTART==200000			;RESTART TEST, PRINT TOTALS
   129			100000		TOTALS==100000			;PRINT TOTALS, CONTINUE
   130
   131			040000		NOPNT==	040000			;INHIBIT ALL PRINT/TYPE OUT (EXCEPT FORCED)
   132			020000		PNTLPT==020000			;PRINT ALL DATA ON LPT (LOGICAL DEVICE, USER MODE)
   133			010000		DING==	010000			;RING BELL ON ERROR
   134
   135			004000		LOOPER==004000			;ENTER EXERCISE/CHECK LOOP ON ERROR
   136			002000		ERSTOP==002000			;HALT ON TEST ERROR
   137			001000		PALERS==001000			;PRINT ALL ERRORS
   138
   139			000400		RELIAB==000400			;RELIABILITY MODE
   140			000200		TXTINH==000200			;INHIBIT ERROR TEXT
   141			000100		INHPAG==000100			;INHIBIT PAGING
   142
   143			000040		MODDVC==000040			;MODIFY DEVICE CODE
   144			000020		INHCSH==000020			;INHIBIT CACHE
   145			000010		OPRSEL==000010			;OPERATOR SELECTION
   146
   147			000004		CHAIN==	000004			;CHAIN CONTROL SWITCH
   148
   149			000002		KAHZ50==000002			;KA10 50 HERTZ POWER
   150
   151									;SWITCH 17 RESERVED !!!
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 2
PARAM	KLM	18-JAN-77 11:38		*PARAM* PROGRAM/SUBROUTINE PARAMETERS, JAN 18,1977                                 SEQ 0012

   152					SUBTTL	*PARAM* PROGRAM/SUBROUTINE PARAMETERS, JAN 18,1977
   153
   154					S^;*********************************************************************^
   155					;*SPECIAL SUBPROGRAM LINKAGES
   156					S^;*********************************************************************^
   157
   158			027772		FSELNK=	27772	;FILE SELECT LINK
   159			027773		FRDLNK=	27773	;FILE READ LINK
   160			027774		LDLNK=	27774	;LOAD LINKAGE ADDRESS
   161			027775		DDTLNK=	27775	;DDT LINKAGE ADDRESS
   162			027776		MODLNK=	27776	;OPERATIONAL MODE CHECK LINKAGE ADDRESS
   163			027777		SUBLNK=	27777	;SUBROUTINE LINKAGE ADDRESS
   164
   165					S^;*********************************************************************^
   166					;*SPECIAL SUBROUTINE FATAL HALTS
   167					;*USED TO REPORT ERRORS THAT CAUSE THE SUBROUTINES TO BE UNUSABLE
   168					S^;*********************************************************************^
   169
   170					;ADDRESS   TAG	REASON
   171					;---------------------
   172
   173					; 1010 	NOEXEC	;PROGRAM NOT CODED FOR EXEC MODE OPERATION
   174					; 1011  PLERR	;FATAL PUSH LIST POINTER ERROR
   175					; 1012  PLERR1	;INITIAL PUSH LIST POINTER ERROR
   176					; 1013  MUOERR	;MUUO WITH LUUO HANDLER WIPED OUT
   177					; 1014  DTEBER	;DTE20 INTERRUPT WITHOUT DOORBELL
   178					; 1015  DTECER	;DTE20 CLOCK INTERRUPT WITHOUT FLAG SET
   179					; 1016  CPIERR	;CPU INITIALIZATION ERROR
   180					; 1017  EOPERR	;END OF PROGRAM ERROR
   181					; 1020  LUOERR	;INTERRUPT WITH LUUO HANDLER WIPED OUT
   182
   183					S^;*********************************************************************^
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 3
PARAM	KLM	18-JAN-77 11:38		*PARAM* PROGRAM/SUBROUTINE PARAMETERS, JAN 18,1977                                 SEQ 0013

   184					S^;*********************************************************************^
   185					;OPERATOR DEFINITIONS (NON-UUO'S)
   186					S^;*********************************************************************^
   187
   188		260740	000000		OPDEF	GO	[PUSHJ	P,]	;SUBROUTINE CALL
   189		263740	000000		OPDEF	RTN	[POPJ	P,]	;SUBROUTINE RETURN
   190		261740	000000		OPDEF	PUT	[PUSH	P,]	;PUT DATA ON PUSH LIST
   191		262740	000000		OPDEF	GET	[POP	P,]	;GET DATA FROM PUSH LIST
   192		254000	000000		OPDEF	PJRST	[JRST	]	;JRST TO ROUTINE THAT RTN'S
   193		254200	000000		OPDEF	HALT	[JRST	4,]	;DEFINITION FOR DDT
   194		254100	000000		OPDEF	JRSTF	[JRST	2,]	;DEFINITION FOR DDT
   195		254500	000000		OPDEF	JEN	[JRST	12,]	;DEFINITION FOR DDT
   196
   197					S^;*********************************************************************^
   198					;*SUBROUTINE INITIALIZATION CALL
   199					S^;*********************************************************************^
   200
   201		265000	030011		OPDEF	PGMINT	[JSP	0,SBINIT]	;SUBROUTINE INITIALIZATION
   202
   203					S^;*********************************************************************^
   204					;*HALTING UUO'S (A MORE GRACEFUL HALT THAN SIMPLY USING THE HALT INSTRUCTION).
   205					S^;*********************************************************************^
   206
   207		037640	000004		OPDEF	FATAL	[37B8!15B12!4]	;FATAL PROGRAMMING HALT
   208		037600	000004		OPDEF	ERRHLT	[37B8!14B12!4]	;PROGRAM ERROR HALT
   209
   210					S^;*********************************************************************^
   211					;*TERMINAL INPUT UUO'S
   212					;*ALWAYS COME FROM THE CONSOLE TERMINAL IN EXEC MODE OR THE
   213					;*CONTROLLING TERMINAL (REAL TERMINAL OR PTY) IN USER MODE.
   214					S^;*********************************************************************^
   215
   216		037000	000003		OPDEF	TTICHR 	[37B8!0B12!3]	;TTY, INPUT ANY CHARACTER
   217		037040	000003		OPDEF	TTIYES	[37B8!1B12!3]	;TTY, NORMAL RETURN Y
   218		037100	000003		OPDEF	TTINO	[37B8!2B12!3]	;TTY, NORMAL RETURN N
   219		037140	000003		OPDEF	TTIOCT	[37B8!3B12!3]	;TTY, INPUT OCTAL WORD
   220		037200	000003		OPDEF	TTIDEC	[37B8!4B12!3]	;TTY, INPUT DECIMAL WORD
   221		037240	000003		OPDEF	TTICNV	[37B8!5B12!3]	;TTY, INPUT CONVERTABLE WORD
   222		037300	000003		OPDEF	TTLOOK	[37B8!6B12!3]	;TTY, KEYBOARD CHECK
   223		037340	000003		OPDEF	TTALTM	[37B8!7B12!3]	;TTY, ALT-MODE CHECK
   224		037400	000003		OPDEF	TTSIXB	[37B8!10B12!3]	;TTY, INPUT SIXBIT WORD
   225		037440	000003		OPDEF	TTYINP	[37B8!11B12!3]	;TTY, IMAGE MODE INPUT
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 4
PARAM	KLM	18-JAN-77 11:38		*PARAM* PROGRAM/SUBROUTINE PARAMETERS, JAN 18,1977                                 SEQ 0014

   226					;*TERMINAL OUTPUT UUO'S.
   227
   228		037000	000000		OPDEF	PNTA	[37B8!0B12!0]	;PRINT ASCII WORD
   229		037000	000001		OPDEF	PNTAF	[37B8!0B12!1]	;PRINT ASCII WORD FORCED
   230		037740	000000		OPDEF	PNTAL	[37B8!17B12!0]	;PRINT ASCIZ LINE
   231		037740	000001		OPDEF	PNTALF	[37B8!17B12!1]	;PRINT ASCIZ LINE FORCED
   232		037600	000003		OPDEF	PSIXL	[37B8!14B12!3]	;PRINT SIXBIT'Z LINE
   233		037640	000003		OPDEF	PSIXLF	[37B8!15B12!3]	;PRINT SIXBIT'Z LINE FORCED
   234		037000	000000		OPDEF	PNTMSG	[37B8!0B12!0]	;PRINT MESSAGE IMMEDIATE
   235		037040	000000		OPDEF	PNTMSF	[37B8!1B12!0]	;PRINT MESSAGE IMMEDIATE FORCED
   236		037100	000000		OPDEF	PSIXM	[37B8!2B12!0]	;PRINT SIXBIT'Z MSG IMMEDIATE
   237		037200	000000		OPDEF	PSIXMF	[37B8!4B12!0]	;PRINT SIXBIT'Z MSG IMM FORCED
   238		037000	000000		OPDEF	PNTCI	[37B8!0B12!0]	;PRINT CHARACTER IMMEDIATE
   239		037040	000000		OPDEF	PNTCIF	[37B8!1B12!0]	;PRINT CHARACTER IMMEDIATE FORCED
   240		037500	000000		OPDEF	PNTCHR	[37B8!12B12!0]	;PRINT CHARACTER
   241		037500	000001		OPDEF	PNTCHF	[37B8!12B12!1]	;PRINT CHARACTER FORCED
   242		037040	000000		OPDEF	PNT1	[37B8!1B12!0]	;PRINT ONE OCTAL DIGIT
   243		037040	000001		OPDEF	PNT1F	[37B8!1B12!1]	;PRINT 1 OCTAL DIGIT FORCED
   244		037100	000000		OPDEF	PNT2	[37B8!2B12!0]	;PRINT TWO OCTAL DIGITS
   245		037100	000001		OPDEF	PNT2F	[37B8!2B12!1]	;PRINT 2 OCTAL DIGITS FORCED
   246		037140	000000		OPDEF	PNT3	[37B8!3B12!0]	;PRINT THREE OCTAL DIGITS
   247		037140	000001		OPDEF	PNT3F	[37B8!3B12!1]	;PRINT THREE OCTAL DIGITS FORCED
   248		037200	000000		OPDEF	PNT4	[37B8!4B12!0]	;PRINT FOUR OCTAL DIGITS
   249		037200	000001		OPDEF	PNT4F	[37B8!4B12!1]	;PRINT FOUR OCTAL DIGITS FORCED
   250		037240	000000		OPDEF	PNT5	[37B8!5B12!0]	;PRINT FIVE OCTAL DIGITS
   251		037240	000001		OPDEF	PNT5F	[37B8!5B12!1]	;PRINT FIVE OCTAL DIGITS FORCED
   252		037300	000000		OPDEF	PNT6	[37B8!6B12!0]	;PRINT SIX OCTAL DIGITS
   253		037300	000001		OPDEF	PNT6F	[37B8!6B12!1]	;PRINT SIX OCTAL DIGITS FORCED
   254		037340	000000		OPDEF	PNT7	[37B8!7B12!0]	;PRINT 7 OCTAL DIGITS
   255		037340	000001		OPDEF	PNT7F	[37B8!7B12!1]	;PRINT 7 OCTAL DIGITS FORCED
   256		037440	000000		OPDEF	PNT11	[37B8!11B12!0]	;PRINT 11 OCTAL DIGITS
   257		037440	000001		OPDEF	PNT11F	[37B8!11B12!1]	;PRINT 11 OCTAL DIGITS FORCED.
   258		037400	000000		OPDEF	PNTADR	[37B8!10B12!0]	;PRINT PHYSICAL ADDRESS
   259		037400	000001		OPDEF	PNTADF	[37B8!10B12!1]	;PRINT PHYSICAL ADDRESS FORCED
   260		037600	000000		OPDEF	PNTOCT  [37B8!14B12!0]	;PRINT FULL WORD OCTAL
   261		037600	000001		OPDEF	PNTOTF	[37B8!14B12!1]	;PRINT FULL WORD OCTAL FORCED
   262		037540	000000		OPDEF	PNTHW	[37B8!13B12!0]	;PRINT OCTAL HALF WORDS, 6 SP 6
   263		037540	000001		OPDEF	PNTHWF	[37B8!13B12!1]	;PRINT OCTAL HALF WORDS, 6 SP 6 FORCED
   264		037700	000003		OPDEF	PNTOCS	[37B8!16B12!3]	;PRINT OCTAL, SUPPRESS LEADING 0'S
   265		037740	000003		OPDEF	PNTOCF	[37B8!17B12!3]	;PRINT OCTAL, SUPPRESS LEADING 0'S FORCED
   266		037640	000000		OPDEF	PNTDEC	[37B8!15B12!0]	;PRINT DECIMAL, SUPRESS LEADING 0'S
   267		037640	000001		OPDEF	PNTDCF	[37B8!15B12!1]	;PRINT DECIMAL, SUPRESS LEADING 0'S FORCED
   268		037700	000000		OPDEF	PNTDS	[37B8!16B12!0]	;PRINT DECIMAL, SPACES FOR LD 0'S
   269		037700	000001		OPDEF	PNTDSF	[37B8!16B12!1]	;PRINT DECIMAL, SPACES FOR LD 0'S FORCED
   270		037200	000002		OPDEF	PNTNM	[37B8!4B12!2]	;PRINT PROGRAM NAME
   271		037000	000002		OPDEF	PNTSIX	[37B8!0B12!2]	;PRINT SIXBIT WORD
   272		037040	000002		OPDEF	PNTSXF	[37B8!1B12!2]	;PRINT SIXBIT WORD FORCED
   273		037240	000002		OPDEF	DROPDV	[37B8!5B12!2]	;CLOSE LOGICAL FILE, USER MODE
   274		037100	000002		OPDEF	PNTCW	[37B8!2B12!2]	;PRINT DF10 CONTROL WORD
   275		037140	000002		OPDEF	PNTCWF	[37B8!3B12!2]	;PRINT DF10 CONTROL WORD FORCED
   276		037000	030242		OPDEF	PCRL	[37B8!0B12!CRLF] ;PRINT CARRIAGE RETURN/LINE FEED
   277		037040	030242		OPDEF	PCRLF	[37B8!1B12!CRLF] ;PRINT CARRIAGE RETURN/LINE FEED FORCED
   278		037000	000040		OPDEF	PSP	[37B8!0B12!40]	;PRINT SPACE
   279		037040	000040		OPDEF	PSPF	[37B8!1B12!40]	;PRINT SPACE FORCED
   280		037000	030243		OPDEF	PCRL2	[37B8!0B12!CRLF2] ;PRINT CARRIAGE RETURN/LINE FEED (TWICE)
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 4-1
PARAM	KLM	18-JAN-77 11:38		*PARAM* PROGRAM/SUBROUTINE PARAMETERS, JAN 18,1977                                 SEQ 0015

   281		037040	030243		OPDEF	PCRL2F	[37B8!1B12!CRLF2] ;PRINT CARRIAGE RETURN/LINE FEED (TWICE) FORCED
   282		037040	000007		OPDEF	PBELL	[37B8!1B12!7]	;PRINT TTY BELL
   283
   284		037040	000026		OPDEF	PFORCE	[37B8!1B12!26]	;PRINT FORCE, CONTROL O OVERRIDE
   285
   286					DEFINE	PMSG	(ARG),<
   287						PSIXM	[SIXBIT\ARG'_\]>
   288
   289					DEFINE	PMSGF	(ARG),<
   290						PSIXMF	[SIXBIT\ARG'_\]>
   291
   292					;*SIXBTZ -- MACRO TO GENERATE SIXBIT DATA FOR PRINTING
   293					;*	CONSERVES CORE OVER ASCIZ
   294
   295					DEFINE	SIXBTZ	(ARG),<	[SIXBIT\ARG'_\]>
   296
   297					;*CONSOLE SWITCH INPUT UUO.
   298					;*READS CONSOLE SWITCHES IF IN EXEC MODE OR ASKS FOR THEM IF
   299					;* USER MODE.
   300
   301		037400	000002		OPDEF	SWITCH	[37B8!10B12!2]	;INPUT CONSOLE SWITCHES
   302
   303					;*CLOCK INITIALIZATION UUO - TO SET DESIRED CLOCK OPERATION
   304					;*EITHER IGNORE CLOCK, ONLY LET IT TICK OR CAUSE INTERRUPT TO OCCUR.
   305
   306		037540	000004		OPDEF	CLOKOP	[37B8!13B12!4]	;CLOCK OPERATION UUO - PDP-11 CLOCK
   307		037200	000004		OPDEF	MTROP	[37B8!4B12!4]	;CLOCK OPERATION UUO - DK20 METER
   308
   309					;*KL10 ONLY CACHE OPERATION UUO'S
   310
   311		037040	000004		OPDEF	CINVAL	[37B8!1B12!4]	;CACHE INVALIDATE
   312		037100	000004		OPDEF	CFLUSH	[37B8!2B12!4]	;CACHE FLUSH
   313		037140	000004		OPDEF	CWRTBI	[37B8!3B12!4]	;CACHE WRITE-BACK & INVALIDATE
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 5
PARAM	KLM	18-JAN-77 11:38		*PARAM* PROGRAM/SUBROUTINE PARAMETERS, JAN 18,1977                                 SEQ 0016

   314					;*END OF PASS/PROGRAM UUOS
   315
   316					;PERFORMS THE END OF PASS FUNCTIONS. INCREMENT PASS COUNT,
   317					;*DECREMENT ITERATION COUNT, CHECK IF FINISHED WITH THIS PROGRAM ETC.
   318
   319		037500	000004		OPDEF	ENDUUO	[37B8!12B12!4]	;UUO TO DISPLAY LIGHTS
   320		037700	000004		OPDEF	EOPUUO	[37B8!16B12!4]	;END OF PROGRAM UUO
   321
   322					;*MEMORY MANAGEMENT UUO'S
   323					;*UUO'S TO PERFORM VARIOUS MEMORY FUNCTIONS. MAPPING, ZEROING, PAGING,
   324					;*ADDRESS CONVERSION, ETC...
   325
   326		037000	000004		OPDEF	MAPMEM	[37B8!0B12!4]	;MAP MEMORY
   327		037500	000002		OPDEF	MEMZRO	[37B8!12B12!2]	;ZERO MEMORY
   328		037440	000002		OPDEF	MEMSEG	[37B8!11B12!2]	;SETUP MEMORY SEGMENT
   329		037540	000002		OPDEF	MAPADR	[37B8!13B12!2]	;VIRTUAL TO PHYSICAL ADR CONVERT
   330		037640	000002		OPDEF	MAPCNK	[37B8!15B12!2]	;MAP MEMORY CHUNK
   331		037600	000002		OPDEF	MAPSET	[37B8!14B12!2]	;SET KI10 EXEC PAGE MAP
   332		037740	000002		OPDEF	MAPPNT	[37B8!17B12!2]	;PRINT MEMORY MAP
   333
   334					;*DEVICE CODE MODIFICATION UUO
   335					;*ALLOWS THE MODIFICATION OF IOT'S TO ONE DEVICE TO BE CHANGED TO
   336					;*IOT'S TO A DIFFERENT DEVICE CODE.
   337
   338		037340	000002		OPDEF	MODPCU	[37B8!7B12!2]	;MODIFY PERHIPERAL CODE, USER
   339		037300	000002		OPDEF	MODPCP	[37B8!6B12!2]	;MODIFY PERHIPERAL CODE, PROGRAM
   340
   341			030000			IFNDEF	MODDVL,<MODDVL==BEGIN>
   342			030000			IFNDEF	MODDVU,<MODDVU==BEGIN>
   343
   344					;*"DIAMON" FILE SELECTION AND READ UUOS
   345
   346		037240	000004		OPDEF	FSELECT	[37B8!5B12!4]	;FILE SELECTION
   347		037300	000004		OPDEF	FREAD	[37B8!6B12!4]	;FILE READ - ASCII DATA
   348		037340	000004		OPDEF	FRD36	[37B8!7B12!4]	;FILE READ - 36 BIT DATA
   349		037400	000004		OPDEF	FRD8	[37B8!10B12!4]	;FILE READ - 8 BIT DATA
   350
   351					;*KI10 ONLY UUO FOR PRINTING MARGIN VALUES
   352
   353		037700	000002		OPDEF	PNTMGN	[37B8!16B12!2]	;PRINT MARGIN VALUE
   354
   355						XLIST
   356					IFNDEF	KLOLD,<LIST
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 6
PARAM	KLM	18-JAN-77 11:38		ERROR HANDLING UUO DEFINITIONS, JAN 18,1977                                        SEQ 0017

   357					SUBTTL	ERROR HANDLING UUO DEFINITIONS, JAN 18,1977
   358
   359					S^;*********************************************************************^
   360					;*ERROR HANDLER PARAMETERS
   361					S^;*********************************************************************^
   362
   363		036000	000000		OPDEF	ERUUO	[36B8]		;ERROR CALL UUO
   364		035000	000000		OPDEF	ERLOOP	[35B8]		;ERROR LOOP, CHECKS PC,REPT,REPT1,ERROR
   365		035040	000000		OPDEF	ERLP1	[35B8!1B12]	;ERROR LOOP IF PC'S MATCH
   366		035100	000000		OPDEF	ERLP2	[35B8!2B12]	;ERROR LOOP IF ANY ERROR
   367		034000	000000		OPDEF	REPTUO	[34B8]		;REPEAT LOOP UUO
   368
   369					;*THE ERROR HANDLER MACROS
   370
   371					;*A MACRO TO REPORT AN ERROR AND LOOP
   372
   373						DEFINE	ERROR	(ADR,FORMAT,CORECT,ACTUAL,F,D,ERR)<
   374						SALL
   375						ERUUO	FORMAT,[T,,[SIXBIT\F'_\]
   376							   CORECT,,ACTUAL
   377							   [SIXBIT\D'_\],,ERR]
   378						XALL
   379
   380						ERLOOP	ADR		;IF ERROR, LOOP TO ADR
   381					>
   382
   383					;*A MACRO TO REPORT AN ERROR AND NOT LOOP
   384
   385						DEFINE	ERROR1	(FORMAT,CORECT,ACTUAL,F,D,ERR)<
   386						SALL
   387						ERUUO	FORMAT,[T,,[SIXBIT\F'_\]
   388							   CORECT,,ACTUAL
   389							   [SIXBIT\D'_\],,ERR]
   390						XALL	>
   391
   392					>;END OF KLOLD CONDITIONAL
   393
   394						XLIST
   395						LIST
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 1
FIXED	KLM	18-JAN-77 11:39		*FIXED* FIXED CONTROL AND DISPATCH STORAGE, JAN 18,1977                            SEQ 0018

   396					SUBTTL	*FIXED* FIXED CONTROL AND DISPATCH STORAGE, JAN 18,1977
   397
   398	030000					LOC	30000
   399
   400					S^;*********************************************************************^
   401					;*PROGRAM STARTING ADDRESSES
   402					;*THESE ADDRESSES CALL VARIOUS SPECIAL START ROUTINES AND OR OPTIONS
   403					;*NORMAL START ADDRESS IS 30000 ALL OTHERS ARE SPECIAL. INVOKED BECAUSE
   404					;*OF END OF PASS, POWER FAILURE, DDT START, RE-ENTERING(TYPICALLY USER
   405					;*MODE), OR ANY NUMBER OF SPECIAL FEATURE TESTS.
   406					S^;*********************************************************************^
   407
   408	030000	254 00 1 00 027776 	BEGIN:	JRST	@MODLNK		;STAND-ALONE START
   409	030001	254 00 0 00 030726 	$START:	JRST	START		;MODE CHECK STARTING ADDRESS
   410
   411	030002	254 00 1 00 027774 	DIAGMN:	JRST	@LDLNK		;DIAGNOSTIC MONITOR START
   412
   413	030003	254 00 1 00 027774 	SYSEXR:	JRST	@LDLNK		;SYSTEM EXERCISER START
   414
   415	030004	254 00 0 00 030726 	SFSTRT:	JRST	SADR1		;SPECIAL FEATURE START
   416
   417	030005	254 00 0 00 030726 	PFSTRT:	JRST	SADR2		;POWER FAIL RESTART
   418
   419	030006	254 00 0 00 030726 	REENTR:	JRST	SADR3		;REENTER START(USUALLY USER MODE ONLY)
   420
   421	030007				SRTDDT:				;COMMONLY MISTAKEN NAME FOR "DDTSRT"
   422	030007	254 00 1 00 027775 	DDTSRT:	JRST	@DDTLNK		;DDT START
   423
   424	030010	254 00 0 00 030737 	BEGIN1:	JRST	STARTA		;LOOP START(END OF PASS COMES HERE)
   425	030011	254 00 1 00 027777 	SBINIT:	JRST	@SUBLNK		;PMGINT LINKAGE
   426	030012	000000	000000		RETURN:	0			;RETURN ADDRESS STORAGE
   427
   428	030013	254000	030726		START1:	SADR7			;OPTIONAL STARTING ADR/INSTRUCTIONS
   429	030014	254000	030726		START2:	SADR8			; "
   430	030015	254000	030726		START3:	SADR9			; "
   431	030016	254000	030726		START4:	SADR10			; "
   432	030017	254000	030726		START5:	SADR11			; "
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 2
FIXED	KLM	18-JAN-77 11:39		*FIXED* FIXED CONTROL AND DISPATCH STORAGE, JAN 18,1977                            SEQ 0019

   433					S^;*********************************************************************^
   434					;*PROGRAM FIXED PARAMETER AREA
   435					S^;*********************************************************************^
   436
   437	030020	000000	000000		PNTNAM:	PAREA3		;SIXBIT PROGRAM NAME
   438	030021	000000	000000		PNTEXT:	PAREA4		;SIXBIT PROGRAM EXTENSION
   439	030022	000000	000000		RANDBS:	PAREA1		;RANDOM BASE NUMBER
   440	030023	000000	000000		SWTEXR:	PAREA2		;SYSTEM EXERCISER SWITCHES
   441	030024	000000	000001		ITRCNT:	ITERAT		;PROGRAM ITERATIONS
   442	030025	000000	030712		$PNAME:	PGMNAM		;POINTER TO PROGRAMS NAME
   443	030026	000000	000002		$PVER:	MCNVER,,DECVER	;MCN & DEC VERSION LEVEL
   444	030027	000000	030000		$MODVL:	MODDVL		;DEVICE CODE CHANGE LOWER LIMIT
   445	030030	000000	030000		$MODVU:	MODDVU		;DEVICE CODE CHANGE UPPER LIMIT
   446	030031	777777	777777		$EMODE:	IFNDEF EXCASB,<0> IFDEF EXCASB,<-1>	;EXEC ALLOWED
   447	030032	000000	000000		$UMODE:	IFNDEF USRASB,<0> IFDEF USRASB,<-1>	;USER ALLOWED
   448	030033	000000	000000		$DSKUP:	IFNDEF DSKUPD,<0> IFDEF DSKUPD,<-1>	;DISK UPDATE MODE
   449	030034	000000	000000		$MMAP:	IFNDEF MEMMAP,<0> IFDEF MEMMAP,<-1>	;ALLOW MEMORY RTNS
   450	030035	000000	000000		PAREA7:	PAREA5		;OPTIONAL PARAMETER
   451	030036	000000	000000		PAREA8:	PAREA6		;OPTIONAL PARAMETER
   452
   453					S^;*********************************************************************^
   454					;*PROGRAM VARIABLE PARAMETER AREA
   455					S^;*********************************************************************^
   456
   457	030037	000000	000000		USER:	0		; 0 = EXEC, -1 = USER MODE FLAG
   458	030040	000000	000000		KAIFLG:	0		;PROCESSOR TYPE, 0 = KA10, -1 = KI10
   459	030041	000000	000000		KLFLG:	0		;PROCESSOR TYPE, 0 = KA/KI, -1 = KL10
   460	030042	777777	777777		MONFLG:	-1		;DIAG MONITOR SPECIAL USER FLAG
   461	030043	000000	000000		MONCTL:	0		;DIAG MON/SYS EXR FLAG
   462	030044	000000	000000		MONTEN:	0		;-1= LOADED BY 10
   463	030045	000000	000000		CLOCKF:	0		;CLOCK TICKED FLAG
   464	030046	000000	000000		CONSW:	0		;CONSOLE SWITCH SETTINGS
   465	030047	000000	000000		PASCNT:	0		;PROGRAM PASS COUNT
   466	030050	000000	000000		RUNFLG:	0		;PROGRAM RUN FLAG
   467	030051	000000	000000		TESTPC:	0		;SUBTEST PC
   468	030052	000000	000000		ERRPC:	0		;ERROR PC
   469	030053	000000	000000		ERRTLS:	0		;ERROR TOTALS
   470	030054	000000	000000		TICKS:	0		;PROGRAM RUNNING TIME
   471	030055	000000	000000		MARGIN:	0		;KI10 MARGIN WORD VALUE
   472	030056	000000	000000		$ONETM:	0		;SUBROUTINE INITIALIZATION FLAG
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 3
FIXED	KLM	18-JAN-77 11:39		*FIXED* FIXED CONTROL AND DISPATCH STORAGE, JAN 18,1977                            SEQ 0020

   473					S^;*********************************************************************^
   474					;*SPECIAL PROGRAM DISPATCH ADDRESSES
   475					S^;*********************************************************************^
   476
   477	030057	037 12 0 00 000004 	BEGEND:	ENDUUO		;END OF PASS
   478	030060	254 00 0 00 030010 	$BEND1:	JRST	BEGIN1	;KEEP RUNNING PROGRAM
   479	030061	037 16 0 00 000004 	$BEND2:	EOPUUO		;END OF PROGRAM - NO RETURN
   480	030062	000000	030726		CNTLC:	SADR5		;CONTROL C XFER ADDRESS
   481	030063	000000	030726		ALTMGO:	SADR6		;ALTMODE XFER ADDRESS
   482	030064				CPOPJ1:			;SKIP RETURN
   483	030064	350 00 0 17 000000 	UUOSKP:	AOS	(P)	;SKIP RETURN FROM UUO
   484	030065				CPOPJ:			;NON-SKIP REGULAR RETURN
   485	030065	263 17 0 00 000000 	UUOEXT:	RTN		;UUO RETURN
   486	030066	255 00 0 00 000000 	UUORTN:	JFCL		;ADDITIONAL USERS UUO ROUTINE
   487	030067	255 00 0 00 000000 	$UORTX:	JFCL		;ADDITIONAL UUO LINKAGE
   488	030070	255 00 0 00 000000 	$UUOER:	JFCL		;INITED AS (JRST $UOERX)
   489	030071	255 00 0 00 000000 	$ITRHL:	JFCL		;ADDITIONAL INTERRUPT LINKAGE
   490	030072	255 00 0 00 000000 	$ITRX1:	JFCL		; "
   491	030073	255 00 0 00 000000 	$USRHL:	JFCL		; "
   492	030074	255 00 0 00 000000 	$RSRTX:	JFCL		;ADDITIONAL POWER FAIL LINKAGE
   493	030075	255 00 0 00 000000 	$RSRTY:	JFCL		; "
   494	030076	255 00 0 00 000000 	RESRT1:	JFCL		; INITED AS (JRST RESRTX)
   495	030077	255 00 0 00 000000 	RESRT2:	JFCL		; "
   496	030100	255 00 0 00 000000 	$PARER:	JFCL		;ADDITIONAL PARITY ERROR LINKAGE
   497	030101	255 00 0 00 000000 	ERMORE:	JFCL		;ADDITIONAL ERROR HANDLER LINKAGE
   498	030102	254 04 0 00 030102 		HALT	.	;IMPROPER TRANSFER HALT
   499
   500	030103	000000	000000		$PSHER:	0		;INITED AS (JRST PSHERR)
   501	030104	000000	000000		ITRCH1:	0		;PC & FLAGS OF CURRENT INTERRUPT
   502	030105	000000	000000			0		;INITED AS (JRST $ITRC1)
   503
   504					S^;*********************************************************************^
   505					;*PROCESSOR CONTROL STORAGE
   506					S^;*********************************************************************^
   507
   508	030106	000000	000000		$ACC0:	0		;INTERRUPT SAVED AC0
   509	030107	000000	000000		$SVPI:	0		;INTERRUPT SAVED PI
   510	030110	000000	000000		$SVAPR:	0		;INTERRUPT SAVED APR
   511	030111	000000	000000		$SVPAG:	0		;INTERRUPT SAVED PAG (DATAI)
   512	030112	000000	000000		$SPAG1:	0		;INTERRUPT SAVED PAG (CONI)
   513
   514	030113	000000	000000		$SVUUO:	0		;CURRENT USERS UUO
   515	030114	000000	000000		$SVUPC:	0		;PC OF CURRENT USERS UUO
   516
   517	030115	000000	000000		REPTU:	0		;REPEAT UUO ITERATIONS
   518	030116	000000	000000		SCOPE:	0		;ERROR HANDLER SCOPE LOOP FLAG
   519	030117	000000	000000		%CORFLG:0		; " CORRECT FLAG
   520	030120	000000	000000		%COREC:	0		; " CORRECT DATA
   521	030121	000000	000000		%ACTFL:	0		; " ACTUAL FLAG
   522	030122	000000	000000		%ACTUL:	0		; " ACTUAL DATA
   523	030123	000000	000000		%DISCR:	0		; " DISCREPENCY DATA
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 4
FIXED	KLM	18-JAN-77 11:39		*FIXED* FIXED CONTROL AND DISPATCH STORAGE, JAN 18,1977                            SEQ 0021

   524					S^;*********************************************************************^
   525					;*UUO DISPATCH TABLE
   526					S^;*********************************************************************^
   527						XLIST
   528						LIST
   529	030124	030070	030070		UUODIS:	LUUO1,,$UUOER
   530	030125	030070	030070			LUUO3,,LUUO2
   531	030126	030070	030070			LUUO5,,LUUO4
   532	030127	030070	030070			LUUO7,,LUUO6
   533	030130	030070	030070			LUUO11,,LUUO10
   534	030131	030070	030070			LUUO13,,LUUO12
   535	030132	030070	030070			LUUO15,,LUUO14
   536	030133	030070	030070			LUUO17,,LUUO16
   537	030134	030070	030070			LUUO21,,LUUO20
   538	030135	030070	030070			LUUO23,,LUUO22
   539	030136	030070	030070			LUUO25,,LUUO24
   540	030137	030070	030070			LUUO27,,LUUO26
   541	030140	030070	030070			LUUO31,,LUUO30
   542	030141	030070	030070			LUUO33,,LUUO32
   543
   544					S^;*********************************************************************^
   545					;*MEMORY MANAGMENT STORAGE
   546					S^;*********************************************************************^
   547
   548	030142	000000	000000		DF22F:	0		;DF10 CONTROL FLAG, 0 = 18, -1 = 22 BIT
   549	030143	000000	000000		MAPNEW:	0		;MEMORY MAPPING CONTROL FLAG, -1 = 4096K MAPPING
   550	030144	000000	000000		MEMTOT:	0		;TOTAL MEMORY SIZE IN K (1024.)
   551	030145	000000	000000		MEMLOW:	0		;LOWEST USABLE MEMORY
   552	030146				MEMSIZ:	BLOCK ^D41	;MEMORY SEGMENT POINTER TABLE
   553
   554					S^;*********************************************************************^
   555					;*PRINT CONTROL STORAGE
   556					S^;*********************************************************************^
   557
   558	030217	000000	000000		PNTFLG:	0		;PRINT FLAG, -1 WHILE IN PRINT ROUTINE
   559	030220	000000	000000		PNTENB:	0		;PRINT ENABLE
   560	030221	000000	000000		PDISF:	0		;PRINT DISABLED FLAG
   561	030222	000000	000000		PNTINH:	0		;INHIBIT PRINT INPUT CHECKS
   562	030223	000000	000000		PNTSPC:	0		;PRINT SPACE CONTROL
   563	030224	000000	000000		OPTIME:	0		;TYPE-IN WAIT TIME
   564	030225	000000	000000		$TWCNT:	0		;TIME WAITED
   565	030226	000000	000000		$DVOFF:	0		;LOGICAL DEVICE INITED FLAG
   566	030227	000000	000000		TTYFIL:	0		;TTY EXEC FILLERS FLAG
   567	030230	000000	000000		TTYSPD:	0		;TTY EXEC BAUD RATE
   568	030231	000000	000000		$TTCHR:	0		;ACTUAL TYPED IN CHAR
   569	030232	000000	000000		$CHRIN:	0		;UPPER CASED & PARITY STRIPPED CHAR
   570	030233	000000	000000		$TYPNB:	0		;TYPED IN NUMBER
   571	030234	000000	000000		$CRLF:	0		;FREE CR/LF FLAG
   572	030235	000000	000000		$TABF:	0		;TAB CONVERSION FLAG
   573	030236	000000	000000		$FFF:	0		;FORM FEED CONVERSION FLAG
   574	030237	000000	000000		$VTF:	0		;VERTICAL TAB CONVERSION FLAG
   575	030240	000000	000000		USRLFF:	0		;USER LF FILLERS
   576	030241	000000	000000		USRCRF:	0		;USER CR FILLERS
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 5
FIXED	KLM	18-JAN-77 11:39		*FIXED* FIXED CONTROL AND DISPATCH STORAGE, JAN 18,1977                            SEQ 0022

   577					S^;*********************************************************************^
   578					;*THE FOLLOWING MISCELLANEOUS PRINT CHARACTERS ARE INCLUDED
   579					;*TO FACILITATE PRINTING AND ARE CALLED AS FOLLOWS:
   580					;*	MOVEI	NAME
   581					;*	PNTA		;OR PNTAF
   582					S^;*********************************************************************^
   583
   584	030242				CRLF:	ASCII/
   585	030242	015 012 000 000 000 	/
   586	030243				CRLF2:	ASCII/
   587
   588	030243	015 012 015 012 000 	/
   589	030244	054 000 000 000 000 	COMMA:	ASCII/,/
   590	030245	056 000 000 000 000 	PERIOD:	ASCII/./
   591	030246	040 000 000 000 000 	SPACE:	ASCII/ /
   592	030247	011 000 000 000 000 	TAB:	ASCII/	/
   593	030250				MINUS:
   594	030250	055 000 000 000 000 	HYPEN:	ASCII/-/
   595	030251	053 000 000 000 000 	PLUS:	ASCII/+/
   596	030252	052 000 000 000 000 	AST:	ASCII/*/
   597	030253	100 000 000 000 000 	ATSIN:	ASCII/@/
   598	030254	050 000 000 000 000 	LFP:	ASCII/(/
   599	030255	051 000 000 000 000 	RTP:	ASCII/)/
   600	030256	007 0000000000 		BELL:	BYTE (7) 007
   601	030257	077 000 000 000 000 	QUEST:	ASCII/?/
   602	030260	057 000 000 000 000 	SLASH:	ASCII!/!
   603	030261	044 000 000 000 000 	DOLLAR:	ASCII/$/
   604	030262	000000	000012		RADIX:	^D10			;DECIMAL PRINT RADIX
   605	030263	000000	000040		RADLSP:	40			;DECIMAL PRINT LEADING CHAR
   606	030264	000000	000012		RADLSC:	^D10			;DECIMAL PRINT LEADING CHAR COUNT
   607
   608					S^;*********************************************************************^
   609					;*USER MODE OUTPUT FILE INFORMATION
   610					S^;*********************************************************************^
   611
   612	030265				$OBUF:	BLOCK	3		;LOGICAL FILE OUTPUT BUFFER HEADER
   613	030270	60 62 51 56 64 00 	$OUTNM:	SIXBIT	/PRINT/		;FILE NAME
   614	030271	60 56 64 00 00 00 	$OUTEX:	SIXBIT	/PNT/		;FILE NAME EXTENSION
   615	030272					BLOCK	2
   616
   617					S^;*********************************************************************^
   618					;*DISK UPDATE MODE FILE INFORMATION
   619					S^;*********************************************************************^
   620
   621	030274				$IBUF:	BLOCK	3
   622	030277	60 62 51 56 64 00 	$INNM:	SIXBIT	/PRINT/
   623	030300	60 56 64 00 00 00 	$INEXT:	SIXBIT	/PNT/
   624	030301					BLOCK	2
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 6
FIXED	KLM	18-JAN-77 11:39		*FIXED* FIXED CONTROL AND DISPATCH STORAGE, JAN 18,1977                            SEQ 0023

   625					S^;*********************************************************************^
   626					;*PUSHDOWN LIST CONTROL INFORMATION
   627					S^;*********************************************************************^
   628
   629	030303	777577	030303		PLIST:	PLIST-PLISTE,,PLIST
   630	030304				PLISTS:	BLOCK	200
   631	030504	000000	000000		PLISTE:	0		;END OF PUSHDOWN LIST
   632
   633					S^;*********************************************************************^
   634					;*POWER LINE CLOCK FREQUENCY FLAG
   635					S^;*********************************************************************^
   636
   637	030505	000000	000000		CYCL60:	0	;0 = 60, -1 = 50 CYCLE
   638
   639					S^;*********************************************************************^
   640					;*KL10 CACHE CONTROL FLAGS
   641					S^;*********************************************************************^
   642
   643	030506	000000	000000		CSHFLG:	0	;ALLOW CACHE IF 0
   644	030507	000000	000000		CSHMEM:	0	;CACHE MEMORY SEGMENTS IF 0
   645
   646					S^;*********************************************************************^
   647					;*NUMBER INPUT DIGIT FLAG
   648					S^;*********************************************************************^
   649
   650	030510	000000	000000		TTNBRF:	0	;-1 IF ANY DIGIT TYPED
   651
   652					S^;*********************************************************************^
   653					;*KL10 & KI10 "INHPAG" SWITCH PAGING PREVENTION
   654					S^;*********************************************************************^
   655
   656	030511	000000	000000		PVPAGI:	0	;IF NON-ZERO, OVERRIDE "INHPAG" SWITCH ACTION
   657
   658					S^;*********************************************************************^
   659					;*ERROR REPORTING ROUTINE ADDITIONAL USERS CONTROL INSTRUCTIONS
   660					S^;*********************************************************************^
   661
   662	030512	000000	000000		%ERHI1:	0	;IF NON-ZERO, XCT'D AT START OF %ERUUO
   663	030513	000000	000000		%ERHI2:	0	;IF NON-ZERO, XCT'D AT END OF %ERUUO
   664	030514	000000	000000		%ERHI3:	0	;IF NON-ZERO, XCT'D AFTER "PC" OF %ERUUO
   665
   666					S^;*********************************************************************^
   667					;*SPECIAL USERS UUO INTERCEPT INSTRUCTION
   668					S^;*********************************************************************^
   669
   670	030515	000000	000000		$$UUO:	0	;IF NON-ZERO, XCT'D AT START OF $UORTN
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 7
FIXED	KLM	18-JAN-77 11:39		*FIXED* FIXED CONTROL AND DISPATCH STORAGE, JAN 18,1977                            SEQ 0024

   671					S^;*********************************************************************^
   672					;*KL10 PROCESSOR TYPE FLAG, 0=P0, 1=BBD NEW, 2=BBD OLD
   673					S^;*********************************************************************^
   674
   675	030516	000000	000000		KLTYP:	0
   676
   677					S^;*********************************************************************^
   678					;*SPECIAL USERS MUUO INTERCEPT INSTRUCTION
   679					S^;*********************************************************************^
   680
   681	030517	000000	000000		$$MUUO:	0	;IF NON-ZERO, XCT'D AT START OF MUUOER
   682
   683					S^;*********************************************************************^
   684					;*SPECIAL USERS USER MODE OUTPUT ERROR INTERCEPT INSTUCTION
   685					S^;*********************************************************************^
   686
   687	030520	000000	000000		$$OUTER:0	;IF NON-ZERO, XCT'D AT END OF USER MODE ERROR
   688
   689					S^;*********************************************************************^
   690					;*"SWITCH" CALL USAGE CONTROL
   691					S^;*********************************************************************^
   692
   693	030521	000000	000000		$$TOGGLE:0	;IF NON-ZERO, USE C(CONSW) FOR SWITCHES
   694
   695					S^;*********************************************************************^
   696					;*SPECIAL USERS ALTMODE SWITCH CALL INTERCEPT INSTRUCTIONS
   697					S^;*********************************************************************^
   698
   699	030522	000000	000000		$$TAX1:	0	;IF NON-ZERO, XCT'D AT START OF ALTMODE SWITCH CALL
   700	030523	000000	000000		$$TAX2:	0	;IF NON-ZERO, XCT'D AT END OF ALTMODE SWITCH CALL
   701
   702					S^;*********************************************************************^
   703					;*SPECIAL FUTURE EXPANSION ROOM
   704					;*IF ANY FIXED AREA TAGS ARE ADDED, REDUCE THE SIZE OF
   705					;*THIS BLOCK STATEMENT ACCORDINGLY.  THIS MUST BE DONE
   706					;*SO THAT PREVIOUS FIXED ASSIGNMENTS DO NOT CHANGE.
   707					S^;*********************************************************************^
   708
   709	030524					BLOCK	53	;HOPEFULLY THIS IS ENOUGH FOREVER
   710
   711					S^;*********************************************************************^
   712					;*END OF FIXED STORAGE
   713					S^;*********************************************************************^
   714
   715			030577			$ENDFX=<PLISTE+100>&<777700>-1
   716	030577					LOC	$ENDFX
   717	030577	000000	000000		ENDFIX:	0		;END OF FIXED STORAGE
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 1
SPCCPU	KLM	26-FEB-76 05:50		*SPCCPU* SPECIAL BASIC CPU PROCESSOR CONTROL, 26-FEB-76                            SEQ 0025

   718					SUBTTL	*SPCCPU* SPECIAL BASIC CPU PROCESSOR CONTROL, 26-FEB-76
   719
   720					;NEW DEFINITIONS USED BY THE KL10 SUBROUTINE PACKAGE
   721
   722			000000		AC0=	0
   723			030000		DIAGNOS=30000		;PDP-10 DIAGNOSTIC START ADDRESS
   724			010000		DDT=	10000		;PDP-10 DDT START ADDRESS
   725			020000		DIAMON=	20000		;PDP-10 DIAMON LOADER START ADDRESS
   726			020000		DONG11=	1B22		;11 DOORBELL (FROM THE 10)
   727
   728					;DTE20 DEVICE CODES
   729
   730			000200		DTE==	200		;DTE0
   731			000204		DTE0==	204
   732			000204		DTE1==	204
   733			000210		DTE2==	210
   734			000214		DTE3==	214
   735
   736					;KL10 EPT COMMUNICATION AREA
   737
   738			000440		$STD=	440		;PDP-10 DIAGNOSTIC START ADDRESS
   739			000441		$DDT=	441		;PDP-10 DDT START ADDRESS
   740			000442		$STL=	442		;PDP-10 LOADER START ADDRESS
   741			000443		$STM=	443		;PDP-10 MONITOR START ADDRESS
   742
   743			000444		$DTFLG=	444		;DTE20 OPERATION COMPLETE FLAG
   744			000445		$DTCLK=	445		;DTE20 CLOCK INTERRUPT FLAG
   745			000446		$DTCI=	446		;DTE20 CLOCK INTERRUPT INSTRUCTION
   746			000447		$DTT11=	447		;DTE20 10 TO 11 ARGUMENT
   747			000450		$DTF11=	450		;DTE20 11 TO 10 ARGUMENT
   748			000451		$DTCMD=	451		;DTE20 TO 11 COMMAND WORD
   749			000452		$DTSEQ=	452		;DTE20 OPERATION SEQUENCE NUMBER
   750			000453		$DTOPR=	453		;DTE20 OPERATIONAL DTE #
   751			000454		$DTCHR=	454		;DTE20 LAST TYPED CHARACTER
   752			000455		$DTMTD=	455		;DTE20 MONITOR TTY OUTPUT COMPLETE FLAG
   753			000456		$DTMTI=	456		;DTE20 MONITOR TTY INPUT FLAG
   754
   755			000457		$DTSWR=	457		;DTE20 CONSOLE SWITCH REGISTER
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 2
SPCCPU	KLM	26-FEB-76 05:50		*SPCCPU* SPECIAL BASIC CPU PROCESSOR CONTROL, 26-FEB-76                            SEQ 0026

   756					;SPECIAL "FIXED" REASSIGNMENTS
   757
   758			030600			$$LOC=.			;SAVE CURRENT LOCATION
   759
   760	030000					LOC	30000
   761	030000	254 00 0 00 030600 	$$BEGIN:JRST	$$START		;SETUP SPECIAL START
   762	030001	254 00 0 00 030600 		JRST	$$START		;"DIAMON" CHAIN START ADDRESS
   763
   764	000440					LOC	440
   765	000440	254 00 0 00 030000 	$STD:	JRST	BEGIN		;SETUP FOR "STD"
   766	000443					LOC	443
   767	000443	254 00 0 00 030636 	$STM:	JRST	$SPEC		;SIMPLE RUN CONTROL
   768
   769	030057					LOC	30057
   770	030057	254 00 0 00 030641 	$BEGEND:JRST	$SPBEND		;SETUP SPECIAL "BEGEND"
   771
   772					;SPECIAL MUUO, TRAP & PAGE FAIL SETUP
   773
   774	000420					LOC	420
   775	000420	254 04 0 00 000420 	$$420:	HALT	.		;KI10 PAGE FAIL
   776	000421	255 00 0 00 000000 	$$421:	JFCL			;OVERFLOW
   777	000422	254 04 0 00 000422 	$$422:	HALT	.		;PUSHDOWN OVERFLOW
   778	000423	254 04 0 00 000423 	$$423:	HALT	.		;TRAP 3
   779	000424	000000	000000		$$424:	0			;MMUO
   780	000425	000000	000000		$$425:	0			;MMUO PC
   781	000426	000000	000000		$$426:	0			;KI10-PAGE FAIL, KL10-PROCESS CONTEXT
   782	000427	254 04 0 00 000427 	$$427:	HALT	.
   783	000430	000000	000427		$$430:	427			;MMUO NEW PC'S
   784	000431	000000	000427		$$431:	427
   785	000432	000000	000427		$$432:	427
   786	000433	000000	000427		$$433:	427
   787	000434	000000	000427		$$434:	427
   788	000435	000000	000427		$$435:	427
   789	000436	000000	000427		$$436:	427
   790	000437	000000	000427		$$437:	427
   791
   792	000500					LOC	500
   793	000500	000000	000000		$$500:	0			;KL10 PAGE FAIL WORD
   794	000501	000000	000000		$$501:	0			;KL10 PAGE FAIL PC
   795	000502	000000	000503		$$502:	503			;KL10 PAGE FAIL NEW PC
   796	000503	254 04 0 00 000503 	$$503:	HALT	.
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 3
SPCCPU	KLM	26-FEB-76 05:50		*SPCCPU* SPECIAL BASIC CPU PROCESSOR CONTROL, 26-FEB-76                            SEQ 0027

   797	030600					LOC	$$LOC		;RESET CURRENT LOCATION
   798
   799					;SPECIAL STARTUP SEQUENCE
   800
   801	030600	402 00 0 00 030037 	$$START:SETZM	USER
   802	030601	265 00 0 00 030602 		JSP	0,.+1		;IN USER MODE ?
   803	030602	603 00 0 00 010000 		TLNE	0,USERF
   804	030603	476 00 0 00 030037 		SETOM	USER		;YES, SET CONTROL WORD
   805	030604	336 00 0 00 030042 		SKIPN	MONFLG		;SPECIAL USER MODE ?
   806	030605	402 00 0 00 030037 		SETZM	USER		;YES, RUN AS EXEC
   807	030606	332 00 0 00 030037 		SKIPE	USER
   808	030607	254 00 0 00 030726 		JRST	START		;USER MODE, DON'T NEED CPU TYPE
   809
   810	030610	336 00 0 00 030044 	$STKIL:	SKIPN	MONTEN		;LOADED BY "DIAMON" ?
   811	030611	476 00 0 00 030024 		SETOM	ITRCNT		;NO, RUN FOREVER
   812	030612	402 00 0 00 030516 		SETZM	KLTYP
   813	030613	402 00 0 00 030041 		SETZM	KLFLG		;ASSUME KI10
   814	030614	200 01 0 00 036415 		MOVE	1,[1,,1]
   815	030615	251 01 0 00 000001 		BLT	1,1		;HOPE THIS WORKS
   816	030616	316 01 0 00 036415 		CAMN	1,[1,,1]	;IF AC NE 1,,1 AFTER BLT, KL10
   817	030617	254 00 0 00 030726 		JRST	START		;KI10, NO ADDITIONAL SETUP
   818
   819	030620	7 000 20 0 00 010040 	$STKL:	CONO	APR,10040	;SET BBD NOT BIT
   820	030621	7 000 24 0 00 000000 		CONI	APR,0
   821	030622	7 000 20 0 00 020040 		CONO	APR,20040	;CLEAR BBD NOT BIT
   822	030623	606 00 0 00 000040 		TRNN	0,40		;IF SET, KL10
   823	030624	350 00 0 00 030516 		AOS	KLTYP		;IF NOT, BBD
   824	030625	402 00 0 00 000444 		SETZM	$DTFLG
   825	030626	402 00 0 00 000445 		SETZM	$DTCLK
   826	030627	200 00 0 00 000453 		MOVE	$DTOPR		;GET DTE #
   827	030630	436 00 0 00 030670 		ORM	$$DTE0		;INSERT IN DTE I/O INSTS
   828	030631	436 00 0 00 030672 		ORM	$$DTE1
   829	030632	436 00 0 00 030704 		ORM	$$DTE2
   830	030633	436 00 0 00 030706 		ORM	$$DTE3
   831	030634	476 00 0 00 030041 		SETOM	KLFLG		;SET KL10 CONTROL FLAG
   832	030635	254 00 0 00 030726 		JRST	START
   833
   834	030636	200 00 0 00 036416 	$SPEC:	MOVE	[JRST STARTA]	;SIMPLE RUN CONTROL
   835	030637	202 00 0 00 030643 		MOVEM	$SPB1
   836	030640	254 00 0 00 030726 		JRST	START
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 4
SPCCPU	KLM	26-FEB-76 05:50		*SPCCPU* SPECIAL BASIC CPU PROCESSOR CONTROL, 26-FEB-76                            SEQ 0028

   837					;SPECIAL "BEGEND" ROUTINE
   838
   839	030641	350 00 0 00 030047 	$SPBEND:AOS	PASCNT		;INCREMENT PASS COUNT
   840	030642	370 00 0 00 030024 		SOS	ITRCNT		;DECREMENT ITERATION COUNT
   841	030643	336 00 0 00 030037 	$SPB1:	SKIPN	USER
   842	030644	254 00 0 00 030652 		JRST	$SPBEX		;EXEC MODE
   843
   844	030645	332 00 0 00 030024 	$SPBUS:	SKIPE	ITRCNT		;USER MODE, COMPLETED ?
   845	030646	254 00 0 00 030737 		JRST	STARTA		;NO, KEEP RUNNING
   846	030647	336 00 0 00 030044 		SKIPN	MONTEN		;DONE, LOADED BY "DIAMON" ?
   847	030650	047 00 0 00 000012 		EXIT			;NO, RETURN TO MONITOR
   848	030651	254 00 1 00 030012 		JRST	@RETURN		;YES, RETURN TO "DIAMON"
   849
   850	030652	332 00 0 00 030041 	$SPBEX:	SKIPE	KLFLG
   851	030653	254 00 0 00 030660 		JRST	$SPBKL		;KL10 & EXEC
   852	030654	7 004 14 0 00 030024 		DATAO	PI,ITRCNT	;KI10 & EXEC, DISPLAY ITER COUNT
   853	030655	332 00 0 00 030024 		SKIPE	ITRCNT
   854	030656	254 00 0 00 030737 		JRST	STARTA		;NOT COMPLETED YET
   855	030657	254 00 1 00 030012 		JRST	@RETURN		;DONE
   856
   857	030660	336 00 0 00 030024 	$SPBKL:	SKIPN	ITRCNT
   858	030661	254 00 0 00 030676 		JRST	$SPKLD		;KL10, EXEC & COMPLETED
   859
   860	030662	335 00 0 00 030043 		SKIPGE	MONCTL
   861	030663	254 00 0 00 030737 		JRST	STARTA		;"DIAMON" CONTROL
   862	030664	201 00 0 00 000404 		MOVEI	0,404		;NOTIFY PDP-11 OF END OF PASS
   863	030665	202 00 0 00 000451 		MOVEM	0,$DTCMD
   864	030666	402 00 0 00 000444 		SETZM	$DTFLG
   865	030667	336 00 0 00 030516 		SKIPN	KLTYP
   866	030670	7 200 20 0 00 020000 	$$DTE0:	CONO	DTE,DONG11
   867	030671	332 00 0 00 030516 		SKIPE	KLTYP
   868	030672	7 200 20 0 00 010000 	$$DTE1:	CONO	DTE,10000
   869	030673	336 00 0 00 000444 		SKIPN	$DTFLG		;WAIT TILL 11 RESPONDS
   870	030674	254 00 0 00 030673 		JRST	.-1
   871	030675	254 00 0 00 030737 		JRST	STARTA		;KEEP RUNNING
   872
   873					;SPECIAL KL10 COMPLETED ROUTINE
   874
   875	030676	332 00 0 00 030044 	$SPKLD:	SKIPE	MONTEN
   876	030677	254 00 1 00 030012 		JRST	@RETURN		;LOADED BY "DIAMON"
   877
   878	030700	201 00 0 00 000403 		MOVEI	0,403		;NOTIFY PDP-11 OF COMPLETION
   879	030701	202 00 0 00 000451 		MOVEM	0,$DTCMD
   880	030702	402 00 0 00 000444 		SETZM	$DTFLG
   881	030703	336 00 0 00 030516 		SKIPN	KLTYP
   882	030704	7 200 20 0 00 020000 	$$DTE2:	CONO	DTE,DONG11
   883	030705	332 00 0 00 030516 		SKIPE	KLTYP
   884	030706	7 200 20 0 00 010000 	$$DTE3:	CONO	DTE,10000
   885	030707	336 00 0 00 000444 		SKIPN	$DTFLG		;SHOULD NEVER HAPPEN
   886	030710	254 00 0 00 030707 		JRST	.-1		;11 NEVER RETURNS ON END OF PROGRAM
   887	030711	254 04 0 00 030000 		HALT	BEGIN		;IF IT DOES, HALT.
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 1
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0029

   888					SUBTTL	DIAGNOSTIC SECTION
   889
   890						LALL
   891
   892	030712				PGMNAM:	ASCIZ	/
   893	030712	015 012 120 104 120 	PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC # 8 [DAKAH]
   894	030713	055 061 060 040 113
   895	030714	101 061 060 040 102
   896	030715	101 123 111 103 040
   897	030716	111 116 123 124 122
   898	030717	125 103 124 111 117
   899	030720	116 040 104 111 101
   900	030721	107 116 117 123 124
   901	030722	111 103 040 043 040
   902	030723	070 040 133 104 101
   903	030724	113 101 110 135 015
   904	030725	012 000 000 000 000 	/
   905	030726	402 00 0 00 030037 	START:	SETZM	USER#		;CLEAR USER CONTROL WORD
   906	030727	265 00 0 00 030730 		JSP	0,.+1		;GET FLAGS
   907	030730	603 00 0 00 010000 		TLNE	USERF		;IN USER MODE?
   908	030731	476 00 0 00 030037 		SETOM	USER		;YES, SET USER CONTROL WORD
   909	030732	336 00 0 00 030037 		SKIPN	USER
   910	030733	254 00 0 00 030737 		JRST	STARTA
   911	030734	051 03 0 00 030712 		TTCALL	3,PGMNAM	;MENTION OUR NAME
   912						OUTSTR	[ASCIZ	/
   913					?EXEC MODE DIAGNOSTIC ONLY
   914	030735	051 03 0 00 036417 	/]				;TELL USER
   915	030736	254 04 0 00 030736 		HALT	.		;AND DIE...
   916
   917	030737				STARTA:
   918	030737	402 00 0 00 036671 	ST:	SETZM	MATPOF#		;CLR MA TRAP OFFSET FLAG.
   919	030740	332 01 0 00 035772 	MOD:	SKIPE 1,SAV40		;RESTORE THESE LOC IF PROG
   920	030741	202 01 0 00 010040 		MOVEM 1,10040			;IF PROG MODIFIED
   921	030742	332 01 0 00 035773 		SKIPE 1,SAV41
   922	030743	202 01 0 00 010041 		MOVEM 1,10041
   923	030744	332 01 0 00 035774 		SKIPE 1,SAV42
   924	030745	202 01 0 00 010042 		MOVEM 1,10042
   925	030746	332 01 0 00 035775 		SKIPE 1,SAV43
   926	030747	202 01 0 00 010043 		MOVEM 1,10043
   927	030750	7 000 24 0 00 036667 		CONI CPSAV#
   928	030751	7 004 24 0 00 036673 		CONI PI,PISAV#
   929
   930	030752	7 000 04 0 00 000000 		DATAI			;DO WE HAVE FP
   931	030753	335 00 0 00 030043 		SKIPGE	MONCTL		;MONITR CONTROL ?
   932	030754	200 00 0 00 030043 		MOVE	0,MONCTL	;YES
   933	030755	464 00 0 00 036426 		ORCM [1B35]
   934	030756	452 00 0 00 036670 		SETCAM FPTRAP#
   935	030757	476 00 0 00 036672 		SETOM PI7SYS#
   936
   937	030760	7 000 04 0 00 000000 		DATAI			;IS THIS MACH WITH USER
   938	030761	335 00 0 00 030043 		SKIPGE	MONCTL		;MONITR CONTROL ?
   939	030762	200 00 0 00 030043 		MOVE	0,MONCTL	;YES
   940	030763	464 00 0 00 036427 		ORCM [1B34]
   941	030764	452 00 0 00 036674 		SETCAM USMOD#
   942
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 1-1
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0030

   943	030765	332 00 0 00 036671 		SKIPE	MATPOF#		;START AT 3776?
   944	030766	254 00 0 00 036352 		JRST	MOD200		;YES. GO CK MA 29 SET.
   945
   946					;MACH/OPTION DEPENDENT
   947					;TEST UU0
   948
   949						RETURN MOD1		^;TEST UUO FOR NOT GOING TO 60
   950
   951	030767	200 02 0 00 036430 		MOVE	2,[JSP 2,MOD1]
   952	030770	202 02 0 00 000041 		MOVEM	2,41
   953	030771	477 02 0 00 000040 		SETOB	2,40
   954
   955	030772	200 01 0 00 036431 		MOVE	1,[JRST .+4]	;IF THIS ROUT STOPS THE
   956	030773	200 02 0 00 036432 		MOVE	2,[JSP MOD1+1]	;TRAP WAS TO 60. IF UU0 HANG
   957	030774	202 02 0 00 000061 		MOVEM	2,61		;THE MACH, CHECK XCTF0 AND
   958	030775	000000	000000			0			;UU0F0 FLAGS FOR NOT SETING
   959	030776	334 00 0 00 000000 	MOD1:	SKIPA			;CHECK MA 31 SET
   960						STOP			^;IR 1XX GATE FAIL
   961
   962	030777	254 04 0 00 031000 		HALT	.+1
   963	031000	320 00 0 00 031001 		JUMP	.+1
   964
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 2
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0031

   965
   966	031001				MOD2:	RETURN	MOD3		^;TEST 40 TO MA LOGIC (UU0)
   967
   968	031001	200 02 0 00 036433 		MOVE	2,[JSP 2,MOD3]
   969	031002	202 02 0 00 000041 		MOVEM	2,41
   970	031003	477 02 0 00 000040 		SETOB	2,40
   971
   972	031004	200 01 0 00 036434 		MOVE	1,[JRST .+3]	;IF 40 WAS NOT (J) TO MA
   973	031005	000000	000000			0			;THIS UU0 WILL STORE IN LOC 0
   974	031006	334 00 0 00 000000 	MOD3:	SKIPA			;CHECK MA-30 SET
   975						STOP			^;ON THE MA1 PRINT
   976
   977	031007	254 04 0 00 031010 		HALT	.+1
   978	031010	320 00 0 00 031011 		JUMP	.+1
   979
   980
   981	031011				MOD4:	RETURN	MOD5		^;IF THE MA FROM AR
   982
   983	031011	200 02 0 00 036435 		MOVE	2,[JSP 2,MOD5]
   984	031012	202 02 0 00 000041 		MOVEM	2,41
   985	031013	477 02 0 00 000040 		SETOB	2,40
   986
   987	031014	200 02 0 00 036436 		MOVE	2,[JSP MOD5+1]	;INHIBIT (AT6) FAILED THE
   988	031015	202 00 0 00 000061 		MOVEM	61		;UU0 WOULD STORE IN E ORED
   989	031016	000000	000020			20			;WITH 40 RATHER THAN C(40)
   990	031017	334 00 0 00 000000 	MOD5:	SKIPA			;MA FM AR(J) CAME UP  CHECK
   991						STOP			^;AND OF AT6-IR UU0 ON MA1 PRINT
   992
   993	031020	254 04 0 00 031021 		HALT	.+1
   994	031021	320 00 0 00 031022 		JUMP	.+1
   995
   996
   997	031022				MOD6:	RETURN	MOD7		^;TEST UU0 ABILITY TO STORE
   998
   999	031022	200 02 0 00 036437 		MOVE	2,[JSP 2,MOD7]
  1000	031023	202 02 0 00 000041 		MOVEM	2,41
  1001	031024	477 02 0 00 000040 		SETOB	2,40
  1002
  1003	031025	000000	000000			0			;IF C(40) UNCHANGED SCE FAIL
  1004	031026	316 02 0 00 000040 	MOD7:	CAMN	2,40		;CK IR UU0 INPUT TO SCE
  1005						STOP			^;ON S2 PRINT
  1006
  1007	031027	254 04 0 00 031030 		HALT	.+1
  1008	031030	320 00 0 00 031031 		JUMP	.+1
  1009
  1010
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 3
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0032

  1011	031031				MOD8:	RETURN	MOD9		^;TEST SACINH FOR UU0
  1012
  1013	031031	200 02 0 00 036440 		MOVE	2,[JSP 2,MOD9]
  1014	031032	202 02 0 00 000041 		MOVEM	2,41
  1015	031033	477 02 0 00 000040 		SETOB	2,40
  1016
  1017	031034	474 00 0 00 000000 		SETO			;IF FAIL WILL MODIFY AC
  1018	031035	000000	000000			0			;SACINH THE IR UU0 INPUT
  1019	031036	312 00 0 00 036441 	MOD9:	CAME	[-1]		;ON S2 PRINT FAILED
  1020						STOP^
  1021	031037	254 04 0 00 031040 		HALT	.+1
  1022	031040	320 00 0 00 031041 		JUMP	.+1
  1023									^
  1024
  1025	031041				MOD10:	RETURN	MOD11		^;TEST UU0 FACINH, IF THE
  1026
  1027	031041	200 02 0 00 036442 		MOVE	2,[JSP 2,MOD11]
  1028	031042	202 02 0 00 000041 		MOVEM	2,41
  1029	031043	477 02 0 00 000040 		SETOB	2,40
  1030
  1031	031044	201 00 0 00 777777 		MOVEI	-1		;UU0 FETCHES A AC THE
  1032	031045	000000	000000			0			;AC WILL BE STORED
  1033	031046	316 00 0 00 000040 	MOD11:	CAMN	40		;FAC INH THE IR UU0 INPUT
  1034						STOP			^;ON F2 PRINT FAIL
  1035
  1036	031047	254 04 0 00 031050 		HALT	.+1
  1037	031050	320 00 0 00 031051 		JUMP	.+1
  1038
  1039
  1040	031051				MOD12:	RETURN	MOD13		^;TEST UU0 IR TO ARLT
  1041
  1042	031051	200 02 0 00 036443 		MOVE	2,[JSP 2,MOD13]
  1043	031052	202 02 0 00 000041 		MOVEM	2,41
  1044	031053	477 02 0 00 000040 		SETOB	2,40
  1045
  1046	031054	077740	000000			XWD	077740,0	;THE AND OF (ET0,IR UU0)
  1047	031055	336 00 0 00 000040 	MOD13:	SKIPN	40		;ON ARC-2 PRINT FAILED
  1048						STOP^
  1049	031056	254 04 0 00 031057 		HALT	.+1
  1050	031057	320 00 0 00 031060 		JUMP	.+1
  1051									^
  1052
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 4
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0033

  1053	031060				MOD14:	RETURN	MOD15		^;UU0 FAIL
  1054
  1055	031060	200 02 0 00 036444 		MOVE	2,[JSP 2,MOD15]
  1056	031061	202 02 0 00 000041 		MOVEM	2,41
  1057	031062	477 02 0 00 000040 		SETOB	2,40
  1058
  1059	031063	000740	000000			XWD	000740,0		;CHECK ARLT FM FLAGS (J) B
  1060	031064	336 00 0 00 000040 	MOD15:	SKIPN	40		;THE PA ON ARC-2 PRINT
  1061						STOP^
  1062	031065	254 04 0 00 031066 		HALT	.+1
  1063	031066	320 00 0 00 031067 		JUMP	.+1
  1064									^
  1065
  1066	031067				MOD16:	RETURN	MOD17		^;UU0 FAIL
  1067
  1068	031067	200 02 0 00 036445 		MOVE	2,[JSP 2,MOD17]
  1069	031070	202 02 0 00 000041 		MOVEM	2,41
  1070	031071	477 02 0 00 000040 		SETOB	2,40
  1071
  1072	031072	077000	000000			XWD	077000,0		;CHECK ARLT FM FLAGS (J) A
  1073	031073	336 00 0 00 000040 	MOD17:	SKIPN	40		;THE PA ON ARC-2 PRINT
  1074						STOP^
  1075	031074	254 04 0 00 031075 		HALT	.+1
  1076	031075	320 00 0 00 031076 		JUMP	.+1
  1077									^
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 5
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0034

  1078
  1079			000040			ZZ=40
  1080					MOD18:	REPEAT	^D10,
  1081					<	RETURN .+4		;TEST IRLT TO AR
  1082						XWD	ZZ,0
  1083						SKIPN	40
  1084						STOP
  1085						ZZ=ZZ+ZZ
  1086					>
  1087						RETURN .+4		^
  1088	031076	200 02 0 00 036446 		MOVE	2,[JSP 2,.+4]
  1089	031077	202 02 0 00 000041 		MOVEM	2,41
  1090	031100	477 02 0 00 000040 		SETOB	2,40
  1091									^;TEST IRLT TO AR
  1092	031101	000040	000000			XWD	ZZ,0
  1093	031102	336 00 0 00 000040 		SKIPN	40
  1094						STOP^
  1095	031103	254 04 0 00 031104 		HALT	.+1
  1096	031104	320 00 0 00 031105 		JUMP	.+1
  1097									^
  1098			000100			ZZ=ZZ+ZZ
  1099
  1100						RETURN .+4		^
  1101	031105	200 02 0 00 036447 		MOVE	2,[JSP 2,.+4]
  1102	031106	202 02 0 00 000041 		MOVEM	2,41
  1103	031107	477 02 0 00 000040 		SETOB	2,40
  1104									^;TEST IRLT TO AR
  1105	031110	000100	000000			XWD	ZZ,0
  1106	031111	336 00 0 00 000040 		SKIPN	40
  1107						STOP^
  1108	031112	254 04 0 00 031113 		HALT	.+1
  1109	031113	320 00 0 00 031114 		JUMP	.+1
  1110									^
  1111			000200			ZZ=ZZ+ZZ
  1112
  1113						RETURN .+4		^
  1114	031114	200 02 0 00 036450 		MOVE	2,[JSP 2,.+4]
  1115	031115	202 02 0 00 000041 		MOVEM	2,41
  1116	031116	477 02 0 00 000040 		SETOB	2,40
  1117									^;TEST IRLT TO AR
  1118	031117	000200	000000			XWD	ZZ,0
  1119	031120	336 00 0 00 000040 		SKIPN	40
  1120						STOP^
  1121	031121	254 04 0 00 031122 		HALT	.+1
  1122	031122	320 00 0 00 031123 		JUMP	.+1
  1123									^
  1124			000400			ZZ=ZZ+ZZ
  1125
  1126						RETURN .+4		^
  1127	031123	200 02 0 00 036451 		MOVE	2,[JSP 2,.+4]
  1128	031124	202 02 0 00 000041 		MOVEM	2,41
  1129	031125	477 02 0 00 000040 		SETOB	2,40
  1130									^;TEST IRLT TO AR
  1131	031126	000400	000000			XWD	ZZ,0
  1132	031127	336 00 0 00 000040 		SKIPN	40
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 5-1
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0035

  1133						STOP^
  1134	031130	254 04 0 00 031131 		HALT	.+1
  1135	031131	320 00 0 00 031132 		JUMP	.+1
  1136									^
  1137			001000			ZZ=ZZ+ZZ
  1138
  1139						RETURN .+4		^
  1140	031132	200 02 0 00 036452 		MOVE	2,[JSP 2,.+4]
  1141	031133	202 02 0 00 000041 		MOVEM	2,41
  1142	031134	477 02 0 00 000040 		SETOB	2,40
  1143									^;TEST IRLT TO AR
  1144	031135	001000	000000			XWD	ZZ,0
  1145	031136	336 00 0 00 000040 		SKIPN	40
  1146						STOP^
  1147	031137	254 04 0 00 031140 		HALT	.+1
  1148	031140	320 00 0 00 031141 		JUMP	.+1
  1149									^
  1150			002000			ZZ=ZZ+ZZ
  1151
  1152						RETURN .+4		^
  1153	031141	200 02 0 00 036453 		MOVE	2,[JSP 2,.+4]
  1154	031142	202 02 0 00 000041 		MOVEM	2,41
  1155	031143	477 02 0 00 000040 		SETOB	2,40
  1156									^;TEST IRLT TO AR
  1157	031144	002000	000000			XWD	ZZ,0
  1158	031145	336 00 0 00 000040 		SKIPN	40
  1159						STOP^
  1160	031146	254 04 0 00 031147 		HALT	.+1
  1161	031147	320 00 0 00 031150 		JUMP	.+1
  1162									^
  1163			004000			ZZ=ZZ+ZZ
  1164
  1165						RETURN .+4		^
  1166	031150	200 02 0 00 036454 		MOVE	2,[JSP 2,.+4]
  1167	031151	202 02 0 00 000041 		MOVEM	2,41
  1168	031152	477 02 0 00 000040 		SETOB	2,40
  1169									^;TEST IRLT TO AR
  1170	031153	004000	000000			XWD	ZZ,0
  1171	031154	336 00 0 00 000040 		SKIPN	40
  1172						STOP^
  1173	031155	254 04 0 00 031156 		HALT	.+1
  1174	031156	320 00 0 00 031157 		JUMP	.+1
  1175									^
  1176			010000			ZZ=ZZ+ZZ
  1177
  1178						RETURN .+4		^
  1179	031157	200 02 0 00 036455 		MOVE	2,[JSP 2,.+4]
  1180	031160	202 02 0 00 000041 		MOVEM	2,41
  1181	031161	477 02 0 00 000040 		SETOB	2,40
  1182									^;TEST IRLT TO AR
  1183	031162	010000	000000			XWD	ZZ,0
  1184	031163	336 00 0 00 000040 		SKIPN	40
  1185						STOP^
  1186	031164	254 04 0 00 031165 		HALT	.+1
  1187	031165	320 00 0 00 031166 		JUMP	.+1
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 5-2
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0036

  1188									^
  1189			020000			ZZ=ZZ+ZZ
  1190
  1191						RETURN .+4		^
  1192	031166	200 02 0 00 036456 		MOVE	2,[JSP 2,.+4]
  1193	031167	202 02 0 00 000041 		MOVEM	2,41
  1194	031170	477 02 0 00 000040 		SETOB	2,40
  1195									^;TEST IRLT TO AR
  1196	031171	020000	000000			XWD	ZZ,0
  1197	031172	336 00 0 00 000040 		SKIPN	40
  1198						STOP^
  1199	031173	254 04 0 00 031174 		HALT	.+1
  1200	031174	320 00 0 00 031175 		JUMP	.+1
  1201									^
  1202			040000			ZZ=ZZ+ZZ
  1203
  1204						RETURN .+4		^
  1205	031175	200 02 0 00 036457 		MOVE	2,[JSP 2,.+4]
  1206	031176	202 02 0 00 000041 		MOVEM	2,41
  1207	031177	477 02 0 00 000040 		SETOB	2,40
  1208									^;TEST IRLT TO AR
  1209	031200	040000	000000			XWD	ZZ,0
  1210	031201	336 00 0 00 000040 		SKIPN	40
  1211						STOP^
  1212	031202	254 04 0 00 031203 		HALT	.+1
  1213	031203	320 00 0 00 031204 		JUMP	.+1
  1214									^
  1215			100000			ZZ=ZZ+ZZ
  1216
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 6
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0037

  1217	031204				MOD19:	RETURN	MOD19A		^;TEST PROPER STORAGE
  1218
  1219	031204	200 02 0 00 036460 		MOVE	2,[JSP 2,MOD19A]
  1220	031205	202 02 0 00 000041 		MOVEM	2,41
  1221	031206	477 02 0 00 000040 		SETOB	2,40
  1222
  1223	031207	000000	000000			0			;OF UU0
  1224	031210	332 00 0 00 000040 	MOD19A:	SKIPE	40
  1225						STOP^
  1226	031211	254 04 0 00 031212 		HALT	.+1
  1227	031212	320 00 0 00 031213 		JUMP	.+1
  1228									^
  1229
  1230	031213				MOD20:	RETURN	MOD20A		^;CK FOR STORING OF E
  1231
  1232	031213	200 02 0 00 036461 		MOVE	2,[JSP 2,MOD20A]
  1233	031214	202 02 0 00 000041 		MOVEM	2,41
  1234	031215	477 02 0 00 000040 		SETOB	2,40
  1235
  1236	031216	000000	777777			XWD	0,-1		;ON A UU0
  1237	031217	200 00 0 00 000040 	MOD20A:	MOVE	40
  1238	031220	302 00 0 00 777777 		CAIE	-1
  1239						STOP^
  1240	031221	254 04 0 00 031222 		HALT	.+1
  1241	031222	320 00 0 00 031223 		JUMP	.+1
  1242									^
  1243
  1244	031223				MOD21:	RETURN	MOD21A		^;CK FOR STORING OF E
  1245
  1246	031223	200 02 0 00 036462 		MOVE	2,[JSP 2,MOD21A]
  1247	031224	202 02 0 00 000041 		MOVEM	2,41
  1248	031225	477 02 0 00 000040 		SETOB	2,40
  1249
  1250	031226	077740	000000			XWD	077740,0	;ON A UU0
  1251	031227	200 00 0 00 000040 	MOD21A:	MOVE	40
  1252	031230	312 00 0 00 036463 		CAME	[XWD 077740,0]
  1253						STOP^
  1254	031231	254 04 0 00 031232 		HALT	.+1
  1255	031232	320 00 0 00 031233 		JUMP	.+1
  1256									^
  1257
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 7
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0038

  1258	031233				MOD22:	RETURN	MOD22A		^;CK FOR STORING OF
  1259
  1260	031233	200 02 0 00 036464 		MOVE	2,[JSP 2,MOD22A]
  1261	031234	202 02 0 00 000041 		MOVEM	2,41
  1262	031235	477 02 0 00 000040 		SETOB	2,40
  1263
  1264	031236	077740	777777			XWD	077740,-1	;E AND IR ON UU0
  1265	031237	200 00 0 00 000040 	MOD22A:	MOVE	40
  1266	031240	312 00 0 00 036465 		CAME	[XWD 077740,-1]
  1267						STOP^
  1268	031241	254 04 0 00 031242 		HALT	.+1
  1269	031242	320 00 0 00 031243 		JUMP	.+1
  1270									^
  1271
  1272	031243				MOD23:	RETURN	MOD23A		^;UU0 TEST THE PC+1
  1273
  1274	031243	200 02 0 00 036466 		MOVE	2,[JSP 2,MOD23A]
  1275	031244	202 02 0 00 000041 		MOVEM	2,41
  1276	031245	477 02 0 00 000040 		SETOB	2,40
  1277
  1278	031246	000000	000000			0			;INHIBIT FEATURE LOC 41
  1279	031247	405 02 0 00 777777 	MOD23A:	ANDI	2,-1		;CONTAINS TSP 2,X
  1280	031250	306 02 0 00 031250 		CAIN	2,.		;PC+1 INH THE IR UU0 INPUT
  1281						STOP			^;FAILED. SEE PC1 PRINT
  1282
  1283	031251	254 04 0 00 031252 		HALT	.+1
  1284	031252	320 00 0 00 031253 		JUMP	.+1
  1285
  1286
  1287	031253				MOD24:	RETURN	MOD24A		^;PC STORED IN CORRECTLY
  1288
  1289	031253	200 02 0 00 036467 		MOVE	2,[JSP 2,MOD24A]
  1290	031254	202 02 0 00 000041 		MOVEM	2,41
  1291	031255	477 02 0 00 000040 		SETOB	2,40
  1292
  1293	031256	000000	777777			XWD	0,-1		;FROM THE JSP AT 41
  1294	031257	405 02 0 00 777777 	MOD24A:	ANDI 2,-1		;ON A UUO INST
  1295	031260	302 02 0 00 031257 		CAIE	2,.-1
  1296						STOP^
  1297	031261	254 04 0 00 031262 		HALT	.+1
  1298	031262	320 00 0 00 031263 		JUMP	.+1
  1299									^
  1300
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 8
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0039

  1301	031263				MOD25:	;SET PRIVILEGE TO FLAG
  1302						;SET UU0 TRAP
  1303						;TEST IOT INST FOR
  1304						;NOT TRAPING. SEE IR-2
  1305						;PRINT IR UU0 CAME UP
  1306	031263				MOD26:	;CK AND OF IR IOTA, NOT ALLOW, ETC
  1307
  1308	031263				MOD27:	SFLAG	0		^;MAKE SURE EX IOT USER=0
  1309
  1310	031263	205 01 0 00 000000 		MOVSI	1,0
  1311	031264	255 17 0 00 031265 		JFCL	17,.+1
  1312	031265	254 02 0 01 031266 		JRST	2,.+1(1)
  1313
  1314						RETURN	MOD28		^;CK FOR NOT TRAP ON IOT
  1315
  1316	031266	200 02 0 00 036470 		MOVE	2,[JSP 2,MOD28]
  1317	031267	202 02 0 00 000041 		MOVEM	2,41
  1318	031270	477 02 0 00 000040 		SETOB	2,40
  1319
  1320	031271	7 000 24 0 00 000000 		CONI			;IF IOTS TRAP NOW THE
  1321	031272	300 00 0 00 000000 		CAI			;AND GATE EX USER (0), EX IOT USER
  1322	031273	334 00 0 00 000000 		SKIPA			;DID NOT RESPOND TO EX USER (0)
  1323	031274				MOD28:	STOP			^;SEE EX ALLOW IOTS ON EX PRINT
  1324
  1325	031274	254 04 0 00 031275 		HALT	.+1
  1326	031275	320 00 0 00 031276 		JUMP	.+1
  1327
  1328
  1329	031276	474 01 0 00 000000 	MOD29:	SETO	1,		;THE IOTS FAIL TO STORE C(E)
  1330	031277	7 000 04 0 00 000001 		DATAI	1		;CHECK IR IOT ON IR2 PRINT
  1331	031300	7 000 24 0 00 000001 		CONI	1		;LOOKS LIKE IR DECODE FAILED
  1332	031301	316 01 0 00 036441 		CAMN	1,[-1]
  1333						STOP^
  1334	031302	254 04 0 00 031303 		HALT	.+1
  1335	031303	320 00 0 00 031304 		JUMP	.+1
  1336									^
  1337
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 9
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0040

  1338	031304	200 01 0 00 036471 	MOD30:	MOVE	1,[123456654321]	;CHECK SCE FOR DATAI
  1339	031305	7 000 04 0 00 000001 		DATAI	1		;THE CONTENTS OF LOC1
  1340	031306	316 01 0 00 036471 		CAMN	1,[123456654321]	;WERE NOT MODIFIED. SEE
  1341						STOP			^;S1 PRINT SCE AND DECODE ON IOT
  1342
  1343	031307	254 04 0 00 031310 		HALT	.+1
  1344	031310	320 00 0 00 031311 		JUMP	.+1
  1345
  1346
  1347	031311	200 01 0 00 036471 	MOD31:	MOVE	1,[123456654321]	;CHECK SCE FOR CONI.  THE
  1348	031312	7 000 24 0 00 000001 		CONI	1		;CONTENTS OF LOC1 WERE NOT
  1349	031313	316 01 0 00 036471 		CAMN	1,[123456654321]	;MODIFIED.  SEE S2 PRINT SCE
  1350						STOP			^;AND DECODE ON IOT PRINT
  1351
  1352	031314	254 04 0 00 031315 		HALT	.+1
  1353	031315	320 00 0 00 031316 		JUMP	.+1
  1354
  1355
  1356	031316	474 00 0 00 000000 	MOD32:	SETO			;SACINH FAIL FOR INST
  1357	031317	7 000 24 0 00 000001 		CONI	1		;CONI FAILED. CHECK
  1358	031320	312 00 0 00 036441 		CAME	[-1]		;IR IOT INPUT TO SACINH
  1359						STOP			^;ON THE S2 PRINT
  1360
  1361	031321	254 04 0 00 031322 		HALT	.+1
  1362	031322	320 00 0 00 031323 		JUMP	.+1
  1363
  1364
  1365	031323	7 774 20 0 00 000000 	MOD33:	CONO	ME,0		;CLEAR LAST DEVICE
  1366	031324	7 774 24 0 00 000002 		CONI	ME,2		;AR CLEAR AT(ET0)FAILED
  1367	031325	306 02 0 00 000002 		CAIN	2,2		;ON INST CONT CK AR
  1368						STOP			^;CLEAR ETO, CONI ON ARC-2 PRINT
  1369
  1370	031326	254 04 0 00 031327 		HALT	.+1
  1371	031327	320 00 0 00 031330 		JUMP	.+1
  1372
  1373
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 10
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0041

  1374	031330	7 774 14 0 00 036425 	MOD34:	DATAO	ME,[0]		;AR CLR ON A DATAI
  1375	031331	7 774 04 0 00 000003 		DATAI	ME,3		;INST FAILED CHECK
  1376	031332	306 03 0 00 000003 		CAIN	3,3		;IOT DATAI INPUT ON THE
  1377						STOP			^;OR GATE TO AR CLR. SEE ARC-2 PRINT
  1378
  1379	031333	254 04 0 00 031334 		HALT	.+1
  1380	031334	320 00 0 00 031335 		JUMP	.+1
  1381
  1382
  1383	031335	400 00 0 00 000000 		SETZ			;CONSZ FAIL TO SKIP. CK
  1384	031336	7 000 30 0 00 000000 		CONSZ			;PC+1 AT AND OF AD=0, IOT CONSZ,
  1385						STOP			^;IOT T5 ON PC1 PRINT
  1386
  1387	031337	254 04 0 00 031340 		HALT	.+1
  1388	031340	320 00 0 00 031341 		JUMP	.+1
  1389
  1390
  1391	031341	7 774 20 0 00 000000 		CONO	ME,0		;CONSZ FAIL TO SKIP CK
  1392	031342	7 774 30 0 00 700000 		CONSZ	ME,700000		;FOR NO AR CLR AT (ETO). SEE ARC-2
  1393						STOP			^;PRINT THE IOT CONSX INPUT
  1394
  1395	031343	254 04 0 00 031344 		HALT	.+1
  1396	031344	320 00 0 00 031345 		JUMP	.+1
  1397
  1398
  1399	031345	7 774 20 0 00 000000 		CONO	ME,0		;CONSO SKIPED.  CHECK PC+1
  1400	031346	7 774 34 0 00 000000 		CONSO	ME,0		;(IOT T5,AD=0,IOT CONSO,IOT CONSZ
  1401	031347	334 00 0 00 000000 		SKIPA			;AND GATES) ON PC1 PRINT
  1402						STOP^
  1403	031350	254 04 0 00 031351 		HALT	.+1
  1404	031351	320 00 0 00 031352 		JUMP	.+1
  1405									^
  1406
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 11
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0042

  1407	031352	400 01 0 00 000000 	MOD35:	SETZ	1,		;CHECK POINTER INC ON IOT BLK
  1408	031353	7 774 10 0 00 000001 		BLKO	ME,1		;IF C(1)=0 THEN AR FM AD(J) (ET0)
  1409	031354	300 00 0 00 000000 		CAI			;ON ARC-3 PRINT, OR AD+1 BOTH (FT9)
  1410	031355	300 00 0 00 000000 		CAI			;ON AD2 PRINT FAILED
  1411	031356	312 01 0 00 036415 		CAME	1,[XWD 1,1]	;IF IR 12 FAIL TO SET, PROG
  1412						STOP			^;BLOWS UP
  1413
  1414	031357	254 04 0 00 031360 		HALT	.+1
  1415	031360	320 00 0 00 031361 		JUMP	.+1
  1416
  1417	031361	400 01 0 00 000000 	MOD36:	SETZ	1,		;PC+1 INH FOR BLK FAILED
  1418	031362	7 774 10 0 00 000001 		BLKO	ME,1		;CHECK IOT BLK INPUT TO
  1419	031363	300 00 0 00 000000 		CAI			;PC+1 INH ON THE PC1 PRINT
  1420	031364	334 00 0 00 000000 		SKIPA
  1421						STOP^
  1422	031365	254 04 0 00 031366 		HALT	.+1
  1423	031366	320 00 0 00 031367 		JUMP	.+1
  1424									^
  1425	031367	400 01 0 00 000000 	MOD37:	SETZ	1,		;BLKO PC+1 AT ET0 TIME
  1426	031370	7 774 10 0 00 000001 		BLKO	ME,1		;FAILED. CHECK THE AND GATE
  1427						STOP			^;BLK, CYC(0) CRY(0) ON PC1 PRINT
  1428
  1429	031371	254 04 0 00 031372 		HALT	.+1
  1430	031372	320 00 0 00 031373 		JUMP	.+1
  1431
  1432	031373	474 01 0 00 000000 	MOD38:	SETO	1,		;BLKO PERFORMED A SKIP WHEN
  1433	031374	7 774 10 0 00 000001 		BLKO	ME,1		;END CRY0 SHOULD=1
  1434	031375	334 00 0 00 000000 		SKIPA			;CK PC+1,SEE ABOVE ROUTINE
  1435						STOP^
  1436	031376	254 04 0 00 031377 		HALT	.+1
  1437	031377	320 00 0 00 031400 		JUMP	.+1
  1438									^
  1439	031400	7 004 20 0 00 010000 	MOD39:	CONO PI,10000		;JUST IN CASE
  1440	031401	7 000 20 0 00 435447 		CONO	435447		;SET SOME CPA FLAGS
  1441	031402	7 000 24 0 00 000000 		CONI	0		;(1) DID FLAGS SET? NO CONO FAIL
  1442	031403	336 00 0 00 000000 		SKIPN	0		;YES: CONI FAIL CK IOB TO AR
  1443						STOP			^;AND MANY OTHERS.  IE SINGLE STEP
  1444
  1445	031404	254 04 0 00 031405 		HALT	.+1
  1446	031405	320 00 0 00 031406 		JUMP	.+1
  1447
  1448	031406	7 000 20 0 00 000000 	MOD40:	CONO			;PIA 35 FAIL TO SET (CPU)
  1449	031407	7 000 20 0 00 000001 		CONO	1		;OR READ SINGLE STEP
  1450	031410	7 000 24 0 00 000000 		CONI			;SEE CPA PRINT
  1451	031411	606 00 0 00 000001 		TRNN	1
  1452						STOP^
  1453	031412	254 04 0 00 031413 		HALT	.+1
  1454	031413	320 00 0 00 031414 		JUMP	.+1
  1455									^
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 12
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0043

  1456
  1457	031414	7 000 20 0 00 000000 	MOD41:	CONO			;PIA 3+(CFU) FAIL TO SET
  1458	031415	7 000 20 0 00 000002 		CONO	2		;OR READ.  SEE CPA PRINT
  1459	031416	7 000 24 0 00 000000 		CONI			;SINGLE STEP
  1460	031417	606 00 0 00 000002 		TRNN	2
  1461						STOP^
  1462	031420	254 04 0 00 031421 		HALT	.+1
  1463	031421	320 00 0 00 031422 		JUMP	.+1
  1464									^
  1465
  1466	031422	7 000 20 0 00 000000 	MOD42:	CONO			;PIA 33 (CPU) FAIL TO SET
  1467	031423	7 000 20 0 00 000004 		CONO	4		;OR READ.  SEE CPA PRINT
  1468	031424	7 000 24 0 00 000000 		CONI			;SINGLE STEP
  1469	031425	606 00 0 00 000004 		TRNN	4
  1470						STOP^
  1471	031426	254 04 0 00 031427 		HALT	.+1
  1472	031427	320 00 0 00 031430 		JUMP	.+1
  1473									^
  1474
  1475	031430	7 000 20 0 00 000001 	MOD43:	CONO	1		;PIA 35 (CPU) FAIL TO CLEAR
  1476	031431	7 000 20 0 00 000000 		CONO			;OR READ INCORRECT
  1477	031432	7 000 24 0 00 000000 		CONI			;SEE CPA PRINT
  1478	031433	602 00 0 00 000001 		TRNE	1		;SINGLE STEP
  1479						STOP^
  1480	031434	254 04 0 00 031435 		HALT	.+1
  1481	031435	320 00 0 00 031436 		JUMP	.+1
  1482									^
  1483
  1484	031436	7 000 20 0 00 000002 	MOD44:	CONO	2		;PIA 34 (CPU) FAIL TO CLEAR
  1485	031437	7 000 20 0 00 000000 		CONO			;OR READ INCORRECTLY
  1486	031440	7 000 24 0 00 000000 		CONI			;SEE CPA PRINT
  1487	031441	602 00 0 00 000002 		TRNE	2		;SINGLE STEP
  1488						STOP^
  1489	031442	254 04 0 00 031443 		HALT	.+1
  1490	031443	320 00 0 00 031444 		JUMP	.+1
  1491									^
  1492
  1493	031444	7 000 20 0 00 000004 	MOD45:	CONO	4		;PIA 33 (CPU) FAIL TO CLEAR
  1494	031445	7 000 20 0 00 000000 		CONO			;OR READ INCORRECTLY
  1495	031446	7 000 24 0 00 000000 		CONI			;SEE CPA PRINT
  1496	031447	602 00 0 00 000004 		TRNE	4		;SINGLE STEP
  1497						STOP^
  1498	031450	254 04 0 00 031451 		HALT	.+1
  1499	031451	320 00 0 00 031452 		JUMP	.+1
  1500									^
  1501
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 13
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0044

  1502	031452	7 000 20 0 00 000007 	MOD46:	CONO	7		;SET SOME CP FLAGS
  1503	031453	7 000 34 0 00 000000 		CONSO			;CONSO FAILED  CK
  1504	031454	334 00 0 00 000000 		SKIPA
  1505						STOP^
  1506	031455	254 04 0 00 031456 		HALT	.+1
  1507	031456	320 00 0 00 031457 		JUMP	.+1
  1508									^
  1509	031457	7 000 20 0 00 000007 	MOD47:	CONO	7		;CONSO FAILED
  1510	031460	7 000 34 0 00 000007 		CONSO	7
  1511						STOP^
  1512	031461	254 04 0 00 031462 		HALT	.+1
  1513	031462	320 00 0 00 031463 		JUMP	.+1
  1514									^
  1515	031463	7 000 20 0 00 000007 	MOD48:	CONO	7		;CONSZ FAIL
  1516	031464	7 000 30 0 00 000007 		CONSZ	7		;CHECK PC+1 AT AND
  1517	031465	334 00 0 00 000000 		SKIPA			;OF AD=0, CONSZ, IOT T5
  1518						STOP			^;ON PC1 PRINT
  1519
  1520	031466	254 04 0 00 031467 		HALT	.+1
  1521	031467	320 00 0 00 031470 		JUMP	.+1
  1522
  1523	031470	7 000 20 0 00 000040 	MOD50:	CONO	40		;CPU AROV ENABLE
  1524	031471	7 000 20 0 00 000020 		CONO	20		;TRY TO SET
  1525	031472	7 000 34 0 00 000020 		CONSO	20
  1526						STOP			^;IOB OR FLOP
  1527
  1528	031473	254 04 0 00 031474 		HALT	.+1
  1529	031474	320 00 0 00 031475 		JUMP	.+1
  1530
  1531	031475	7 000 20 0 00 000020 		CONO	20		;SET AROV EN
  1532	031476	7 000 20 0 00 000000 		CONO			;CK FOR NOT CLEARING
  1533	031477	7 000 34 0 00 000020 		CONSO	20
  1534						STOP^
  1535	031500	254 04 0 00 031501 		HALT	.+1
  1536	031501	320 00 0 00 031502 		JUMP	.+1
  1537									^
  1538	031502	7 000 20 0 00 000020 		CONO	20		;SET AROV EN
  1539	031503	7 000 20 0 00 000040 		CONO	40		;TRY TO CLEAR
  1540	031504	7 000 30 0 00 000020 		CONSZ	20
  1541						STOP^
  1542	031505	254 04 0 00 031506 		HALT	.+1
  1543	031506	320 00 0 00 031507 		JUMP	.+1
  1544									^
  1545	031507	7 000 20 0 00 000040 		CONO	40		;CLEAR AROV EN
  1546	031510	7 000 20 0 00 000000 		CONO			;CK FOR NOT SETTING
  1547	031511	7 000 30 0 00 000020 		CONSZ	20
  1548						STOP^
  1549	031512	254 04 0 00 031513 		HALT	.+1
  1550	031513	320 00 0 00 031514 		JUMP	.+1
  1551									^
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 14
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0045

  1552	031514	7 000 20 0 00 000400 	MOD51:	CONO	400		;FOV EN CLEAR
  1553	031515	7 000 20 0 00 000200 		CONO	200		;TRY TO SET
  1554	031516	7 000 34 0 00 000200 		CONSO	200
  1555						STOP^
  1556	031517	254 04 0 00 031520 		HALT	.+1
  1557	031520	320 00 0 00 031521 		JUMP	.+1
  1558									^
  1559
  1560	031521	7 000 20 0 00 000200 		CONO	200		;SET FOV EN
  1561	031522	7 000 20 0 00 000000 		CONO			;CK FOR NOT CLEARING
  1562	031523	7 000 34 0 00 000200 		CONSO	200
  1563						STOP^
  1564	031524	254 04 0 00 031525 		HALT	.+1
  1565	031525	320 00 0 00 031526 		JUMP	.+1
  1566									^
  1567
  1568	031526	7 000 20 0 00 000200 		CONO	200		;SET FOV EN
  1569	031527	7 000 20 0 00 000400 		CONO	400		;TRY TO CLEAR
  1570	031530	7 000 30 0 00 000200 		CONSZ	200
  1571						STOP^
  1572	031531	254 04 0 00 031532 		HALT	.+1
  1573	031532	320 00 0 00 031533 		JUMP	.+1
  1574									^
  1575
  1576	031533	7 000 20 0 00 000400 		CONO	400		;CLEAR FOV EN
  1577	031534	7 000 20 0 00 000000 		CONO			;CK FOR NOT SETTING
  1578	031535	7 000 30 0 00 000200 		CONSZ	200
  1579						STOP^
  1580	031536	254 04 0 00 031537 		HALT	.+1
  1581	031537	320 00 0 00 031540 		JUMP	.+1
  1582									^
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 15
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0046

  1583
  1584	031540	7 000 20 0 00 004000 	MOD52:	CONO	4000		;CLEAR CLK EN
  1585	031541	7 000 20 0 00 002000 		CONO	2000		;TRY TO SET
  1586	031542	7 000 34 0 00 002000 		CONSO	2000
  1587						STOP^
  1588	031543	254 04 0 00 031544 		HALT	.+1
  1589	031544	320 00 0 00 031545 		JUMP	.+1
  1590									^
  1591
  1592	031545	7 000 20 0 00 002000 		CONO	2000		;SET CLK EN
  1593	031546	7 000 20 0 00 000000 		CONO			;CK FOR NOT CLEARING
  1594	031547	7 000 34 0 00 002000 		CONSO	2000
  1595						STOP^
  1596	031550	254 04 0 00 031551 		HALT	.+1
  1597	031551	320 00 0 00 031552 		JUMP	.+1
  1598									^
  1599
  1600	031552	7 000 20 0 00 002000 		CONO	2000		;SET CLK EN
  1601	031553	7 000 20 0 00 004000 		CONO	4000		;TRY TO CLEAR
  1602	031554	7 000 30 0 00 002000 		CONSZ	2000
  1603						STOP^
  1604	031555	254 04 0 00 031556 		HALT	.+1
  1605	031556	320 00 0 00 031557 		JUMP	.+1
  1606									^
  1607
  1608	031557	7 000 20 0 00 004000 		CONO	4000		;CLEAR CLK EN
  1609	031560	7 000 20 0 00 000000 		CONO			;TEST FOR NOT SETTING
  1610	031561	7 000 30 0 00 002000 		CONSZ	2000
  1611						STOP^
  1612	031562	254 04 0 00 031563 		HALT	.+1
  1613	031563	320 00 0 00 031564 		JUMP	.+1
  1614									^
  1615
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 16
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0047

  1616	031564	310 00 0 00 777777 	MOD53:	CAM	-1		;SET NON-EX VIA F(CE)
  1617	031565	7 000 20 0 00 010000 		CONO	10000		;TRY TO CLEAR
  1618	031566	7 000 30 0 00 010000 		CONSZ	10000
  1619						STOP			^;FAIL TO CLEAR
  1620
  1621	031567	254 04 0 00 031570 		HALT	.+1
  1622	031570	320 00 0 00 031571 		JUMP	.+1
  1623
  1624
  1625	031571	7 000 20 0 00 010000 		CONO	10000		;CLEAR NON-EX
  1626	031572	310 00 0 00 777777 		CAM	-1		;TRY TO SET VIA F(CE)
  1627	031573	7 000 34 0 00 010000 		CONSO	10000		;FAIL TO SET
  1628						STOP			^;CK MEM CNTL, CPA
  1629
  1630	031574	254 04 0 00 031575 		HALT	.+1
  1631	031575	320 00 0 00 031576 		JUMP	.+1
  1632
  1633
  1634	031576	7 000 20 0 00 010000 		CONO	10000		;CLEAR NON-EX
  1635	031577	202 00 0 00 777777 		MOVEM	-1		;TRY TO SET VIA S(CE)
  1636	031600	7 000 34 0 00 010000 		CONSO	10000		;FAIL TO SET
  1637						STOP^
  1638	031601	254 04 0 00 031602 		HALT	.+1
  1639	031602	320 00 0 00 031603 		JUMP	.+1
  1640									^
  1641
  1642	031603	7 000 20 0 00 010000 		CONO	10000		;CLEAR NON-EX
  1643	031604	272 00 0 00 777777 		ADDM	-1		;TRY TO SET VIA PSE
  1644	031605	7 000 34 0 00 010000 		CONSO	10000		;FAIL TO SET
  1645						STOP^
  1646	031606	254 04 0 00 031607 		HALT	.+1
  1647	031607	320 00 0 00 031610 		JUMP	.+1
  1648									^
  1649
  1650	031610	310 00 0 00 777777 		CAM	-1		;SET NON EX
  1651	031611	7 000 20 0 00 000000 		CONO			;TEST FOR NOT CLEARING
  1652	031612	7 000 34 0 00 010000 		CONSO	10000		;ON CONO 0
  1653						STOP^
  1654	031613	254 04 0 00 031614 		HALT	.+1
  1655	031614	320 00 0 00 031615 		JUMP	.+1
  1656									^
  1657	031615	7 000 20 0 00 010000 		CONO	10000
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 17
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0048

  1658
  1659	031616	7 000 20 0 00 400000 	MOD54:	CONO	400000		;CLEAR PDL OV
  1660	031617	474 00 0 00 000000 		SETO			;TRY TO SET
  1661	031620	261 00 0 00 000000 		PUSH			;VIA PUSH
  1662	031621	7 000 34 0 00 200000 		CONSO 200000		;TEST FOR SET
  1663						STOP			^;CPA PRINT
  1664
  1665	031622	254 04 0 00 031623 		HALT	.+1
  1666	031623	320 00 0 00 031624 		JUMP	.+1
  1667
  1668
  1669	031624	474 00 0 00 000000 		SETO
  1670	031625	261 00 0 00 000000 		PUSH			;SET PDL OV
  1671	031626	7 000 20 0 00 400000 		CONO 400000		;TRY TO CLEAR .CK
  1672	031627	7 000 30 0 00 200000 		CONSZ 200000		;CPA PDL OV SET (ET0) POP GATE
  1673						STOP			^;FLOP/IOB CPA PRINT
  1674
  1675	031630	254 04 0 00 031631 		HALT	.+1
  1676	031631	320 00 0 00 031632 		JUMP	.+1
  1677
  1678
  1679	031632	474 00 0 00 000000 		SETO
  1680	031633	261 00 0 00 000000 		PUSH			;SET PDL OV
  1681	031634	7 000 20 0 00 000000 		CONO			;CK FOR NOT CLEARING
  1682	031635	7 000 34 0 00 200000 		CONSO 200000
  1683						STOP^
  1684	031636	254 04 0 00 031637 		HALT	.+1
  1685	031637	320 00 0 00 031640 		JUMP	.+1
  1686									^
  1687
  1688	031640	7 000 20 0 00 400000 		CONO	400000		;TEST FOR NOT
  1689	031641	474 00 0 00 000000 		SETO			;SETTING PDL-OV
  1690	031642	350 00 0 00 000000 		AOS			;CPA PDL OV SET FAIL
  1691	031643	7 000 30 0 00 200000 		CONSZ 200000		;IR PUSH CRY(0) (1) AT ET0
  1692						STOP			^;AND GATE.  THE PUSH INPUT
  1693
  1694	031644	254 04 0 00 031645 		HALT	.+1
  1695	031645	320 00 0 00 031646 		JUMP	.+1
  1696
  1697
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 18
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0049

  1698	031646	7 000 20 0 00 400000 	MOD55:	CONO	400000		;CK PDL FLAG
  1699	031647	400 00 0 00 000000 		SETZ			;CPA PDL OV SET
  1700	031650	261 00 0 00 000000 		PUSH			;CK AND GATE OK
  1701	031651	7 000 30 0 00 200000 		CONSZ 200000		;ET0 IR PUSH,ADCRY0 (1)
  1702						STOP			^;THE CRY FLAG SHOULD PREVENT
  1703
  1704	031652	254 04 0 00 031653 		HALT	.+1
  1705	031653	320 00 0 00 031654 		JUMP	.+1
  1706
  1707
  1708	031654	7 000 20 0 00 400000 		CONO	400000		;TRY TO SET PDL-OV
  1709	031655	474 00 0 00 000000 		SETO			;VIA PUSHJ
  1710	031656	260 00 0 00 031657 		PUSHJ	.+1		;THE AND GATE OF
  1711	031657	7 000 34 0 00 200000 		CONSO 200000		;PUSH,PUSHJ TO FROM
  1712						STOP			^;CPA PDL OV SET FAILED. SEE CPA PRINT
  1713
  1714	031660	254 04 0 00 031661 		HALT	.+1
  1715	031661	320 00 0 00 031662 		JUMP	.+1
  1716
  1717
  1718	031662	7 000 20 0 00 400000 		CONO	400000		;TRY TO SET VIA POPS
  1719	031663	201 00 0 00 000001 		MOVEI	1		;CHECK AND GATE OF
  1720	031664	262 00 0 00 000000 		POP			;IR POPS, ET0, AD CRY 0(0)
  1721	031665	7 000 34 0 00 200000 		CONSO 200000		;TO CPA PDL OV SET
  1722						STOP^
  1723	031666	254 04 0 00 031667 		HALT	.+1
  1724	031667	320 00 0 00 031670 		JUMP	.+1
  1725									^
  1726
  1727	031670	7 000 20 0 00 400000 		CONO	400000		;CHECK POPS FOR NOT
  1728	031671	200 00 0 00 036415 		MOVE	[XWD 1,1]		;SETTING PDL-OV
  1729	031672	262 00 0 00 000000 		POP			;AD CRY0(0) SHOULD PREVENT
  1730	031673	7 000 30 0 00 200000 		CONSZ 200000		;SEE ABOVE
  1731						STOP^
  1732	031674	254 04 0 00 031675 		HALT	.+1
  1733	031675	320 00 0 00 031676 		JUMP	.+1
  1734									^
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 19
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0050

  1735
  1736	031676	205 00 0 00 400000 	MOD56:	MOVSI	400000		;SET AROV FLAG
  1737	031677	270 00 0 00 036472 		ADD	[XWD 400000,0]	;CK IOB INPUT IOB1
  1738	031700	7 000 34 0 00 000010 		CONSO	10		;PRINT FOR MISSING
  1739						STOP			^;IOB BIT 32
  1740
  1741	031701	254 04 0 00 031702 		HALT	.+1
  1742	031702	320 00 0 00 031703 		JUMP	.+1
  1743
  1744
  1745	031703	255 17 0 00 031704 		JFCL	17,.+1		;CHECK AROV STATUS
  1746	031704	7 000 30 0 00 000010 		CONSZ	10		;BIT 32 ON IOB
  1747						STOP			^;SEE IOB1 PRINT
  1748
  1749	031705	254 04 0 00 031706 		HALT	.+1
  1750	031706	320 00 0 00 031707 		JUMP	.+1
  1751
  1752
  1753	031707	7 000 30 0 00 404440 		CONSZ	404440		;STATUS BITS NOT USED
  1754						STOP			^;SHOULD BE 0  IOB1 PRINT
  1755
  1756	031710	254 04 0 00 031711 		HALT	.+1
  1757	031711	320 00 0 00 031712 		JUMP	.+1
  1758
  1759
  1760	031712	7 000 20 0 00 200000 		CONO	200000		;CLEAR THE WORLD
  1761	031713	400 00 0 00 000000 		SETZ			;ON IOT THE
  1762	031714	7 000 00 0 00 000000 		BLKI			;AND GATE OF IOT BLKI
  1763	031715	300 00 0 00 000000 		CAI			;BLKO WHICH MAKES IOT BLK
  1764	031716	312 00 0 00 036415 		CAME	[XWD 1,1]		;FAILED LOOK AT THE
  1765						STOP			^;BLKI INPUT
  1766
  1767	031717	254 04 0 00 031720 		HALT	.+1
  1768	031720	320 00 0 00 031721 		JUMP	.+1
  1769
  1770
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 20
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0051

  1771	031721	205 00 0 00 400000 	MOD57:	MOVSI	400000		;SET AROV FLAG
  1772	031722	270 00 0 00 036472 		ADD	[XWD 400000,0]	;A CONO WITH OUT
  1773	031723	7 000 20 0 00 000000 		CONO			;BIT 32 CLEARED IT
  1774	031724	255 10 0 00 031726 		JFCL	10,.+2		;SEE ARF PRINT CPA CONO
  1775						STOP			^;AND BIT 32
  1776
  1777	031725	254 04 0 00 031726 		HALT	.+1
  1778	031726	320 00 0 00 031727 		JUMP	.+1
  1779
  1780
  1781	031727	205 00 0 00 400000 		MOVSI	400000		;SET AROV FLAG
  1782	031730	270 00 0 00 036472 		ADD	[XWD 400000,0]	;TRY TO CLEAR WITH
  1783	031731	7 000 20 0 00 000010 		CONO	10		;A CONO
  1784	031732	255 10 0 00 031734 		JFCL	10,.+2		;IT FAILED TO CLEAR
  1785	031733	334 00 0 00 000000 		SKIPA			;CHECK ARF PRINT
  1786						STOP			^;CPA CONO AND BIT 32
  1787
  1788	031734	254 04 0 00 031735 		HALT	.+1
  1789	031735	320 00 0 00 031736 		JUMP	.+1
  1790
  1791
  1792	031736	205 01 0 00 040000 		MOVSI	1,40000
  1793	031737	255 17 0 00 031740 		JFCL	17,.+1		;SET FOV FLAG
  1794	031740	254 02 0 01 031741 		JRST	2,.+1(1)		;VIA RESET FLAGS
  1795	031741	7 000 20 0 00 000000 		CONO			;CONO WITHOUT BIT29
  1796	031742	255 01 0 00 031744 		JFCL	1,.+2		;CLEARED IT.  SEE ARF PRINT
  1797						STOP			^;CPA CONO SET AND IOB 29
  1798
  1799	031743	254 04 0 00 031744 		HALT	.+1
  1800	031744	320 00 0 00 031745 		JUMP	.+1
  1801
  1802
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 21
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0052

  1803	031745	205 01 0 00 040000 	MOD58:	MOVSI	1,40000
  1804	031746	255 17 0 00 031747 		JFCL	17,.+1		;SET FOV FLAG
  1805	031747	254 02 0 01 031750 		JRST	2,.+1(1)		;VIA RESET FLAGS
  1806	031750	7 000 20 0 00 000100 		CONO	100		;CONO FAIL TO CLEAR FOV
  1807	031751	255 01 0 00 031753 		JFCL	1,.+2		;SEE ARF PRINT
  1808	031752	334 00 0 00 000000 		SKIPA			;CONO CPU AND IOB
  1809						STOP			^;BIT 29
  1810
  1811	031753	254 04 0 00 031754 		HALT	.+1
  1812	031754	320 00 0 00 031755 		JUMP	.+1
  1813
  1814
  1815	031755	255 01 0 00 031756 		JFCL	1,.+1		;AR FOV FLAG TO IOB
  1816	031756	7 000 30 0 00 000100 		CONSZ	100		;FAIL SEE IOB1 PRINT
  1817						STOP			^;AND CPA STATUS, AR FOV (1)
  1818
  1819	031757	254 04 0 00 031760 		HALT	.+1
  1820	031760	320 00 0 00 031761 		JUMP	.+1
  1821
  1822
  1823	031761	205 01 0 00 040000 		MOVSI	1,40000
  1824	031762	255 17 0 00 031763 		JFCL	17,.+1		;SET FOV VIA
  1825	031763	254 02 0 01 031764 		JRST	2,.+1(1)		;RESTOR FLAGS
  1826	031764	7 000 34 0 00 000100 		CONSO	100		;FOV TO IOB FAIL
  1827						STOP			^;SEE IOB1 PRINT
  1828
  1829	031765	254 04 0 00 031766 		HALT	.+1
  1830	031766	320 00 0 00 031767 		JUMP	.+1
  1831
  1832
  1833	031767	7 000 20 0 00 040000 		CONO	40000		;CPA ADDR BREAK
  1834	031770	7 000 30 0 00 040000 		CONSZ 40000		;STATUS FAIL
  1835						STOP			^;SEE CPA OR IOB1 PRINT
  1836
  1837	031771	254 04 0 00 031772 		HALT	.+1
  1838	031772	320 00 0 00 031773 		JUMP	.+1
  1839
  1840
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 22
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0053

  1841	031773	7 000 20 0 00 000007 	MOD59:	CONO	7		;A CONO TO P1 MODIFIED
  1842	031774	7 004 20 0 00 000000 		CONO	PI,0		;CPU AS A DEVICE.  BIO
  1843	031775	7 000 34 0 00 000007 		CONSO	7		;CPA SEL IS CONFUSED
  1844						STOP^
  1845	031776	254 04 0 00 031777 		HALT	.+1
  1846	031777	320 00 0 00 032000 		JUMP	.+1
  1847									^
  1848
  1849	032000	7 000 20 0 00 010000 		CONO	10000		;JUST CHECKING FOR
  1850	032001	310 00 0 00 032001 		CAM .			;NOT NONEX AGAIN
  1851	032002	7 000 30 0 00 010000 		CONSZ	10000
  1852						STOP^
  1853	032003	254 04 0 00 032004 		HALT	.+1
  1854	032004	320 00 0 00 032005 		JUMP	.+1
  1855									^
  1856
  1857	032005	7 004 20 0 00 200000 		CONO	PI,200000	;SEE IF PAR ERR
  1858	032006	7 004 30 0 00 200000 		CONSZ	PI,200000	;IS A ZERO
  1859						STOP^
  1860	032007	254 04 0 00 032010 		HALT	.+1
  1861	032010	320 00 0 00 032011 		JUMP	.+1
  1862									^
  1863
  1864	032011	7 004 20 0 00 400000 		CONO	PI,400000	;SEE IF POWER FAIL
  1865	032012	7 004 30 0 00 400000 		CONSZ	PI,400000	;IS A ZERO
  1866						STOP^
  1867	032013	254 04 0 00 032014 		HALT	.+1
  1868	032014	320 00 0 00 032015 		JUMP	.+1
  1869									^
  1870
  1871	032015	201 00 0 00 777777 		MOVEI	-1		;WAIT FOR CLOCK
  1872	032016	7 000 30 0 00 001000 		CONSZ	1000		;FLAG TO SET
  1873	032017	254 00 0 00 032022 		JRST	.+3
  1874	032020	367 00 0 00 032016 		SOJG	.-2
  1875						STOP			^;NO CLOCK FLAG
  1876
  1877	032021	254 04 0 00 032022 		HALT	.+1
  1878	032022	320 00 0 00 032023 		JUMP	.+1
  1879
  1880
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 23
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0054

  1881	032023	7 004 20 0 00 100000 	MOD60:	CONO	PI,100000	;CLEAR CPA PARITY ENB
  1882	032024	7 004 20 0 00 040000 		CONO PI,40000		;TRY TO SET IT
  1883	032025	7 004 34 0 00 100000 		CONSO	PI,100000	;ALSO PI AS DEVICE
  1884						STOP^
  1885	032026	254 04 0 00 032027 		HALT	.+1
  1886	032027	320 00 0 00 032030 		JUMP	.+1
  1887									^
  1888
  1889	032030	7 004 20 0 00 040000 		CONO	PI,40000	;SET CPA PAR ENB
  1890	032031	7 004 20 0 00 000000 		CONO	PI,		;CK FOR NOT CLEAR
  1891	032032	7 004 34 0 00 100000 		CONSO	PI,100000
  1892						STOP^
  1893	032033	254 04 0 00 032034 		HALT	.+1
  1894	032034	320 00 0 00 032035 		JUMP	.+1
  1895									^
  1896
  1897	032035	7 004 20 0 00 040000 		CONO	PI,40000	;SET CPA PAR ENB
  1898	032036	7 004 20 0 00 100000 		CONO	PI,100000	;TRY TO CLEAR
  1899	032037	7 004 30 0 00 100000 		CONSZ PI,100000
  1900						STOP^
  1901	032040	254 04 0 00 032041 		HALT	.+1
  1902	032041	320 00 0 00 032042 		JUMP	.+1
  1903									^
  1904
  1905	032042	7 004 20 0 00 100000 		CONO	PI,100000	;CLEAR CPA PAR ENB
  1906	032043	7 004 20 0 00 000000 		CONO	PI,		;CK FOR NOT SET
  1907
  1908	032044	7 004 30 0 00 100000 		CONSZ	PI,100000	;ON CONO
  1909						STOP^
  1910	032045	254 04 0 00 032046 		HALT	.+1
  1911	032046	320 00 0 00 032047 		JUMP	.+1
  1912									^
  1913
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 24
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0055

  1914	032047				MOD70:	CLEAN			^;SEE IOB1
  1915
  1916	032047	7 000 20 0 00 634440 		CONO	634440
  1917	032050	7 004 20 0 00 010000 		CONO	PI,10000
  1918
  1919	032051	7 004 24 0 00 000000 		CONI	PI,0		;READ PI STATUS
  1920	032052	602 00 0 00 077400 		TRNE	77400		;A PI HOLD FLOP FAIL TO
  1921						STOP			^;CLEAR OR IOB PI INPUT
  1922
  1923	032053	254 04 0 00 032054 		HALT	.+1
  1924	032054	320 00 0 00 032055 		JUMP	.+1
  1925
  1926	032055	200 01 0 00 036473 		MOVE	1,[MOVEI 40]	;STORE A MOVIT IN
  1927	032056	202 01 0 01 000000 		MOVEM	1,(1)		;LOCATIONS 40 TO 60
  1928	032057	312 01 0 00 036474 		CAME	1,[MOVEI 57]
  1929	032060	344 01 0 00 032056 		AOJA	1,.-2
  1930
  1931					DEFINE	BLURB<
  1932					;CORE LOCATIONS 40 TO 60 CONTAIN A "MOVEI, ADDRESS"
  1933					;THEREFORE IF A INTERRUPT OCCURES THE MOVEI WILL
  1934					;STORE IN LOCATION ZERO THE ADDRESS OF THE EXECUTED
  1935					;INSTRUCTION
  1936					>
  1937					DEFINE	PIO	(A)
  1938					<	CLEAN
  1939						CONO	PI,PIOSET+A	;PIO FAIL TO SET IF LIGHT OUT
  1940						CONSO	PI,A		;OTHERWISE FAIL TO READ
  1941						STOP			;STATUS SE P12-IOB1 PRINT
  1942
  1943						CLEAN			;CHECK PIO CLEAR
  1944						CONO	PI,PIOSET+A	;SET PIO
  1945						CONO	PI,PIOCLR+A	;TRY TO CLEAR
  1946						CONSZ	PI,A		;LIGHT=FAIL TO CLEAR PI2 PRINT
  1947						STOP			;NO LIGHT=STATUS FAIL IOB1 PRINT
  1948
  1949						CLEAN			;CHECK FOR PI RESET
  1950						CONO	PI,PIOSET+A	;ABILITY TO CLEAR PIO FLAG
  1951						CONO	PI,10000	;SEE PI2 PRINT, PI RESET
  1952						CONSZ	PI,A		;TO PIO FLAGS
  1953						STOP
  1954
  1955						CLEAN			;TEST PIO SET
  1956						CONO	PI,PIOSET	;SEE PI2 PRINT
  1957						CONSZ	PI,A		;IT SET FLOP WITHOUT
  1958						STOP			;A IOB BIT
  1959
  1960						CLEAN			;TEST PIO CLR
  1961						CONO	PI,PIOSET+A	;PERHAPS PI RESET OCCURED (NO IOB-23)
  1962						CONO	PI,PIOCLR	;THE FLOP CLEARED
  1963						CONSO	PI,A		;WITH OUT A IOB BIT
  1964						STOP			;SEE PI2 PRINT
  1965					>
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 25
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0056

  1966
  1967	032061				MOD71:	CLEAN			^;CHECK PIO SET
  1968
  1969	032061	7 000 20 0 00 634440 		CONO	634440
  1970	032062	7 004 20 0 00 010000 		CONO	PI,10000
  1971
  1972	032063	7 004 20 0 00 002177 		CONO	PI,PIOSET+177	;THE PI CHANNEL FLOPS
  1973	032064	7 004 34 0 00 000177 		CONSO	PI,177		;FAILED TO SET
  1974						STOP			^;CHECK PI1 PRINT
  1975
  1976	032065	254 04 0 00 032066 		HALT	.+1
  1977	032066	320 00 0 00 032067 		JUMP	.+1
  1978
  1979
  1980	032067				MOD72:	PIO 100^	CLEAN^
  1981	032067	7 000 20 0 00 634440 		CONO	634440
  1982	032070	7 004 20 0 00 010000 		CONO	PI,10000
  1983									^
  1984	032071	7 004 20 0 00 002100 		CONO	PI,PIOSET+100	;PIO FAIL TO SET IF LIGHT OUT
  1985	032072	7 004 34 0 00 000100 		CONSO	PI,100		;OTHERWISE FAIL TO READ
  1986						STOP			^
  1987	032073	254 04 0 00 032074 		HALT	.+1
  1988	032074	320 00 0 00 032075 		JUMP	.+1
  1989									^;STATUS SE P12-IOB1 PRINT
  1990
  1991						CLEAN			^
  1992	032075	7 000 20 0 00 634440 		CONO	634440
  1993	032076	7 004 20 0 00 010000 		CONO	PI,10000
  1994									^;CHECK PIO CLEAR
  1995	032077	7 004 20 0 00 002100 		CONO	PI,PIOSET+100	;SET PIO
  1996	032100	7 004 20 0 00 001100 		CONO	PI,PIOCLR+100	;TRY TO CLEAR
  1997	032101	7 004 30 0 00 000100 		CONSZ	PI,100		;LIGHT=FAIL TO CLEAR PI2 PRINT
  1998						STOP			^
  1999	032102	254 04 0 00 032103 		HALT	.+1
  2000	032103	320 00 0 00 032104 		JUMP	.+1
  2001									^;NO LIGHT=STATUS FAIL IOB1 PRINT
  2002
  2003						CLEAN			^
  2004	032104	7 000 20 0 00 634440 		CONO	634440
  2005	032105	7 004 20 0 00 010000 		CONO	PI,10000
  2006									^;CHECK FOR PI RESET
  2007	032106	7 004 20 0 00 002100 		CONO	PI,PIOSET+100	;ABILITY TO CLEAR PIO FLAG
  2008	032107	7 004 20 0 00 010000 		CONO	PI,10000	;SEE PI2 PRINT, PI RESET
  2009	032110	7 004 30 0 00 000100 		CONSZ	PI,100		;TO PIO FLAGS
  2010						STOP^
  2011	032111	254 04 0 00 032112 		HALT	.+1
  2012	032112	320 00 0 00 032113 		JUMP	.+1
  2013									^
  2014
  2015						CLEAN			^
  2016	032113	7 000 20 0 00 634440 		CONO	634440
  2017	032114	7 004 20 0 00 010000 		CONO	PI,10000
  2018									^;TEST PIO SET
  2019	032115	7 004 20 0 00 002000 		CONO	PI,PIOSET	;SEE PI2 PRINT
  2020	032116	7 004 30 0 00 000100 		CONSZ	PI,100		;IT SET FLOP WITHOUT
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 25-1
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0057

  2021						STOP			^
  2022	032117	254 04 0 00 032120 		HALT	.+1
  2023	032120	320 00 0 00 032121 		JUMP	.+1
  2024									^;100 IOB BIT
  2025
  2026						CLEAN			^
  2027	032121	7 000 20 0 00 634440 		CONO	634440
  2028	032122	7 004 20 0 00 010000 		CONO	PI,10000
  2029									^;TEST PIO CLR
  2030	032123	7 004 20 0 00 002100 		CONO	PI,PIOSET+100	;PERHAPS PI RESET OCCURED (NO IOB-23)
  2031	032124	7 004 20 0 00 001000 		CONO	PI,PIOCLR	;THE FLOP CLEARED
  2032	032125	7 004 34 0 00 000100 		CONSO	PI,100		;WITH OUT 100 IOB BIT
  2033						STOP			^
  2034	032126	254 04 0 00 032127 		HALT	.+1
  2035	032127	320 00 0 00 032130 		JUMP	.+1
  2036									^;SEE PI2 PRINT
  2037					^
  2038						PIO 40^	CLEAN^
  2039	032130	7 000 20 0 00 634440 		CONO	634440
  2040	032131	7 004 20 0 00 010000 		CONO	PI,10000
  2041									^
  2042	032132	7 004 20 0 00 002040 		CONO	PI,PIOSET+40	;PIO FAIL TO SET IF LIGHT OUT
  2043	032133	7 004 34 0 00 000040 		CONSO	PI,40		;OTHERWISE FAIL TO READ
  2044						STOP			^
  2045	032134	254 04 0 00 032135 		HALT	.+1
  2046	032135	320 00 0 00 032136 		JUMP	.+1
  2047									^;STATUS SE P12-IOB1 PRINT
  2048
  2049						CLEAN			^
  2050	032136	7 000 20 0 00 634440 		CONO	634440
  2051	032137	7 004 20 0 00 010000 		CONO	PI,10000
  2052									^;CHECK PIO CLEAR
  2053	032140	7 004 20 0 00 002040 		CONO	PI,PIOSET+40	;SET PIO
  2054	032141	7 004 20 0 00 001040 		CONO	PI,PIOCLR+40	;TRY TO CLEAR
  2055	032142	7 004 30 0 00 000040 		CONSZ	PI,40		;LIGHT=FAIL TO CLEAR PI2 PRINT
  2056						STOP			^
  2057	032143	254 04 0 00 032144 		HALT	.+1
  2058	032144	320 00 0 00 032145 		JUMP	.+1
  2059									^;NO LIGHT=STATUS FAIL IOB1 PRINT
  2060
  2061						CLEAN			^
  2062	032145	7 000 20 0 00 634440 		CONO	634440
  2063	032146	7 004 20 0 00 010000 		CONO	PI,10000
  2064									^;CHECK FOR PI RESET
  2065	032147	7 004 20 0 00 002040 		CONO	PI,PIOSET+40	;ABILITY TO CLEAR PIO FLAG
  2066	032150	7 004 20 0 00 010000 		CONO	PI,10000	;SEE PI2 PRINT, PI RESET
  2067	032151	7 004 30 0 00 000040 		CONSZ	PI,40		;TO PIO FLAGS
  2068						STOP^
  2069	032152	254 04 0 00 032153 		HALT	.+1
  2070	032153	320 00 0 00 032154 		JUMP	.+1
  2071									^
  2072
  2073						CLEAN			^
  2074	032154	7 000 20 0 00 634440 		CONO	634440
  2075	032155	7 004 20 0 00 010000 		CONO	PI,10000
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 25-2
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0058

  2076									^;TEST PIO SET
  2077	032156	7 004 20 0 00 002000 		CONO	PI,PIOSET	;SEE PI2 PRINT
  2078	032157	7 004 30 0 00 000040 		CONSZ	PI,40		;IT SET FLOP WITHOUT
  2079						STOP			^
  2080	032160	254 04 0 00 032161 		HALT	.+1
  2081	032161	320 00 0 00 032162 		JUMP	.+1
  2082									^;40 IOB BIT
  2083
  2084						CLEAN			^
  2085	032162	7 000 20 0 00 634440 		CONO	634440
  2086	032163	7 004 20 0 00 010000 		CONO	PI,10000
  2087									^;TEST PIO CLR
  2088	032164	7 004 20 0 00 002040 		CONO	PI,PIOSET+40	;PERHAPS PI RESET OCCURED (NO IOB-23)
  2089	032165	7 004 20 0 00 001000 		CONO	PI,PIOCLR	;THE FLOP CLEARED
  2090	032166	7 004 34 0 00 000040 		CONSO	PI,40		;WITH OUT 40 IOB BIT
  2091						STOP			^
  2092	032167	254 04 0 00 032170 		HALT	.+1
  2093	032170	320 00 0 00 032171 		JUMP	.+1
  2094									^;SEE PI2 PRINT
  2095					^
  2096
  2097	032171				MOD73:	CHANEL	MOD75^
  2098	032171	336 00 0 00 036672 		SKIPN	PI7SYS#
  2099	032172	254 00 0 00 032440 		JRST	MOD75
  2100									^
  2101						PIO 20^	CLEAN^
  2102	032173	7 000 20 0 00 634440 		CONO	634440
  2103	032174	7 004 20 0 00 010000 		CONO	PI,10000
  2104									^
  2105	032175	7 004 20 0 00 002020 		CONO	PI,PIOSET+20	;PIO FAIL TO SET IF LIGHT OUT
  2106	032176	7 004 34 0 00 000020 		CONSO	PI,20		;OTHERWISE FAIL TO READ
  2107						STOP			^
  2108	032177	254 04 0 00 032200 		HALT	.+1
  2109	032200	320 00 0 00 032201 		JUMP	.+1
  2110									^;STATUS SE P12-IOB1 PRINT
  2111
  2112						CLEAN			^
  2113	032201	7 000 20 0 00 634440 		CONO	634440
  2114	032202	7 004 20 0 00 010000 		CONO	PI,10000
  2115									^;CHECK PIO CLEAR
  2116	032203	7 004 20 0 00 002020 		CONO	PI,PIOSET+20	;SET PIO
  2117	032204	7 004 20 0 00 001020 		CONO	PI,PIOCLR+20	;TRY TO CLEAR
  2118	032205	7 004 30 0 00 000020 		CONSZ	PI,20		;LIGHT=FAIL TO CLEAR PI2 PRINT
  2119						STOP			^
  2120	032206	254 04 0 00 032207 		HALT	.+1
  2121	032207	320 00 0 00 032210 		JUMP	.+1
  2122									^;NO LIGHT=STATUS FAIL IOB1 PRINT
  2123
  2124						CLEAN			^
  2125	032210	7 000 20 0 00 634440 		CONO	634440
  2126	032211	7 004 20 0 00 010000 		CONO	PI,10000
  2127									^;CHECK FOR PI RESET
  2128	032212	7 004 20 0 00 002020 		CONO	PI,PIOSET+20	;ABILITY TO CLEAR PIO FLAG
  2129	032213	7 004 20 0 00 010000 		CONO	PI,10000	;SEE PI2 PRINT, PI RESET
  2130	032214	7 004 30 0 00 000020 		CONSZ	PI,20		;TO PIO FLAGS
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 25-3
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0059

  2131						STOP^
  2132	032215	254 04 0 00 032216 		HALT	.+1
  2133	032216	320 00 0 00 032217 		JUMP	.+1
  2134									^
  2135
  2136						CLEAN			^
  2137	032217	7 000 20 0 00 634440 		CONO	634440
  2138	032220	7 004 20 0 00 010000 		CONO	PI,10000
  2139									^;TEST PIO SET
  2140	032221	7 004 20 0 00 002000 		CONO	PI,PIOSET	;SEE PI2 PRINT
  2141	032222	7 004 30 0 00 000020 		CONSZ	PI,20		;IT SET FLOP WITHOUT
  2142						STOP			^
  2143	032223	254 04 0 00 032224 		HALT	.+1
  2144	032224	320 00 0 00 032225 		JUMP	.+1
  2145									^;20 IOB BIT
  2146
  2147						CLEAN			^
  2148	032225	7 000 20 0 00 634440 		CONO	634440
  2149	032226	7 004 20 0 00 010000 		CONO	PI,10000
  2150									^;TEST PIO CLR
  2151	032227	7 004 20 0 00 002020 		CONO	PI,PIOSET+20	;PERHAPS PI RESET OCCURED (NO IOB-23)
  2152	032230	7 004 20 0 00 001000 		CONO	PI,PIOCLR	;THE FLOP CLEARED
  2153	032231	7 004 34 0 00 000020 		CONSO	PI,20		;WITH OUT 20 IOB BIT
  2154						STOP			^
  2155	032232	254 04 0 00 032233 		HALT	.+1
  2156	032233	320 00 0 00 032234 		JUMP	.+1
  2157									^;SEE PI2 PRINT
  2158					^
  2159						PIO 10^	CLEAN^
  2160	032234	7 000 20 0 00 634440 		CONO	634440
  2161	032235	7 004 20 0 00 010000 		CONO	PI,10000
  2162									^
  2163	032236	7 004 20 0 00 002010 		CONO	PI,PIOSET+10	;PIO FAIL TO SET IF LIGHT OUT
  2164	032237	7 004 34 0 00 000010 		CONSO	PI,10		;OTHERWISE FAIL TO READ
  2165						STOP			^
  2166	032240	254 04 0 00 032241 		HALT	.+1
  2167	032241	320 00 0 00 032242 		JUMP	.+1
  2168									^;STATUS SE P12-IOB1 PRINT
  2169
  2170						CLEAN			^
  2171	032242	7 000 20 0 00 634440 		CONO	634440
  2172	032243	7 004 20 0 00 010000 		CONO	PI,10000
  2173									^;CHECK PIO CLEAR
  2174	032244	7 004 20 0 00 002010 		CONO	PI,PIOSET+10	;SET PIO
  2175	032245	7 004 20 0 00 001010 		CONO	PI,PIOCLR+10	;TRY TO CLEAR
  2176	032246	7 004 30 0 00 000010 		CONSZ	PI,10		;LIGHT=FAIL TO CLEAR PI2 PRINT
  2177						STOP			^
  2178	032247	254 04 0 00 032250 		HALT	.+1
  2179	032250	320 00 0 00 032251 		JUMP	.+1
  2180									^;NO LIGHT=STATUS FAIL IOB1 PRINT
  2181
  2182						CLEAN			^
  2183	032251	7 000 20 0 00 634440 		CONO	634440
  2184	032252	7 004 20 0 00 010000 		CONO	PI,10000
  2185									^;CHECK FOR PI RESET
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 25-4
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0060

  2186	032253	7 004 20 0 00 002010 		CONO	PI,PIOSET+10	;ABILITY TO CLEAR PIO FLAG
  2187	032254	7 004 20 0 00 010000 		CONO	PI,10000	;SEE PI2 PRINT, PI RESET
  2188	032255	7 004 30 0 00 000010 		CONSZ	PI,10		;TO PIO FLAGS
  2189						STOP^
  2190	032256	254 04 0 00 032257 		HALT	.+1
  2191	032257	320 00 0 00 032260 		JUMP	.+1
  2192									^
  2193
  2194						CLEAN			^
  2195	032260	7 000 20 0 00 634440 		CONO	634440
  2196	032261	7 004 20 0 00 010000 		CONO	PI,10000
  2197									^;TEST PIO SET
  2198	032262	7 004 20 0 00 002000 		CONO	PI,PIOSET	;SEE PI2 PRINT
  2199	032263	7 004 30 0 00 000010 		CONSZ	PI,10		;IT SET FLOP WITHOUT
  2200						STOP			^
  2201	032264	254 04 0 00 032265 		HALT	.+1
  2202	032265	320 00 0 00 032266 		JUMP	.+1
  2203									^;10 IOB BIT
  2204
  2205						CLEAN			^
  2206	032266	7 000 20 0 00 634440 		CONO	634440
  2207	032267	7 004 20 0 00 010000 		CONO	PI,10000
  2208									^;TEST PIO CLR
  2209	032270	7 004 20 0 00 002010 		CONO	PI,PIOSET+10	;PERHAPS PI RESET OCCURED (NO IOB-23)
  2210	032271	7 004 20 0 00 001000 		CONO	PI,PIOCLR	;THE FLOP CLEARED
  2211	032272	7 004 34 0 00 000010 		CONSO	PI,10		;WITH OUT 10 IOB BIT
  2212						STOP			^
  2213	032273	254 04 0 00 032274 		HALT	.+1
  2214	032274	320 00 0 00 032275 		JUMP	.+1
  2215									^;SEE PI2 PRINT
  2216					^
  2217
  2218	032275				MOD74:	PIO 4^	CLEAN^
  2219	032275	7 000 20 0 00 634440 		CONO	634440
  2220	032276	7 004 20 0 00 010000 		CONO	PI,10000
  2221									^
  2222	032277	7 004 20 0 00 002004 		CONO	PI,PIOSET+4	;PIO FAIL TO SET IF LIGHT OUT
  2223	032300	7 004 34 0 00 000004 		CONSO	PI,4		;OTHERWISE FAIL TO READ
  2224						STOP			^
  2225	032301	254 04 0 00 032302 		HALT	.+1
  2226	032302	320 00 0 00 032303 		JUMP	.+1
  2227									^;STATUS SE P12-IOB1 PRINT
  2228
  2229						CLEAN			^
  2230	032303	7 000 20 0 00 634440 		CONO	634440
  2231	032304	7 004 20 0 00 010000 		CONO	PI,10000
  2232									^;CHECK PIO CLEAR
  2233	032305	7 004 20 0 00 002004 		CONO	PI,PIOSET+4	;SET PIO
  2234	032306	7 004 20 0 00 001004 		CONO	PI,PIOCLR+4	;TRY TO CLEAR
  2235	032307	7 004 30 0 00 000004 		CONSZ	PI,4		;LIGHT=FAIL TO CLEAR PI2 PRINT
  2236						STOP			^
  2237	032310	254 04 0 00 032311 		HALT	.+1
  2238	032311	320 00 0 00 032312 		JUMP	.+1
  2239									^;NO LIGHT=STATUS FAIL IOB1 PRINT
  2240
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 25-5
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0061

  2241						CLEAN			^
  2242	032312	7 000 20 0 00 634440 		CONO	634440
  2243	032313	7 004 20 0 00 010000 		CONO	PI,10000
  2244									^;CHECK FOR PI RESET
  2245	032314	7 004 20 0 00 002004 		CONO	PI,PIOSET+4	;ABILITY TO CLEAR PIO FLAG
  2246	032315	7 004 20 0 00 010000 		CONO	PI,10000	;SEE PI2 PRINT, PI RESET
  2247	032316	7 004 30 0 00 000004 		CONSZ	PI,4		;TO PIO FLAGS
  2248						STOP^
  2249	032317	254 04 0 00 032320 		HALT	.+1
  2250	032320	320 00 0 00 032321 		JUMP	.+1
  2251									^
  2252
  2253						CLEAN			^
  2254	032321	7 000 20 0 00 634440 		CONO	634440
  2255	032322	7 004 20 0 00 010000 		CONO	PI,10000
  2256									^;TEST PIO SET
  2257	032323	7 004 20 0 00 002000 		CONO	PI,PIOSET	;SEE PI2 PRINT
  2258	032324	7 004 30 0 00 000004 		CONSZ	PI,4		;IT SET FLOP WITHOUT
  2259						STOP			^
  2260	032325	254 04 0 00 032326 		HALT	.+1
  2261	032326	320 00 0 00 032327 		JUMP	.+1
  2262									^;4 IOB BIT
  2263
  2264						CLEAN			^
  2265	032327	7 000 20 0 00 634440 		CONO	634440
  2266	032330	7 004 20 0 00 010000 		CONO	PI,10000
  2267									^;TEST PIO CLR
  2268	032331	7 004 20 0 00 002004 		CONO	PI,PIOSET+4	;PERHAPS PI RESET OCCURED (NO IOB-23)
  2269	032332	7 004 20 0 00 001000 		CONO	PI,PIOCLR	;THE FLOP CLEARED
  2270	032333	7 004 34 0 00 000004 		CONSO	PI,4		;WITH OUT 4 IOB BIT
  2271						STOP			^
  2272	032334	254 04 0 00 032335 		HALT	.+1
  2273	032335	320 00 0 00 032336 		JUMP	.+1
  2274									^;SEE PI2 PRINT
  2275					^
  2276						PIO 2^	CLEAN^
  2277	032336	7 000 20 0 00 634440 		CONO	634440
  2278	032337	7 004 20 0 00 010000 		CONO	PI,10000
  2279									^
  2280	032340	7 004 20 0 00 002002 		CONO	PI,PIOSET+2	;PIO FAIL TO SET IF LIGHT OUT
  2281	032341	7 004 34 0 00 000002 		CONSO	PI,2		;OTHERWISE FAIL TO READ
  2282						STOP			^
  2283	032342	254 04 0 00 032343 		HALT	.+1
  2284	032343	320 00 0 00 032344 		JUMP	.+1
  2285									^;STATUS SE P12-IOB1 PRINT
  2286
  2287						CLEAN			^
  2288	032344	7 000 20 0 00 634440 		CONO	634440
  2289	032345	7 004 20 0 00 010000 		CONO	PI,10000
  2290									^;CHECK PIO CLEAR
  2291	032346	7 004 20 0 00 002002 		CONO	PI,PIOSET+2	;SET PIO
  2292	032347	7 004 20 0 00 001002 		CONO	PI,PIOCLR+2	;TRY TO CLEAR
  2293	032350	7 004 30 0 00 000002 		CONSZ	PI,2		;LIGHT=FAIL TO CLEAR PI2 PRINT
  2294						STOP			^
  2295	032351	254 04 0 00 032352 		HALT	.+1
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 25-6
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0062

  2296	032352	320 00 0 00 032353 		JUMP	.+1
  2297									^;NO LIGHT=STATUS FAIL IOB1 PRINT
  2298
  2299						CLEAN			^
  2300	032353	7 000 20 0 00 634440 		CONO	634440
  2301	032354	7 004 20 0 00 010000 		CONO	PI,10000
  2302									^;CHECK FOR PI RESET
  2303	032355	7 004 20 0 00 002002 		CONO	PI,PIOSET+2	;ABILITY TO CLEAR PIO FLAG
  2304	032356	7 004 20 0 00 010000 		CONO	PI,10000	;SEE PI2 PRINT, PI RESET
  2305	032357	7 004 30 0 00 000002 		CONSZ	PI,2		;TO PIO FLAGS
  2306						STOP^
  2307	032360	254 04 0 00 032361 		HALT	.+1
  2308	032361	320 00 0 00 032362 		JUMP	.+1
  2309									^
  2310
  2311						CLEAN			^
  2312	032362	7 000 20 0 00 634440 		CONO	634440
  2313	032363	7 004 20 0 00 010000 		CONO	PI,10000
  2314									^;TEST PIO SET
  2315	032364	7 004 20 0 00 002000 		CONO	PI,PIOSET	;SEE PI2 PRINT
  2316	032365	7 004 30 0 00 000002 		CONSZ	PI,2		;IT SET FLOP WITHOUT
  2317						STOP			^
  2318	032366	254 04 0 00 032367 		HALT	.+1
  2319	032367	320 00 0 00 032370 		JUMP	.+1
  2320									^;2 IOB BIT
  2321
  2322						CLEAN			^
  2323	032370	7 000 20 0 00 634440 		CONO	634440
  2324	032371	7 004 20 0 00 010000 		CONO	PI,10000
  2325									^;TEST PIO CLR
  2326	032372	7 004 20 0 00 002002 		CONO	PI,PIOSET+2	;PERHAPS PI RESET OCCURED (NO IOB-23)
  2327	032373	7 004 20 0 00 001000 		CONO	PI,PIOCLR	;THE FLOP CLEARED
  2328	032374	7 004 34 0 00 000002 		CONSO	PI,2		;WITH OUT 2 IOB BIT
  2329						STOP			^
  2330	032375	254 04 0 00 032376 		HALT	.+1
  2331	032376	320 00 0 00 032377 		JUMP	.+1
  2332									^;SEE PI2 PRINT
  2333					^
  2334						PIO 1^	CLEAN^
  2335	032377	7 000 20 0 00 634440 		CONO	634440
  2336	032400	7 004 20 0 00 010000 		CONO	PI,10000
  2337									^
  2338	032401	7 004 20 0 00 002001 		CONO	PI,PIOSET+1	;PIO FAIL TO SET IF LIGHT OUT
  2339	032402	7 004 34 0 00 000001 		CONSO	PI,1		;OTHERWISE FAIL TO READ
  2340						STOP			^
  2341	032403	254 04 0 00 032404 		HALT	.+1
  2342	032404	320 00 0 00 032405 		JUMP	.+1
  2343									^;STATUS SE P12-IOB1 PRINT
  2344
  2345						CLEAN			^
  2346	032405	7 000 20 0 00 634440 		CONO	634440
  2347	032406	7 004 20 0 00 010000 		CONO	PI,10000
  2348									^;CHECK PIO CLEAR
  2349	032407	7 004 20 0 00 002001 		CONO	PI,PIOSET+1	;SET PIO
  2350	032410	7 004 20 0 00 001001 		CONO	PI,PIOCLR+1	;TRY TO CLEAR
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 25-7
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0063

  2351	032411	7 004 30 0 00 000001 		CONSZ	PI,1		;LIGHT=FAIL TO CLEAR PI2 PRINT
  2352						STOP			^
  2353	032412	254 04 0 00 032413 		HALT	.+1
  2354	032413	320 00 0 00 032414 		JUMP	.+1
  2355									^;NO LIGHT=STATUS FAIL IOB1 PRINT
  2356
  2357						CLEAN			^
  2358	032414	7 000 20 0 00 634440 		CONO	634440
  2359	032415	7 004 20 0 00 010000 		CONO	PI,10000
  2360									^;CHECK FOR PI RESET
  2361	032416	7 004 20 0 00 002001 		CONO	PI,PIOSET+1	;ABILITY TO CLEAR PIO FLAG
  2362	032417	7 004 20 0 00 010000 		CONO	PI,10000	;SEE PI2 PRINT, PI RESET
  2363	032420	7 004 30 0 00 000001 		CONSZ	PI,1		;TO PIO FLAGS
  2364						STOP^
  2365	032421	254 04 0 00 032422 		HALT	.+1
  2366	032422	320 00 0 00 032423 		JUMP	.+1
  2367									^
  2368
  2369						CLEAN			^
  2370	032423	7 000 20 0 00 634440 		CONO	634440
  2371	032424	7 004 20 0 00 010000 		CONO	PI,10000
  2372									^;TEST PIO SET
  2373	032425	7 004 20 0 00 002000 		CONO	PI,PIOSET	;SEE PI2 PRINT
  2374	032426	7 004 30 0 00 000001 		CONSZ	PI,1		;IT SET FLOP WITHOUT
  2375						STOP			^
  2376	032427	254 04 0 00 032430 		HALT	.+1
  2377	032430	320 00 0 00 032431 		JUMP	.+1
  2378									^;1 IOB BIT
  2379
  2380						CLEAN			^
  2381	032431	7 000 20 0 00 634440 		CONO	634440
  2382	032432	7 004 20 0 00 010000 		CONO	PI,10000
  2383									^;TEST PIO CLR
  2384	032433	7 004 20 0 00 002001 		CONO	PI,PIOSET+1	;PERHAPS PI RESET OCCURED (NO IOB-23)
  2385	032434	7 004 20 0 00 001000 		CONO	PI,PIOCLR	;THE FLOP CLEARED
  2386	032435	7 004 34 0 00 000001 		CONSO	PI,1		;WITH OUT 1 IOB BIT
  2387						STOP			^
  2388	032436	254 04 0 00 032437 		HALT	.+1
  2389	032437	320 00 0 00 032440 		JUMP	.+1
  2390									^;SEE PI2 PRINT
  2391					^
  2392	032440				MOD75:	CLEAN^
  2393	032440	7 000 20 0 00 634440 		CONO	634440
  2394	032441	7 004 20 0 00 010000 		CONO	PI,10000
  2395									^
  2396	032442				MOD76:	CLEAN^
  2397	032442	7 000 20 0 00 634440 		CONO	634440
  2398	032443	7 004 20 0 00 010000 		CONO	PI,10000
  2399									^
  2400	032444	7 004 20 0 00 002100 		CONO	PI,PIOSET+100	;PI RESET OCCURED
  2401	032445	7 004 20 0 00 000000 		CONO	PI,0		;WITH OUT IOB-23
  2402	032446	7 004 34 0 00 000100 		CONSO	PI,100		;SEE PI1 PRINT
  2403						STOP^
  2404	032447	254 04 0 00 032450 		HALT	.+1
  2405	032450	320 00 0 00 032451 		JUMP	.+1
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 25-8
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0064

  2406									^
  2407
  2408						CLEAN			^;PI RESET OCCURED
  2409
  2410	032451	7 000 20 0 00 634440 		CONO	634440
  2411	032452	7 004 20 0 00 010000 		CONO	PI,10000
  2412
  2413	032453	7 004 20 0 00 002100 		CONO	PI,PIOSET+100	;WITH OUT PI SEL
  2414	032454	7 774 20 0 00 001000 		CONO	ME,1000		;SEE PI1 PRINT
  2415	032455	7 004 34 0 00 000100 		CONSO	PI,100
  2416						STOP^
  2417	032456	254 04 0 00 032457 		HALT	.+1
  2418	032457	320 00 0 00 032460 		JUMP	.+1
  2419									^
  2420
  2421						CLEAN^
  2422	032460	7 000 20 0 00 634440 		CONO	634440
  2423	032461	7 004 20 0 00 010000 		CONO	PI,10000
  2424									^
  2425	032462	7 004 20 0 00 002100 		CONO	PI,PIOSET+100	;CHECK SELECTION
  2426	032463	7 774 20 0 00 001100 		CONO	ME,PIOCLR+100	;ON CONO SETL. SEE
  2427	032464	7 004 34 0 00 000100 		CONSO	PI,100		;PI1 PRINT  CONO ME
  2428						STOP			^;SHOULD NOT EFFECT PI
  2429
  2430	032465	254 04 0 00 032466 		HALT	.+1
  2431	032466	320 00 0 00 032467 		JUMP	.+1
  2432
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 26
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0065

  2433	032467				MOD77:	CLEAN^
  2434	032467	7 000 20 0 00 634440 		CONO	634440
  2435	032470	7 004 20 0 00 010000 		CONO	PI,10000
  2436									^
  2437	032471	7 004 20 0 00 000200 		CONO	PI,ACT		;SET ACTIVE THEN
  2438	032472	7 004 20 0 00 010000 		CONO	PI,10000	;TRY TO CLEAR VIA PI RESET
  2439	032473	7 004 30 0 00 000200 		CONSZ	PI,200		;FAIL TO CLEAR  SEE P11 PRINT
  2440						STOP			^;THE PI ACT FLAG
  2441
  2442	032474	254 04 0 00 032475 		HALT	.+1
  2443	032475	320 00 0 00 032476 		JUMP	.+1
  2444
  2445						CLEAN^
  2446	032476	7 000 20 0 00 634440 		CONO	634440
  2447	032477	7 004 20 0 00 010000 		CONO	PI,10000
  2448									^
  2449	032500	7 004 20 0 00 000200 		CONO	PI,ACT		;SET ACTIVE THEN
  2450	032501	7 004 20 0 00 000400 		CONO	PI,400		;TRY TO CLEAR VIA CONO
  2451	032502	7 004 30 0 00 000200 		CONSZ	PI,200		;AND BIT27 SEE PI1
  2452						STOP			^;PRINT ACTIVE FLAG
  2453
  2454	032503	254 04 0 00 032504 		HALT	.+1
  2455	032504	320 00 0 00 032505 		JUMP	.+1
  2456
  2457						CLEAN^
  2458	032505	7 000 20 0 00 634440 		CONO	634440
  2459	032506	7 004 20 0 00 010000 		CONO	PI,10000
  2460									^
  2461	032507	7 004 20 0 00 000200 		CONO	PI,ACT		;SEE ACT VIA CONO BIT 28
  2462	032510	7 004 34 0 00 000200 		CONSO	PI,200		;LIGHT=0 FAIL TO SET
  2463						STOP			^;LIGHT=(1) FAIL TO READ PI1-IOB1
  2464
  2465	032511	254 04 0 00 032512 		HALT	.+1
  2466	032512	320 00 0 00 032513 		JUMP	.+1
  2467
  2468						CLEAN^
  2469	032513	7 000 20 0 00 634440 		CONO	634440
  2470	032514	7 004 20 0 00 010000 		CONO	PI,10000
  2471									^
  2472	032515	7 004 20 0 00 000200 		CONO	PI,ACT		;SEE ABOVE
  2473	032516	7 004 20 0 00 000200 		CONO	PI,ACT
  2474	032517	7 004 34 0 00 000200 		CONSO	PI,200
  2475						STOP			^;PI ACT FAIL
  2476
  2477	032520	254 04 0 00 032521 		HALT	.+1
  2478	032521	320 00 0 00 032522 		JUMP	.+1
  2479
  2480
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 27
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0066

  2481					DEFINE	NOTPIR	(A)<
  2482						CLEAN			;ENABLE PRIORITY, EXPECT NO INTERRUPTS
  2483						CONO	PI,ACT		;CK PI REQ LEVEL (PI2 PRINT).  THE
  2484						CONSZ	PI,A		;PIR (1) INPUT TO AND GATE OF PIH (0)
  2485						STOP			;BOTTEM OF PAGE.  ALSO PIR-FLOP
  2486					>
  2487	032522				MOD78:	BLURB^
  2488					;CORE LOCATIONS 40 TO 60 CONTAIN A "MOVEI, ADDRESS"
  2489					;THEREFORE IF A INTERRUPT OCCURES THE MOVEI WILL
  2490					;STORE IN LOCATION ZERO THE ADDRESS OF THE EXECUTED
  2491					;INSTRUCTION
  2492					^
  2493					;CHECK CHANNEL 1, PIR1 FLOP OR RI REQ1 LEVEL
  2494						NOTPIR	40000^
  2495						CLEAN			^
  2496	032522	7 000 20 0 00 634440 		CONO	634440
  2497	032523	7 004 20 0 00 010000 		CONO	PI,10000
  2498									^;ENABLE PRIORITY, EXPECT NO INTERRUPTS
  2499	032524	7 004 20 0 00 000200 		CONO	PI,ACT		;CK PI REQ LEVEL (PI2 PRINT).  THE
  2500	032525	7 004 30 0 00 040000 		CONSZ	PI,40000		;PIR (1) INPUT TO AND GATE OF PIH (0)
  2501						STOP			^
  2502	032526	254 04 0 00 032527 		HALT	.+1
  2503	032527	320 00 0 00 032530 		JUMP	.+1
  2504									^;BOTTEM OF PAGE.  ALSO PIR-FLOP
  2505					^
  2506					;CHECK CHANNEL 2, PIR2  FLOP OR PI REQ2 LEVEL
  2507						NOTPIR	20000^
  2508						CLEAN			^
  2509	032530	7 000 20 0 00 634440 		CONO	634440
  2510	032531	7 004 20 0 00 010000 		CONO	PI,10000
  2511									^;ENABLE PRIORITY, EXPECT NO INTERRUPTS
  2512	032532	7 004 20 0 00 000200 		CONO	PI,ACT		;CK PI REQ LEVEL (PI2 PRINT).  THE
  2513	032533	7 004 30 0 00 020000 		CONSZ	PI,20000		;PIR (1) INPUT TO AND GATE OF PIH (0)
  2514						STOP			^
  2515	032534	254 04 0 00 032535 		HALT	.+1
  2516	032535	320 00 0 00 032536 		JUMP	.+1
  2517									^;BOTTEM OF PAGE.  ALSO PIR-FLOP
  2518					^
  2519					;CHECK CHANNEL 3, PIR3 FLOP OR PI REQ3 LEVEL
  2520						NOTPIR	10000^
  2521						CLEAN			^
  2522	032536	7 000 20 0 00 634440 		CONO	634440
  2523	032537	7 004 20 0 00 010000 		CONO	PI,10000
  2524									^;ENABLE PRIORITY, EXPECT NO INTERRUPTS
  2525	032540	7 004 20 0 00 000200 		CONO	PI,ACT		;CK PI REQ LEVEL (PI2 PRINT).  THE
  2526	032541	7 004 30 0 00 010000 		CONSZ	PI,10000		;PIR (1) INPUT TO AND GATE OF PIH (0)
  2527						STOP			^
  2528	032542	254 04 0 00 032543 		HALT	.+1
  2529	032543	320 00 0 00 032544 		JUMP	.+1
  2530									^;BOTTEM OF PAGE.  ALSO PIR-FLOP
  2531					^
  2532					;CHECK CHANNEL 4, PIR4 FLOP OR PI REQ4 LEVEL
  2533						NOTPIR	4000^
  2534						CLEAN			^
  2535	032544	7 000 20 0 00 634440 		CONO	634440
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 27-1
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0067

  2536	032545	7 004 20 0 00 010000 		CONO	PI,10000
  2537									^;ENABLE PRIORITY, EXPECT NO INTERRUPTS
  2538	032546	7 004 20 0 00 000200 		CONO	PI,ACT		;CK PI REQ LEVEL (PI2 PRINT).  THE
  2539	032547	7 004 30 0 00 004000 		CONSZ	PI,4000		;PIR (1) INPUT TO AND GATE OF PIH (0)
  2540						STOP			^
  2541	032550	254 04 0 00 032551 		HALT	.+1
  2542	032551	320 00 0 00 032552 		JUMP	.+1
  2543									^;BOTTEM OF PAGE.  ALSO PIR-FLOP
  2544					^
  2545					;CHECK CHANNEL 5, PIR5 FLOP OR PI REQ5 LEVEL
  2546						NOTPIR	2000^
  2547						CLEAN			^
  2548	032552	7 000 20 0 00 634440 		CONO	634440
  2549	032553	7 004 20 0 00 010000 		CONO	PI,10000
  2550									^;ENABLE PRIORITY, EXPECT NO INTERRUPTS
  2551	032554	7 004 20 0 00 000200 		CONO	PI,ACT		;CK PI REQ LEVEL (PI2 PRINT).  THE
  2552	032555	7 004 30 0 00 002000 		CONSZ	PI,2000		;PIR (1) INPUT TO AND GATE OF PIH (0)
  2553						STOP			^
  2554	032556	254 04 0 00 032557 		HALT	.+1
  2555	032557	320 00 0 00 032560 		JUMP	.+1
  2556									^;BOTTEM OF PAGE.  ALSO PIR-FLOP
  2557					^
  2558					;CHECK CHANNEL 6, PIR6 FLOP OR PI REQ6 LEVEL
  2559						NOTPIR	1000^
  2560						CLEAN			^
  2561	032560	7 000 20 0 00 634440 		CONO	634440
  2562	032561	7 004 20 0 00 010000 		CONO	PI,10000
  2563									^;ENABLE PRIORITY, EXPECT NO INTERRUPTS
  2564	032562	7 004 20 0 00 000200 		CONO	PI,ACT		;CK PI REQ LEVEL (PI2 PRINT).  THE
  2565	032563	7 004 30 0 00 001000 		CONSZ	PI,1000		;PIR (1) INPUT TO AND GATE OF PIH (0)
  2566						STOP			^
  2567	032564	254 04 0 00 032565 		HALT	.+1
  2568	032565	320 00 0 00 032566 		JUMP	.+1
  2569									^;BOTTEM OF PAGE.  ALSO PIR-FLOP
  2570					^
  2571					;CHECK CHANNEL 7, PIR 7 FLOP OR PI REQ7 LEVEL
  2572						NOTPIR	400^
  2573						CLEAN			^
  2574	032566	7 000 20 0 00 634440 		CONO	634440
  2575	032567	7 004 20 0 00 010000 		CONO	PI,10000
  2576									^;ENABLE PRIORITY, EXPECT NO INTERRUPTS
  2577	032570	7 004 20 0 00 000200 		CONO	PI,ACT		;CK PI REQ LEVEL (PI2 PRINT).  THE
  2578	032571	7 004 30 0 00 000400 		CONSZ	PI,400		;PIR (1) INPUT TO AND GATE OF PIH (0)
  2579						STOP			^
  2580	032572	254 04 0 00 032573 		HALT	.+1
  2581	032573	320 00 0 00 032574 		JUMP	.+1
  2582									^;BOTTEM OF PAGE.  ALSO PIR-FLOP
  2583					^
  2584
  2585					DEFINE	NOTREQ	(A,B)<
  2586						CLEAN			;A TEST OF PI OK TO PREVENT INTERRUPT
  2587						CONO	PI,PIREQ+A	;ACTIVE CLEARED, REQUEST FLAG SET
  2588						CONSZ	PI,B		;INTR OCCURED PIOK INPUT, PIOK TO PI
  2589						STOP			;REQ FAIL.  SEE BOTTEM PI2 PRINT
  2590					>
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 27-2
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0068

  2591
  2592	032574				MOD79:	BLURB^
  2593					;CORE LOCATIONS 40 TO 60 CONTAIN A "MOVEI, ADDRESS"
  2594					;THEREFORE IF A INTERRUPT OCCURES THE MOVEI WILL
  2595					;STORE IN LOCATION ZERO THE ADDRESS OF THE EXECUTED
  2596					;INSTRUCTION
  2597					^
  2598					;TEST PI ACT ABILITY TO PREVENT PI REQ1, INTERRUPT VIA ACTIVE
  2599						NOTREQ	100,40000^
  2600						CLEAN			^
  2601	032574	7 000 20 0 00 634440 		CONO	634440
  2602	032575	7 004 20 0 00 010000 		CONO	PI,10000
  2603									^;100 TEST OF PI OK TO PREVENT INTERRUPT
  2604	032576	7 004 20 0 00 004100 		CONO	PI,PIREQ+100	;ACTIVE CLEARED, REQUEST FLAG SET
  2605	032577	7 004 30 0 00 040000 		CONSZ	PI,40000		;INTR OCCURED PIOK INPUT, PIOK TO PI
  2606						STOP			^
  2607	032600	254 04 0 00 032601 		HALT	.+1
  2608	032601	320 00 0 00 032602 		JUMP	.+1
  2609									^;REQ FAIL.  SEE BOTTEM PI2 PRINT
  2610					^
  2611					;TEST PIOK2 ABILITY TO PREVENT PI REQ2, INTERRUPT
  2612						NOTREQ	40,20000^
  2613						CLEAN			^
  2614	032602	7 000 20 0 00 634440 		CONO	634440
  2615	032603	7 004 20 0 00 010000 		CONO	PI,10000
  2616									^;40 TEST OF PI OK TO PREVENT INTERRUPT
  2617	032604	7 004 20 0 00 004040 		CONO	PI,PIREQ+40	;ACTIVE CLEARED, REQUEST FLAG SET
  2618	032605	7 004 30 0 00 020000 		CONSZ	PI,20000		;INTR OCCURED PIOK INPUT, PIOK TO PI
  2619						STOP			^
  2620	032606	254 04 0 00 032607 		HALT	.+1
  2621	032607	320 00 0 00 032610 		JUMP	.+1
  2622									^;REQ FAIL.  SEE BOTTEM PI2 PRINT
  2623					^
  2624					;TEST PIOK3 ABILITY TO PREVENT PI REQ3, INTERRUPT
  2625						NOTREQ	20,10000^
  2626						CLEAN			^
  2627	032610	7 000 20 0 00 634440 		CONO	634440
  2628	032611	7 004 20 0 00 010000 		CONO	PI,10000
  2629									^;20 TEST OF PI OK TO PREVENT INTERRUPT
  2630	032612	7 004 20 0 00 004020 		CONO	PI,PIREQ+20	;ACTIVE CLEARED, REQUEST FLAG SET
  2631	032613	7 004 30 0 00 010000 		CONSZ	PI,10000		;INTR OCCURED PIOK INPUT, PIOK TO PI
  2632						STOP			^
  2633	032614	254 04 0 00 032615 		HALT	.+1
  2634	032615	320 00 0 00 032616 		JUMP	.+1
  2635									^;REQ FAIL.  SEE BOTTEM PI2 PRINT
  2636					^
  2637					;TEST PIOK4 ABILITY TO PREVENT PI REQ4, INTERRUPT
  2638						NOTREQ	10,4000^
  2639						CLEAN			^
  2640	032616	7 000 20 0 00 634440 		CONO	634440
  2641	032617	7 004 20 0 00 010000 		CONO	PI,10000
  2642									^;10 TEST OF PI OK TO PREVENT INTERRUPT
  2643	032620	7 004 20 0 00 004010 		CONO	PI,PIREQ+10	;ACTIVE CLEARED, REQUEST FLAG SET
  2644	032621	7 004 30 0 00 004000 		CONSZ	PI,4000		;INTR OCCURED PIOK INPUT, PIOK TO PI
  2645						STOP			^
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 27-3
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0069

  2646	032622	254 04 0 00 032623 		HALT	.+1
  2647	032623	320 00 0 00 032624 		JUMP	.+1
  2648									^;REQ FAIL.  SEE BOTTEM PI2 PRINT
  2649					^
  2650					;TEST PIOK5 ABILITY TO PREVENT PI REQ5, INTERRUPT
  2651						NOTREQ	4,2000^
  2652						CLEAN			^
  2653	032624	7 000 20 0 00 634440 		CONO	634440
  2654	032625	7 004 20 0 00 010000 		CONO	PI,10000
  2655									^;4 TEST OF PI OK TO PREVENT INTERRUPT
  2656	032626	7 004 20 0 00 004004 		CONO	PI,PIREQ+4	;ACTIVE CLEARED, REQUEST FLAG SET
  2657	032627	7 004 30 0 00 002000 		CONSZ	PI,2000		;INTR OCCURED PIOK INPUT, PIOK TO PI
  2658						STOP			^
  2659	032630	254 04 0 00 032631 		HALT	.+1
  2660	032631	320 00 0 00 032632 		JUMP	.+1
  2661									^;REQ FAIL.  SEE BOTTEM PI2 PRINT
  2662					^
  2663					;TEST PIOK6 ABILITY TO PREVENT PI REQ6, INTERRUPT
  2664						NOTREQ 2,1000^
  2665						CLEAN			^
  2666	032632	7 000 20 0 00 634440 		CONO	634440
  2667	032633	7 004 20 0 00 010000 		CONO	PI,10000
  2668									^;2 TEST OF PI OK TO PREVENT INTERRUPT
  2669	032634	7 004 20 0 00 004002 		CONO	PI,PIREQ+2	;ACTIVE CLEARED, REQUEST FLAG SET
  2670	032635	7 004 30 0 00 001000 		CONSZ	PI,1000		;INTR OCCURED PIOK INPUT, PIOK TO PI
  2671						STOP			^
  2672	032636	254 04 0 00 032637 		HALT	.+1
  2673	032637	320 00 0 00 032640 		JUMP	.+1
  2674									^;REQ FAIL.  SEE BOTTEM PI2 PRINT
  2675					^
  2676					;TEST PIOK7 ABILITY TO PREVENT PI REQ7, INTERRUPT
  2677						NOTREQ	1,400^
  2678						CLEAN			^
  2679	032640	7 000 20 0 00 634440 		CONO	634440
  2680	032641	7 004 20 0 00 010000 		CONO	PI,10000
  2681									^;1 TEST OF PI OK TO PREVENT INTERRUPT
  2682	032642	7 004 20 0 00 004001 		CONO	PI,PIREQ+1	;ACTIVE CLEARED, REQUEST FLAG SET
  2683	032643	7 004 30 0 00 000400 		CONSZ	PI,400		;INTR OCCURED PIOK INPUT, PIOK TO PI
  2684						STOP			^
  2685	032644	254 04 0 00 032645 		HALT	.+1
  2686	032645	320 00 0 00 032646 		JUMP	.+1
  2687									^;REQ FAIL.  SEE BOTTEM PI2 PRINT
  2688					^
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 28
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0070

  2689
  2690					DEFINE	PIRCLR	(A)<
  2691						CLEAN
  2692						CONO	PI,PIREQ+A	;SET REQUEST FLOP BUT
  2693						SETZ			;NOT ACTIVE THEN CLEAR
  2694						CONO	PI,10000+ACT	;REQUEST AND SET ACTIVE
  2695						SKIPE			;PI RESET FAILED TO CLEAR
  2696						STOP			;THE PIR FLAG.`SEE PI2 PRINT
  2697					>
  2698
  2699			000100		ZZ=100				;CHECK CLEAR TO PIR FLAGS
  2700						REPEAT	7,<
  2701						PIRCLR	ZZ
  2702						ZZ=ZZ/2>
  2703
  2704						PIRCLR	ZZ^
  2705						CLEAN^
  2706	032646	7 000 20 0 00 634440 		CONO	634440
  2707	032647	7 004 20 0 00 010000 		CONO	PI,10000
  2708									^
  2709	032650	7 004 20 0 00 004100 		CONO	PI,PIREQ+ZZ	;SET REQUEST FLOP BUT
  2710	032651	400 00 0 00 000000 		SETZ			;NOT ACTIVE THEN CLEAR
  2711	032652	7 004 20 0 00 010200 		CONO	PI,10000+ACT	;REQUEST AND SET ACTIVE
  2712	032653	332 00 0 00 000000 		SKIPE			;PI RESET FAILED TO CLEAR
  2713						STOP			^
  2714	032654	254 04 0 00 032655 		HALT	.+1
  2715	032655	320 00 0 00 032656 		JUMP	.+1
  2716									^;THE PIR FLAG.`SEE PI2 PRINT
  2717					^
  2718			000040			ZZ=ZZ/2
  2719
  2720						PIRCLR	ZZ^
  2721						CLEAN^
  2722	032656	7 000 20 0 00 634440 		CONO	634440
  2723	032657	7 004 20 0 00 010000 		CONO	PI,10000
  2724									^
  2725	032660	7 004 20 0 00 004040 		CONO	PI,PIREQ+ZZ	;SET REQUEST FLOP BUT
  2726	032661	400 00 0 00 000000 		SETZ			;NOT ACTIVE THEN CLEAR
  2727	032662	7 004 20 0 00 010200 		CONO	PI,10000+ACT	;REQUEST AND SET ACTIVE
  2728	032663	332 00 0 00 000000 		SKIPE			;PI RESET FAILED TO CLEAR
  2729						STOP			^
  2730	032664	254 04 0 00 032665 		HALT	.+1
  2731	032665	320 00 0 00 032666 		JUMP	.+1
  2732									^;THE PIR FLAG.`SEE PI2 PRINT
  2733					^
  2734			000020			ZZ=ZZ/2
  2735
  2736						PIRCLR	ZZ^
  2737						CLEAN^
  2738	032666	7 000 20 0 00 634440 		CONO	634440
  2739	032667	7 004 20 0 00 010000 		CONO	PI,10000
  2740									^
  2741	032670	7 004 20 0 00 004020 		CONO	PI,PIREQ+ZZ	;SET REQUEST FLOP BUT
  2742	032671	400 00 0 00 000000 		SETZ			;NOT ACTIVE THEN CLEAR
  2743	032672	7 004 20 0 00 010200 		CONO	PI,10000+ACT	;REQUEST AND SET ACTIVE
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 28-1
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0071

  2744	032673	332 00 0 00 000000 		SKIPE			;PI RESET FAILED TO CLEAR
  2745						STOP			^
  2746	032674	254 04 0 00 032675 		HALT	.+1
  2747	032675	320 00 0 00 032676 		JUMP	.+1
  2748									^;THE PIR FLAG.`SEE PI2 PRINT
  2749					^
  2750			000010			ZZ=ZZ/2
  2751
  2752						PIRCLR	ZZ^
  2753						CLEAN^
  2754	032676	7 000 20 0 00 634440 		CONO	634440
  2755	032677	7 004 20 0 00 010000 		CONO	PI,10000
  2756									^
  2757	032700	7 004 20 0 00 004010 		CONO	PI,PIREQ+ZZ	;SET REQUEST FLOP BUT
  2758	032701	400 00 0 00 000000 		SETZ			;NOT ACTIVE THEN CLEAR
  2759	032702	7 004 20 0 00 010200 		CONO	PI,10000+ACT	;REQUEST AND SET ACTIVE
  2760	032703	332 00 0 00 000000 		SKIPE			;PI RESET FAILED TO CLEAR
  2761						STOP			^
  2762	032704	254 04 0 00 032705 		HALT	.+1
  2763	032705	320 00 0 00 032706 		JUMP	.+1
  2764									^;THE PIR FLAG.`SEE PI2 PRINT
  2765					^
  2766			000004			ZZ=ZZ/2
  2767
  2768						PIRCLR	ZZ^
  2769						CLEAN^
  2770	032706	7 000 20 0 00 634440 		CONO	634440
  2771	032707	7 004 20 0 00 010000 		CONO	PI,10000
  2772									^
  2773	032710	7 004 20 0 00 004004 		CONO	PI,PIREQ+ZZ	;SET REQUEST FLOP BUT
  2774	032711	400 00 0 00 000000 		SETZ			;NOT ACTIVE THEN CLEAR
  2775	032712	7 004 20 0 00 010200 		CONO	PI,10000+ACT	;REQUEST AND SET ACTIVE
  2776	032713	332 00 0 00 000000 		SKIPE			;PI RESET FAILED TO CLEAR
  2777						STOP			^
  2778	032714	254 04 0 00 032715 		HALT	.+1
  2779	032715	320 00 0 00 032716 		JUMP	.+1
  2780									^;THE PIR FLAG.`SEE PI2 PRINT
  2781					^
  2782			000002			ZZ=ZZ/2
  2783
  2784						PIRCLR	ZZ^
  2785						CLEAN^
  2786	032716	7 000 20 0 00 634440 		CONO	634440
  2787	032717	7 004 20 0 00 010000 		CONO	PI,10000
  2788									^
  2789	032720	7 004 20 0 00 004002 		CONO	PI,PIREQ+ZZ	;SET REQUEST FLOP BUT
  2790	032721	400 00 0 00 000000 		SETZ			;NOT ACTIVE THEN CLEAR
  2791	032722	7 004 20 0 00 010200 		CONO	PI,10000+ACT	;REQUEST AND SET ACTIVE
  2792	032723	332 00 0 00 000000 		SKIPE			;PI RESET FAILED TO CLEAR
  2793						STOP			^
  2794	032724	254 04 0 00 032725 		HALT	.+1
  2795	032725	320 00 0 00 032726 		JUMP	.+1
  2796									^;THE PIR FLAG.`SEE PI2 PRINT
  2797					^
  2798			000001			ZZ=ZZ/2
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 28-2
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0072

  2799
  2800						PIRCLR	ZZ^
  2801						CLEAN^
  2802	032726	7 000 20 0 00 634440 		CONO	634440
  2803	032727	7 004 20 0 00 010000 		CONO	PI,10000
  2804									^
  2805	032730	7 004 20 0 00 004001 		CONO	PI,PIREQ+ZZ	;SET REQUEST FLOP BUT
  2806	032731	400 00 0 00 000000 		SETZ			;NOT ACTIVE THEN CLEAR
  2807	032732	7 004 20 0 00 010200 		CONO	PI,10000+ACT	;REQUEST AND SET ACTIVE
  2808	032733	332 00 0 00 000000 		SKIPE			;PI RESET FAILED TO CLEAR
  2809						STOP			^
  2810	032734	254 04 0 00 032735 		HALT	.+1
  2811	032735	320 00 0 00 032736 		JUMP	.+1
  2812									^;THE PIR FLAG.`SEE PI2 PRINT
  2813					^
  2814			000000			ZZ=ZZ/2
  2815
  2816					DEFINE	FILAC<
  2817						MOVE	17,[MOVEI 17]	;FILL ACS WITH
  2818						MOVEM	17,(17)		;MOVEI TO AC 0
  2819						CAME	17,[MOVEI 0]	;THE CURRENT LOC
  2820						SOJA	17,.-2
  2821						MOVE	17,[MOVEI 17]
  2822					>
  2823
  2824						FILAC^
  2825	032736	200 17 0 00 036475 		MOVE	17,[MOVEI 17]	;FILL ACS WITH
  2826	032737	202 17 0 17 000000 		MOVEM	17,(17)		;MOVEI TO AC 0
  2827	032740	312 17 0 00 036476 		CAME	17,[MOVEI 0]	;THE CURRENT LOC
  2828	032741	364 17 0 00 032737 		SOJA	17,.-2
  2829	032742	200 17 0 00 036475 		MOVE	17,[MOVEI 17]
  2830					^
  2831
  2832						CLEAN			^;CHECK PC+1 INHIBIT ON INTERRUPT
  2833
  2834	032743	7 000 20 0 00 634440 		CONO	634440
  2835	032744	7 004 20 0 00 010000 		CONO	PI,10000
  2836
  2837	032745	200 00 0 00 036476 		MOVE	[MOVEI]
  2838	032746	7 004 20 0 00 004300 		CONO	PI,ACT+PIREQ+100	;CAUSE INTERRUPT
  2839	032747	334 00 0 00 000000 		SKIPA			;PC+1 INH ON PC1 PRINT FAIL
  2840						STOP			^;SEE P1 CYC(1) INPUT
  2841
  2842	032750	254 04 0 00 032751 		HALT	.+1
  2843	032751	320 00 0 00 032752 		JUMP	.+1
  2844
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 29
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0073

  2845						BLURB^
  2846					;CORE LOCATIONS 40 TO 60 CONTAIN A "MOVEI, ADDRESS"
  2847					;THEREFORE IF A INTERRUPT OCCURES THE MOVEI WILL
  2848					;STORE IN LOCATION ZERO THE ADDRESS OF THE EXECUTED
  2849					;INSTRUCTION
  2850					^
  2851	032752				MOD80:	CLEAN^
  2852	032752	7 000 20 0 00 634440 		CONO	634440
  2853	032753	7 004 20 0 00 010000 		CONO	PI,10000
  2854									^
  2855	032754	200 00 0 00 036476 		MOVE	[MOVEI]		;IF LOC 0 EXECUTED C(0)=0
  2856	032755	7 004 20 0 00 004300 		CONO PI,ACT+PIREQ+100	;CAUSE AN INTERRUPT
  2857	032756	336 00 0 00 000000 		SKIPN	0		;MA FM PICH (1) PULSE FAIL
  2858						STOP			^;SEE MA1 PRINT
  2859
  2860	032757	254 04 0 00 032760 		HALT	.+1
  2861	032760	320 00 0 00 032761 		JUMP	.+1
  2862
  2863						CLEAN^
  2864	032761	7 000 20 0 00 634440 		CONO	634440
  2865	032762	7 004 20 0 00 010000 		CONO	PI,10000
  2866									^
  2867	032763	200 00 0 00 036476 		MOVE	[MOVEI]
  2868	032764	7 004 20 0 00 004300 		CONO	PI,ACT+PIREQ+100	;CAUSE INTERRUPT IF MA
  2869	032765	306 00 0 00 000040 		CAIN	40		;34 SET FAIL C(0)=40
  2870						STOP			^;SEE MA1 PRINT
  2871
  2872	032766	254 04 0 00 032767 		HALT	.+1
  2873	032767	320 00 0 00 032770 		JUMP	.+1
  2874
  2875						CLEAN^
  2876	032770	7 000 20 0 00 634440 		CONO	634440
  2877	032771	7 004 20 0 00 010000 		CONO	PI,10000
  2878									^
  2879	032772	7 004 20 0 00 004300 		CONO	PI,ACT+PIREQ+100	;CAUSE INTERRUPT
  2880	032773	306 00 0 00 000002 		CAIN	2		;MA 30 SET FAILED
  2881						STOP			^;SEE MA1 PRINT
  2882
  2883	032774	254 04 0 00 032775 		HALT	.+1
  2884	032775	320 00 0 00 032776 		JUMP	.+1
  2885
  2886						CLEAN^
  2887	032776	7 000 20 0 00 634440 		CONO	634440
  2888	032777	7 004 20 0 00 010000 		CONO	PI,10000
  2889									^
  2890	033000	7 004 20 0 00 004300 		CONO	PI,ACT+PIREQ+100	;CAUSE INTERRUPT
  2891	033001	306 00 0 00 000046 		CAIN	46		;MA 33 SET OUCCRED ON CH1
  2892						STOP			^;SEE MA1 PRINT
  2893
  2894	033002	254 04 0 00 033003 		HALT	.+1
  2895	033003	320 00 0 00 033004 		JUMP	.+1
  2896
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 30
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0074

  2897	033004				MOD81:	CLEAN^
  2898	033004	7 000 20 0 00 634440 		CONO	634440
  2899	033005	7 004 20 0 00 010000 		CONO	PI,10000
  2900									^
  2901	033006	7 004 20 0 00 004300 		CONO	PI,ACT+PIREQ+100	;CAUSE INTERRUPT
  2902	033007	306 00 0 00 000052 		CAIN	52		;MA 32 SET OCCURED ON CH1
  2903						STOP			^;SEE MA1 PRINT
  2904
  2905	033010	254 04 0 00 033011 		HALT	.+1
  2906	033011	320 00 0 00 033012 		JUMP	.+1
  2907
  2908
  2909						CLEAN^
  2910	033012	7 000 20 0 00 634440 		CONO	634440
  2911	033013	7 004 20 0 00 010000 		CONO	PI,10000
  2912									^
  2913	033014	7 004 20 0 00 004300 		CONO	PI,ACT+PIREQ+100	;CAUSE INTERRUPT
  2914	033015	306 00 0 00 000043 		CAIN	43		;MA 35 SET OUCCURED ON CH1
  2915						STOP			^;SEE MA1 PRINT
  2916
  2917	033016	254 04 0 00 033017 		HALT	.+1
  2918	033017	320 00 0 00 033020 		JUMP	.+1
  2919
  2920
  2921						CLEAN^
  2922	033020	7 000 20 0 00 634440 		CONO	634440
  2923	033021	7 004 20 0 00 010000 		CONO	PI,10000
  2924									^
  2925	033022	7 004 20 0 00 004240 		CONO	PI,ACT+PIREQ+40	;CAUSE INTERRUPT
  2926	033023	306 00 0 00 000040 		CAIN	40		;MA 33 SET FAILED ON CH2
  2927						STOP			^;SEE MA1 PRINT
  2928
  2929	033024	254 04 0 00 033025 		HALT	.+1
  2930	033025	320 00 0 00 033026 		JUMP	.+1
  2931
  2932
  2933						CLEAN^
  2934	033026	7 000 20 0 00 634440 		CONO	634440
  2935	033027	7 004 20 0 00 010000 		CONO	PI,10000
  2936									^
  2937	033030	7 004 20 0 00 004220 		CONO	PI,ACT+PIREQ+20	;CAUSE INTERRUPT
  2938	033031	306 00 0 00 000040 		CAIN	40		;MA 32 SET FAILED ON CH4
  2939						STOP			^;SEE MA1 PRINT
  2940
  2941	033032	254 04 0 00 033033 		HALT	.+1
  2942	033033	320 00 0 00 033034 		JUMP	.+1
  2943
  2944
  2945						CLEAN^
  2946	033034	7 000 20 0 00 634440 		CONO	634440
  2947	033035	7 004 20 0 00 010000 		CONO	PI,10000
  2948									^
  2949	033036	7 004 20 0 00 004240 		CONO	PI,ACT+PIREQ+40	;CAUSE INTERRUPT
  2950	033037	306 00 0 00 000046 		CAIN	46		;MA 34 SET OCCURED ON CH2
  2951						STOP			^;SEE MA1 PRINT
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 30-1
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0075

  2952
  2953	033040	254 04 0 00 033041 		HALT	.+1
  2954	033041	320 00 0 00 033042 		JUMP	.+1
  2955
  2956
  2957						BLURB^
  2958					;CORE LOCATIONS 40 TO 60 CONTAIN A "MOVEI, ADDRESS"
  2959					;THEREFORE IF A INTERRUPT OCCURES THE MOVEI WILL
  2960					;STORE IN LOCATION ZERO THE ADDRESS OF THE EXECUTED
  2961					;INSTRUCTION
  2962					^
  2963	033042				MOD82:	CLEAN			^;CHECK IF AN INTERRUPT OCCURES
  2964
  2965	033042	7 000 20 0 00 634440 		CONO	634440
  2966	033043	7 004 20 0 00 010000 		CONO	PI,10000
  2967
  2968	033044	400 00 0 00 000000 		SETZ	0		;C(0) FILLED BY XCT OF MOVEI
  2969	033045	7 004 20 0 00 004377 		CONO	PI,ACT+PIREQ+177	;ACTIVATE ALL INTERRUPTS
  2970	033046	336 00 0 00 000000 		SKIPN	0		;CK PIR FM IOB [1] PI1 PRINT
  2971						STOP			^;AND PIRQ LEVEL PI1 PRINT
  2972
  2973	033047	254 04 0 00 033050 		HALT	.+1
  2974	033050	320 00 0 00 033051 		JUMP	.+1
  2975
  2976
  2977						CLEAN^
  2978	033051	7 000 20 0 00 634440 		CONO	634440
  2979	033052	7 004 20 0 00 010000 		CONO	PI,10000
  2980									^
  2981	033053	400 00 0 00 000000 		SETZ	0		;ON INTERRUPT NO PI HOLDS
  2982	033054	7 004 20 0 00 004377 		CONO	PI,ACT+PIREQ+177	;WERE SET CHECK PIH
  2983	033055	7 004 34 0 00 077400 		CONSO	PI,77400		;FM PICHRQ PULSE ON
  2984						STOP			^;PI1 PRINT
  2985
  2986	033056	254 04 0 00 033057 		HALT	.+1
  2987	033057	320 00 0 00 033060 		JUMP	.+1
  2988
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 31
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0076

  2989					DEFINE	PIHCLR	(A,B)<
  2990						CLEAN
  2991						CONO	PI,PIREQ+ACT+A	;CAUSE INTERRUPT TO SET HOLD
  2992						CONO PI,10000		;TRY TO CLEAR WITH PI RESET
  2993						CONSZ	PI,B		;FAIL TO CLEAR SEE PI2
  2994						STOP
  2995					>
  2996
  2997			000100		ZZ=100
  2998			040000		YY=40000				;CHECK RESET TO PIH FLOPS
  2999					MOD83:	REPEAT	7,<
  3000						PIHCLR	ZZ,YY
  3001						ZZ=ZZ/2
  3002						YY=YY/2
  3003					>
  3004
  3005						PIHCLR	ZZ,YY^
  3006						CLEAN^
  3007	033060	7 000 20 0 00 634440 		CONO	634440
  3008	033061	7 004 20 0 00 010000 		CONO	PI,10000
  3009									^
  3010	033062	7 004 20 0 00 004300 		CONO	PI,PIREQ+ACT+ZZ	;CAUSE INTERRUPT TO SET HOLD
  3011	033063	7 004 20 0 00 010000 		CONO PI,10000		;TRY TO CLEAR WITH PI RESET
  3012	033064	7 004 30 0 00 040000 		CONSZ	PI,YY		;FAIL TO CLEAR SEE PI2
  3013						STOP^
  3014	033065	254 04 0 00 033066 		HALT	.+1
  3015	033066	320 00 0 00 033067 		JUMP	.+1
  3016									^
  3017					^
  3018			000040			ZZ=ZZ/2
  3019			020000			YY=YY/2
  3020
  3021
  3022						PIHCLR	ZZ,YY^
  3023						CLEAN^
  3024	033067	7 000 20 0 00 634440 		CONO	634440
  3025	033070	7 004 20 0 00 010000 		CONO	PI,10000
  3026									^
  3027	033071	7 004 20 0 00 004240 		CONO	PI,PIREQ+ACT+ZZ	;CAUSE INTERRUPT TO SET HOLD
  3028	033072	7 004 20 0 00 010000 		CONO PI,10000		;TRY TO CLEAR WITH PI RESET
  3029	033073	7 004 30 0 00 020000 		CONSZ	PI,YY		;FAIL TO CLEAR SEE PI2
  3030						STOP^
  3031	033074	254 04 0 00 033075 		HALT	.+1
  3032	033075	320 00 0 00 033076 		JUMP	.+1
  3033									^
  3034					^
  3035			000020			ZZ=ZZ/2
  3036			010000			YY=YY/2
  3037
  3038
  3039						PIHCLR	ZZ,YY^
  3040						CLEAN^
  3041	033076	7 000 20 0 00 634440 		CONO	634440
  3042	033077	7 004 20 0 00 010000 		CONO	PI,10000
  3043									^
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 31-1
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0077

  3044	033100	7 004 20 0 00 004220 		CONO	PI,PIREQ+ACT+ZZ	;CAUSE INTERRUPT TO SET HOLD
  3045	033101	7 004 20 0 00 010000 		CONO PI,10000		;TRY TO CLEAR WITH PI RESET
  3046	033102	7 004 30 0 00 010000 		CONSZ	PI,YY		;FAIL TO CLEAR SEE PI2
  3047						STOP^
  3048	033103	254 04 0 00 033104 		HALT	.+1
  3049	033104	320 00 0 00 033105 		JUMP	.+1
  3050									^
  3051					^
  3052			000010			ZZ=ZZ/2
  3053			004000			YY=YY/2
  3054
  3055
  3056						PIHCLR	ZZ,YY^
  3057						CLEAN^
  3058	033105	7 000 20 0 00 634440 		CONO	634440
  3059	033106	7 004 20 0 00 010000 		CONO	PI,10000
  3060									^
  3061	033107	7 004 20 0 00 004210 		CONO	PI,PIREQ+ACT+ZZ	;CAUSE INTERRUPT TO SET HOLD
  3062	033110	7 004 20 0 00 010000 		CONO PI,10000		;TRY TO CLEAR WITH PI RESET
  3063	033111	7 004 30 0 00 004000 		CONSZ	PI,YY		;FAIL TO CLEAR SEE PI2
  3064						STOP^
  3065	033112	254 04 0 00 033113 		HALT	.+1
  3066	033113	320 00 0 00 033114 		JUMP	.+1
  3067									^
  3068					^
  3069			000004			ZZ=ZZ/2
  3070			002000			YY=YY/2
  3071
  3072
  3073						PIHCLR	ZZ,YY^
  3074						CLEAN^
  3075	033114	7 000 20 0 00 634440 		CONO	634440
  3076	033115	7 004 20 0 00 010000 		CONO	PI,10000
  3077									^
  3078	033116	7 004 20 0 00 004204 		CONO	PI,PIREQ+ACT+ZZ	;CAUSE INTERRUPT TO SET HOLD
  3079	033117	7 004 20 0 00 010000 		CONO PI,10000		;TRY TO CLEAR WITH PI RESET
  3080	033120	7 004 30 0 00 002000 		CONSZ	PI,YY		;FAIL TO CLEAR SEE PI2
  3081						STOP^
  3082	033121	254 04 0 00 033122 		HALT	.+1
  3083	033122	320 00 0 00 033123 		JUMP	.+1
  3084									^
  3085					^
  3086			000002			ZZ=ZZ/2
  3087			001000			YY=YY/2
  3088
  3089
  3090						PIHCLR	ZZ,YY^
  3091						CLEAN^
  3092	033123	7 000 20 0 00 634440 		CONO	634440
  3093	033124	7 004 20 0 00 010000 		CONO	PI,10000
  3094									^
  3095	033125	7 004 20 0 00 004202 		CONO	PI,PIREQ+ACT+ZZ	;CAUSE INTERRUPT TO SET HOLD
  3096	033126	7 004 20 0 00 010000 		CONO PI,10000		;TRY TO CLEAR WITH PI RESET
  3097	033127	7 004 30 0 00 001000 		CONSZ	PI,YY		;FAIL TO CLEAR SEE PI2
  3098						STOP^
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 31-2
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0078

  3099	033130	254 04 0 00 033131 		HALT	.+1
  3100	033131	320 00 0 00 033132 		JUMP	.+1
  3101									^
  3102					^
  3103			000001			ZZ=ZZ/2
  3104			000400			YY=YY/2
  3105
  3106
  3107						PIHCLR	ZZ,YY^
  3108						CLEAN^
  3109	033132	7 000 20 0 00 634440 		CONO	634440
  3110	033133	7 004 20 0 00 010000 		CONO	PI,10000
  3111									^
  3112	033134	7 004 20 0 00 004201 		CONO	PI,PIREQ+ACT+ZZ	;CAUSE INTERRUPT TO SET HOLD
  3113	033135	7 004 20 0 00 010000 		CONO PI,10000		;TRY TO CLEAR WITH PI RESET
  3114	033136	7 004 30 0 00 000400 		CONSZ	PI,YY		;FAIL TO CLEAR SEE PI2
  3115						STOP^
  3116	033137	254 04 0 00 033140 		HALT	.+1
  3117	033140	320 00 0 00 033141 		JUMP	.+1
  3118									^
  3119					^
  3120			000000			ZZ=ZZ/2
  3121			000200			YY=YY/2
  3122
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 32
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0079

  3123
  3124
  3125						BLURB^
  3126					;CORE LOCATIONS 40 TO 60 CONTAIN A "MOVEI, ADDRESS"
  3127					;THEREFORE IF A INTERRUPT OCCURES THE MOVEI WILL
  3128					;STORE IN LOCATION ZERO THE ADDRESS OF THE EXECUTED
  3129					;INSTRUCTION
  3130					^
  3131					DEFINE	OFFPIR	(A,B)<
  3132						CLEAN
  3133						CONO	PI,PIREQ+ACT+A	;SETS PIH. THEN CLR
  3134						JRST 10,.+1		;PIR TURNED BACK ON
  3135						CONSZ PI,B		;PIR TURNED BACK ON.PIH(1) CLR PIR
  3136						STOP
  3137					>
  3138
  3139			000100		ZZ=100
  3140			040000		YY=40000			;TEST THE RESET TO PIR
  3141					MOD85:	REPEAT	7,<
  3142						OFFPIR	ZZ,YY
  3143						ZZ=ZZ/2
  3144						YY=YY/2
  3145					>
  3146
  3147						OFFPIR	ZZ,YY^
  3148						CLEAN^
  3149	033141	7 000 20 0 00 634440 		CONO	634440
  3150	033142	7 004 20 0 00 010000 		CONO	PI,10000
  3151									^
  3152	033143	7 004 20 0 00 004300 		CONO	PI,PIREQ+ACT+ZZ	;SETS PIH. THEN CLR
  3153	033144	254 10 0 00 033145 		JRST 10,.+1		;PIR TURNED BACK ON
  3154	033145	7 004 30 0 00 040000 		CONSZ PI,YY		;PIR TURNED BACK ON.PIH(1) CLR PIR
  3155						STOP^
  3156	033146	254 04 0 00 033147 		HALT	.+1
  3157	033147	320 00 0 00 033150 		JUMP	.+1
  3158									^
  3159					^
  3160			000040			ZZ=ZZ/2
  3161			020000			YY=YY/2
  3162
  3163
  3164						OFFPIR	ZZ,YY^
  3165						CLEAN^
  3166	033150	7 000 20 0 00 634440 		CONO	634440
  3167	033151	7 004 20 0 00 010000 		CONO	PI,10000
  3168									^
  3169	033152	7 004 20 0 00 004240 		CONO	PI,PIREQ+ACT+ZZ	;SETS PIH. THEN CLR
  3170	033153	254 10 0 00 033154 		JRST 10,.+1		;PIR TURNED BACK ON
  3171	033154	7 004 30 0 00 020000 		CONSZ PI,YY		;PIR TURNED BACK ON.PIH(1) CLR PIR
  3172						STOP^
  3173	033155	254 04 0 00 033156 		HALT	.+1
  3174	033156	320 00 0 00 033157 		JUMP	.+1
  3175									^
  3176					^
  3177			000020			ZZ=ZZ/2
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 32-1
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0080

  3178			010000			YY=YY/2
  3179
  3180
  3181						OFFPIR	ZZ,YY^
  3182						CLEAN^
  3183	033157	7 000 20 0 00 634440 		CONO	634440
  3184	033160	7 004 20 0 00 010000 		CONO	PI,10000
  3185									^
  3186	033161	7 004 20 0 00 004220 		CONO	PI,PIREQ+ACT+ZZ	;SETS PIH. THEN CLR
  3187	033162	254 10 0 00 033163 		JRST 10,.+1		;PIR TURNED BACK ON
  3188	033163	7 004 30 0 00 010000 		CONSZ PI,YY		;PIR TURNED BACK ON.PIH(1) CLR PIR
  3189						STOP^
  3190	033164	254 04 0 00 033165 		HALT	.+1
  3191	033165	320 00 0 00 033166 		JUMP	.+1
  3192									^
  3193					^
  3194			000010			ZZ=ZZ/2
  3195			004000			YY=YY/2
  3196
  3197
  3198						OFFPIR	ZZ,YY^
  3199						CLEAN^
  3200	033166	7 000 20 0 00 634440 		CONO	634440
  3201	033167	7 004 20 0 00 010000 		CONO	PI,10000
  3202									^
  3203	033170	7 004 20 0 00 004210 		CONO	PI,PIREQ+ACT+ZZ	;SETS PIH. THEN CLR
  3204	033171	254 10 0 00 033172 		JRST 10,.+1		;PIR TURNED BACK ON
  3205	033172	7 004 30 0 00 004000 		CONSZ PI,YY		;PIR TURNED BACK ON.PIH(1) CLR PIR
  3206						STOP^
  3207	033173	254 04 0 00 033174 		HALT	.+1
  3208	033174	320 00 0 00 033175 		JUMP	.+1
  3209									^
  3210					^
  3211			000004			ZZ=ZZ/2
  3212			002000			YY=YY/2
  3213
  3214
  3215						OFFPIR	ZZ,YY^
  3216						CLEAN^
  3217	033175	7 000 20 0 00 634440 		CONO	634440
  3218	033176	7 004 20 0 00 010000 		CONO	PI,10000
  3219									^
  3220	033177	7 004 20 0 00 004204 		CONO	PI,PIREQ+ACT+ZZ	;SETS PIH. THEN CLR
  3221	033200	254 10 0 00 033201 		JRST 10,.+1		;PIR TURNED BACK ON
  3222	033201	7 004 30 0 00 002000 		CONSZ PI,YY		;PIR TURNED BACK ON.PIH(1) CLR PIR
  3223						STOP^
  3224	033202	254 04 0 00 033203 		HALT	.+1
  3225	033203	320 00 0 00 033204 		JUMP	.+1
  3226									^
  3227					^
  3228			000002			ZZ=ZZ/2
  3229			001000			YY=YY/2
  3230
  3231
  3232						OFFPIR	ZZ,YY^
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 32-2
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0081

  3233						CLEAN^
  3234	033204	7 000 20 0 00 634440 		CONO	634440
  3235	033205	7 004 20 0 00 010000 		CONO	PI,10000
  3236									^
  3237	033206	7 004 20 0 00 004202 		CONO	PI,PIREQ+ACT+ZZ	;SETS PIH. THEN CLR
  3238	033207	254 10 0 00 033210 		JRST 10,.+1		;PIR TURNED BACK ON
  3239	033210	7 004 30 0 00 001000 		CONSZ PI,YY		;PIR TURNED BACK ON.PIH(1) CLR PIR
  3240						STOP^
  3241	033211	254 04 0 00 033212 		HALT	.+1
  3242	033212	320 00 0 00 033213 		JUMP	.+1
  3243									^
  3244					^
  3245			000001			ZZ=ZZ/2
  3246			000400			YY=YY/2
  3247
  3248
  3249						OFFPIR	ZZ,YY^
  3250						CLEAN^
  3251	033213	7 000 20 0 00 634440 		CONO	634440
  3252	033214	7 004 20 0 00 010000 		CONO	PI,10000
  3253									^
  3254	033215	7 004 20 0 00 004201 		CONO	PI,PIREQ+ACT+ZZ	;SETS PIH. THEN CLR
  3255	033216	254 10 0 00 033217 		JRST 10,.+1		;PIR TURNED BACK ON
  3256	033217	7 004 30 0 00 000400 		CONSZ PI,YY		;PIR TURNED BACK ON.PIH(1) CLR PIR
  3257						STOP^
  3258	033220	254 04 0 00 033221 		HALT	.+1
  3259	033221	320 00 0 00 033222 		JUMP	.+1
  3260									^
  3261					^
  3262			000000			ZZ=ZZ/2
  3263			000200			YY=YY/2
  3264
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 33
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0082

  3265					DEFINE	TSTREQ	(A)<
  3266						CLEAN			;TEST ABILITY OF HOLD TO PREVENT INTERRUPT
  3267						CONO PI,ACT+PIREQ+A	;INTERRUPT SETS PIH IF SECOND
  3268						SETZ			;INTERRUPT OCCURED PIH (0)
  3269						CONO	PI,ACT+PIREQ+A	;FAILED TO INHIBIT PIREQ
  3270						SKIPE			;SEE BOTTOM OF PI2 PRINT
  3271						STOP
  3272					>
  3273
  3274						BLURB^
  3275					;CORE LOCATIONS 40 TO 60 CONTAIN A "MOVEI, ADDRESS"
  3276					;THEREFORE IF A INTERRUPT OCCURES THE MOVEI WILL
  3277					;STORE IN LOCATION ZERO THE ADDRESS OF THE EXECUTED
  3278					;INSTRUCTION
  3279					^
  3280			000100		ZZ=100
  3281					MOD86:	REPEAT	7,<
  3282						TSTREQ	ZZ
  3283						ZZ=ZZ/2
  3284					>
  3285
  3286						TSTREQ	ZZ^
  3287						CLEAN			^
  3288	033222	7 000 20 0 00 634440 		CONO	634440
  3289	033223	7 004 20 0 00 010000 		CONO	PI,10000
  3290									^;TEST ABILITY OF HOLD TO PREVENT INTERRUPT
  3291	033224	7 004 20 0 00 004300 		CONO PI,ACT+PIREQ+ZZ	;INTERRUPT SETS PIH IF SECOND
  3292	033225	400 00 0 00 000000 		SETZ			;INTERRUPT OCCURED PIH (0)
  3293	033226	7 004 20 0 00 004300 		CONO	PI,ACT+PIREQ+ZZ	;FAILED TO INHIBIT PIREQ
  3294	033227	332 00 0 00 000000 		SKIPE			;SEE BOTTOM OF PI2 PRINT
  3295						STOP^
  3296	033230	254 04 0 00 033231 		HALT	.+1
  3297	033231	320 00 0 00 033232 		JUMP	.+1
  3298									^
  3299					^
  3300			000040			ZZ=ZZ/2
  3301
  3302
  3303						TSTREQ	ZZ^
  3304						CLEAN			^
  3305	033232	7 000 20 0 00 634440 		CONO	634440
  3306	033233	7 004 20 0 00 010000 		CONO	PI,10000
  3307									^;TEST ABILITY OF HOLD TO PREVENT INTERRUPT
  3308	033234	7 004 20 0 00 004240 		CONO PI,ACT+PIREQ+ZZ	;INTERRUPT SETS PIH IF SECOND
  3309	033235	400 00 0 00 000000 		SETZ			;INTERRUPT OCCURED PIH (0)
  3310	033236	7 004 20 0 00 004240 		CONO	PI,ACT+PIREQ+ZZ	;FAILED TO INHIBIT PIREQ
  3311	033237	332 00 0 00 000000 		SKIPE			;SEE BOTTOM OF PI2 PRINT
  3312						STOP^
  3313	033240	254 04 0 00 033241 		HALT	.+1
  3314	033241	320 00 0 00 033242 		JUMP	.+1
  3315									^
  3316					^
  3317			000020			ZZ=ZZ/2
  3318
  3319
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 33-1
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0083

  3320						TSTREQ	ZZ^
  3321						CLEAN			^
  3322	033242	7 000 20 0 00 634440 		CONO	634440
  3323	033243	7 004 20 0 00 010000 		CONO	PI,10000
  3324									^;TEST ABILITY OF HOLD TO PREVENT INTERRUPT
  3325	033244	7 004 20 0 00 004220 		CONO PI,ACT+PIREQ+ZZ	;INTERRUPT SETS PIH IF SECOND
  3326	033245	400 00 0 00 000000 		SETZ			;INTERRUPT OCCURED PIH (0)
  3327	033246	7 004 20 0 00 004220 		CONO	PI,ACT+PIREQ+ZZ	;FAILED TO INHIBIT PIREQ
  3328	033247	332 00 0 00 000000 		SKIPE			;SEE BOTTOM OF PI2 PRINT
  3329						STOP^
  3330	033250	254 04 0 00 033251 		HALT	.+1
  3331	033251	320 00 0 00 033252 		JUMP	.+1
  3332									^
  3333					^
  3334			000010			ZZ=ZZ/2
  3335
  3336
  3337						TSTREQ	ZZ^
  3338						CLEAN			^
  3339	033252	7 000 20 0 00 634440 		CONO	634440
  3340	033253	7 004 20 0 00 010000 		CONO	PI,10000
  3341									^;TEST ABILITY OF HOLD TO PREVENT INTERRUPT
  3342	033254	7 004 20 0 00 004210 		CONO PI,ACT+PIREQ+ZZ	;INTERRUPT SETS PIH IF SECOND
  3343	033255	400 00 0 00 000000 		SETZ			;INTERRUPT OCCURED PIH (0)
  3344	033256	7 004 20 0 00 004210 		CONO	PI,ACT+PIREQ+ZZ	;FAILED TO INHIBIT PIREQ
  3345	033257	332 00 0 00 000000 		SKIPE			;SEE BOTTOM OF PI2 PRINT
  3346						STOP^
  3347	033260	254 04 0 00 033261 		HALT	.+1
  3348	033261	320 00 0 00 033262 		JUMP	.+1
  3349									^
  3350					^
  3351			000004			ZZ=ZZ/2
  3352
  3353
  3354						TSTREQ	ZZ^
  3355						CLEAN			^
  3356	033262	7 000 20 0 00 634440 		CONO	634440
  3357	033263	7 004 20 0 00 010000 		CONO	PI,10000
  3358									^;TEST ABILITY OF HOLD TO PREVENT INTERRUPT
  3359	033264	7 004 20 0 00 004204 		CONO PI,ACT+PIREQ+ZZ	;INTERRUPT SETS PIH IF SECOND
  3360	033265	400 00 0 00 000000 		SETZ			;INTERRUPT OCCURED PIH (0)
  3361	033266	7 004 20 0 00 004204 		CONO	PI,ACT+PIREQ+ZZ	;FAILED TO INHIBIT PIREQ
  3362	033267	332 00 0 00 000000 		SKIPE			;SEE BOTTOM OF PI2 PRINT
  3363						STOP^
  3364	033270	254 04 0 00 033271 		HALT	.+1
  3365	033271	320 00 0 00 033272 		JUMP	.+1
  3366									^
  3367					^
  3368			000002			ZZ=ZZ/2
  3369
  3370
  3371						TSTREQ	ZZ^
  3372						CLEAN			^
  3373	033272	7 000 20 0 00 634440 		CONO	634440
  3374	033273	7 004 20 0 00 010000 		CONO	PI,10000
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 33-2
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0084

  3375									^;TEST ABILITY OF HOLD TO PREVENT INTERRUPT
  3376	033274	7 004 20 0 00 004202 		CONO PI,ACT+PIREQ+ZZ	;INTERRUPT SETS PIH IF SECOND
  3377	033275	400 00 0 00 000000 		SETZ			;INTERRUPT OCCURED PIH (0)
  3378	033276	7 004 20 0 00 004202 		CONO	PI,ACT+PIREQ+ZZ	;FAILED TO INHIBIT PIREQ
  3379	033277	332 00 0 00 000000 		SKIPE			;SEE BOTTOM OF PI2 PRINT
  3380						STOP^
  3381	033300	254 04 0 00 033301 		HALT	.+1
  3382	033301	320 00 0 00 033302 		JUMP	.+1
  3383									^
  3384					^
  3385			000001			ZZ=ZZ/2
  3386
  3387
  3388						TSTREQ	ZZ^
  3389						CLEAN			^
  3390	033302	7 000 20 0 00 634440 		CONO	634440
  3391	033303	7 004 20 0 00 010000 		CONO	PI,10000
  3392									^;TEST ABILITY OF HOLD TO PREVENT INTERRUPT
  3393	033304	7 004 20 0 00 004201 		CONO PI,ACT+PIREQ+ZZ	;INTERRUPT SETS PIH IF SECOND
  3394	033305	400 00 0 00 000000 		SETZ			;INTERRUPT OCCURED PIH (0)
  3395	033306	7 004 20 0 00 004201 		CONO	PI,ACT+PIREQ+ZZ	;FAILED TO INHIBIT PIREQ
  3396	033307	332 00 0 00 000000 		SKIPE			;SEE BOTTOM OF PI2 PRINT
  3397						STOP^
  3398	033310	254 04 0 00 033311 		HALT	.+1
  3399	033311	320 00 0 00 033312 		JUMP	.+1
  3400									^
  3401					^
  3402			000000			ZZ=ZZ/2
  3403
  3404
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 34
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0085

  3405					DEFINE	PIHOK	(A,B)<
  3406						CLEAN
  3407						CONO	PI,ACT+PIREQ+A	;INTERRUPT SHOULD SET HOLD(PIH)
  3408						SETZ			;IF SECOND INTERRUPT OCCURS PIH
  3409						CONO	PI,ACT+PIREQ+B	;FAILED TO PREVENT PIOK THUS
  3410						SKIPE			;ALLOWING INTERRUPT. SEE BOTTOM
  3411						STOP			;OF PI2 PRINT
  3412					>
  3413						BLURB^
  3414					;CORE LOCATIONS 40 TO 60 CONTAIN A "MOVEI, ADDRESS"
  3415					;THEREFORE IF A INTERRUPT OCCURES THE MOVEI WILL
  3416					;STORE IN LOCATION ZERO THE ADDRESS OF THE EXECUTED
  3417					;INSTRUCTION
  3418					^
  3419
  3420			000100		ZZ=100
  3421			000040		YY=40				;TEST PRIORITY CHAIN
  3422					MOD87:	REPEAT	6,<
  3423						PIHOK	ZZ,YY
  3424						ZZ=ZZ/2
  3425						YY=YY/2
  3426					>
  3427
  3428						PIHOK	ZZ,YY^
  3429						CLEAN^
  3430	033312	7 000 20 0 00 634440 		CONO	634440
  3431	033313	7 004 20 0 00 010000 		CONO	PI,10000
  3432									^
  3433	033314	7 004 20 0 00 004300 		CONO	PI,ACT+PIREQ+ZZ	;INTERRUPT SHOULD SET HOLD(PIH)
  3434	033315	400 00 0 00 000000 		SETZ			;IF SECOND INTERRUPT OCCURS PIH
  3435	033316	7 004 20 0 00 004240 		CONO	PI,ACT+PIREQ+YY	;FAILED TO PREVENT PIOK THUS
  3436	033317	332 00 0 00 000000 		SKIPE			;ALLOWING INTERRUPT. SEE BOTTOM
  3437						STOP			^
  3438	033320	254 04 0 00 033321 		HALT	.+1
  3439	033321	320 00 0 00 033322 		JUMP	.+1
  3440									^;OF PI2 PRINT
  3441					^
  3442			000040			ZZ=ZZ/2
  3443			000020			YY=YY/2
  3444
  3445
  3446						PIHOK	ZZ,YY^
  3447						CLEAN^
  3448	033322	7 000 20 0 00 634440 		CONO	634440
  3449	033323	7 004 20 0 00 010000 		CONO	PI,10000
  3450									^
  3451	033324	7 004 20 0 00 004240 		CONO	PI,ACT+PIREQ+ZZ	;INTERRUPT SHOULD SET HOLD(PIH)
  3452	033325	400 00 0 00 000000 		SETZ			;IF SECOND INTERRUPT OCCURS PIH
  3453	033326	7 004 20 0 00 004220 		CONO	PI,ACT+PIREQ+YY	;FAILED TO PREVENT PIOK THUS
  3454	033327	332 00 0 00 000000 		SKIPE			;ALLOWING INTERRUPT. SEE BOTTOM
  3455						STOP			^
  3456	033330	254 04 0 00 033331 		HALT	.+1
  3457	033331	320 00 0 00 033332 		JUMP	.+1
  3458									^;OF PI2 PRINT
  3459					^
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 34-1
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0086

  3460			000020			ZZ=ZZ/2
  3461			000010			YY=YY/2
  3462
  3463
  3464						PIHOK	ZZ,YY^
  3465						CLEAN^
  3466	033332	7 000 20 0 00 634440 		CONO	634440
  3467	033333	7 004 20 0 00 010000 		CONO	PI,10000
  3468									^
  3469	033334	7 004 20 0 00 004220 		CONO	PI,ACT+PIREQ+ZZ	;INTERRUPT SHOULD SET HOLD(PIH)
  3470	033335	400 00 0 00 000000 		SETZ			;IF SECOND INTERRUPT OCCURS PIH
  3471	033336	7 004 20 0 00 004210 		CONO	PI,ACT+PIREQ+YY	;FAILED TO PREVENT PIOK THUS
  3472	033337	332 00 0 00 000000 		SKIPE			;ALLOWING INTERRUPT. SEE BOTTOM
  3473						STOP			^
  3474	033340	254 04 0 00 033341 		HALT	.+1
  3475	033341	320 00 0 00 033342 		JUMP	.+1
  3476									^;OF PI2 PRINT
  3477					^
  3478			000010			ZZ=ZZ/2
  3479			000004			YY=YY/2
  3480
  3481
  3482						PIHOK	ZZ,YY^
  3483						CLEAN^
  3484	033342	7 000 20 0 00 634440 		CONO	634440
  3485	033343	7 004 20 0 00 010000 		CONO	PI,10000
  3486									^
  3487	033344	7 004 20 0 00 004210 		CONO	PI,ACT+PIREQ+ZZ	;INTERRUPT SHOULD SET HOLD(PIH)
  3488	033345	400 00 0 00 000000 		SETZ			;IF SECOND INTERRUPT OCCURS PIH
  3489	033346	7 004 20 0 00 004204 		CONO	PI,ACT+PIREQ+YY	;FAILED TO PREVENT PIOK THUS
  3490	033347	332 00 0 00 000000 		SKIPE			;ALLOWING INTERRUPT. SEE BOTTOM
  3491						STOP			^
  3492	033350	254 04 0 00 033351 		HALT	.+1
  3493	033351	320 00 0 00 033352 		JUMP	.+1
  3494									^;OF PI2 PRINT
  3495					^
  3496			000004			ZZ=ZZ/2
  3497			000002			YY=YY/2
  3498
  3499
  3500						PIHOK	ZZ,YY^
  3501						CLEAN^
  3502	033352	7 000 20 0 00 634440 		CONO	634440
  3503	033353	7 004 20 0 00 010000 		CONO	PI,10000
  3504									^
  3505	033354	7 004 20 0 00 004204 		CONO	PI,ACT+PIREQ+ZZ	;INTERRUPT SHOULD SET HOLD(PIH)
  3506	033355	400 00 0 00 000000 		SETZ			;IF SECOND INTERRUPT OCCURS PIH
  3507	033356	7 004 20 0 00 004202 		CONO	PI,ACT+PIREQ+YY	;FAILED TO PREVENT PIOK THUS
  3508	033357	332 00 0 00 000000 		SKIPE			;ALLOWING INTERRUPT. SEE BOTTOM
  3509						STOP			^
  3510	033360	254 04 0 00 033361 		HALT	.+1
  3511	033361	320 00 0 00 033362 		JUMP	.+1
  3512									^;OF PI2 PRINT
  3513					^
  3514			000002			ZZ=ZZ/2
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 34-2
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0087

  3515			000001			YY=YY/2
  3516
  3517
  3518						PIHOK	ZZ,YY^
  3519						CLEAN^
  3520	033362	7 000 20 0 00 634440 		CONO	634440
  3521	033363	7 004 20 0 00 010000 		CONO	PI,10000
  3522									^
  3523	033364	7 004 20 0 00 004202 		CONO	PI,ACT+PIREQ+ZZ	;INTERRUPT SHOULD SET HOLD(PIH)
  3524	033365	400 00 0 00 000000 		SETZ			;IF SECOND INTERRUPT OCCURS PIH
  3525	033366	7 004 20 0 00 004201 		CONO	PI,ACT+PIREQ+YY	;FAILED TO PREVENT PIOK THUS
  3526	033367	332 00 0 00 000000 		SKIPE			;ALLOWING INTERRUPT. SEE BOTTOM
  3527						STOP			^
  3528	033370	254 04 0 00 033371 		HALT	.+1
  3529	033371	320 00 0 00 033372 		JUMP	.+1
  3530									^;OF PI2 PRINT
  3531					^
  3532			000001			ZZ=ZZ/2
  3533			000000			YY=YY/2
  3534
  3535
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 35
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0088

  3536					DEFINE	SETPIH	(A,B)<
  3537						CLEAN			;CHECK REQ AND PIH FLOPS
  3538						CONO	PI,ACT+PIREQ+A	;CAUSE INTERRUPT, SHOULD SET
  3539						CONSO	PI,B		;HOLD (PIH) SEE PI2 PRINT
  3540						STOP			;BOTH PIR+PIH SHOULD BE SET
  3541					>
  3542	033372				MOD88:	SETPIH	100,40000	^;CH 1
  3543
  3544						CLEAN			^
  3545	033372	7 000 20 0 00 634440 		CONO	634440
  3546	033373	7 004 20 0 00 010000 		CONO	PI,10000
  3547									^;CHECK REQ AND PIH FLOPS
  3548	033374	7 004 20 0 00 004300 		CONO	PI,ACT+PIREQ+100	;CAUSE INTERRUPT, SHOULD SET
  3549	033375	7 004 34 0 00 040000 		CONSO	PI,40000		;HOLD (PIH) SEE PI2 PRINT
  3550						STOP			^
  3551	033376	254 04 0 00 033377 		HALT	.+1
  3552	033377	320 00 0 00 033400 		JUMP	.+1
  3553									^;BOTH PIR+PIH SHOULD BE SET
  3554
  3555						SETPIH	40,20000	^;CH 2
  3556
  3557						CLEAN			^
  3558	033400	7 000 20 0 00 634440 		CONO	634440
  3559	033401	7 004 20 0 00 010000 		CONO	PI,10000
  3560									^;CHECK REQ AND PIH FLOPS
  3561	033402	7 004 20 0 00 004240 		CONO	PI,ACT+PIREQ+40	;CAUSE INTERRUPT, SHOULD SET
  3562	033403	7 004 34 0 00 020000 		CONSO	PI,20000		;HOLD (PIH) SEE PI2 PRINT
  3563						STOP			^
  3564	033404	254 04 0 00 033405 		HALT	.+1
  3565	033405	320 00 0 00 033406 		JUMP	.+1
  3566									^;BOTH PIR+PIH SHOULD BE SET
  3567
  3568						CHANEL	MOD90^
  3569	033406	336 00 0 00 036672 		SKIPN	PI7SYS#
  3570	033407	254 00 0 00 033446 		JRST	MOD90
  3571									^
  3572	033410				MOD89:	SETPIH	20,10000	^;CH 3
  3573
  3574						CLEAN			^
  3575	033410	7 000 20 0 00 634440 		CONO	634440
  3576	033411	7 004 20 0 00 010000 		CONO	PI,10000
  3577									^;CHECK REQ AND PIH FLOPS
  3578	033412	7 004 20 0 00 004220 		CONO	PI,ACT+PIREQ+20	;CAUSE INTERRUPT, SHOULD SET
  3579	033413	7 004 34 0 00 010000 		CONSO	PI,10000		;HOLD (PIH) SEE PI2 PRINT
  3580						STOP			^
  3581	033414	254 04 0 00 033415 		HALT	.+1
  3582	033415	320 00 0 00 033416 		JUMP	.+1
  3583									^;BOTH PIR+PIH SHOULD BE SET
  3584
  3585						SETPIH	10,4000		^;CH 4
  3586
  3587						CLEAN			^
  3588	033416	7 000 20 0 00 634440 		CONO	634440
  3589	033417	7 004 20 0 00 010000 		CONO	PI,10000
  3590									^;CHECK REQ AND PIH FLOPS
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 35-1
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0089

  3591	033420	7 004 20 0 00 004210 		CONO	PI,ACT+PIREQ+10	;CAUSE INTERRUPT, SHOULD SET
  3592	033421	7 004 34 0 00 004000 		CONSO	PI,4000		;HOLD (PIH) SEE PI2 PRINT
  3593						STOP			^
  3594	033422	254 04 0 00 033423 		HALT	.+1
  3595	033423	320 00 0 00 033424 		JUMP	.+1
  3596									^;BOTH PIR+PIH SHOULD BE SET
  3597
  3598						SETPIH	4,2000		^;CH 5
  3599
  3600						CLEAN			^
  3601	033424	7 000 20 0 00 634440 		CONO	634440
  3602	033425	7 004 20 0 00 010000 		CONO	PI,10000
  3603									^;CHECK REQ AND PIH FLOPS
  3604	033426	7 004 20 0 00 004204 		CONO	PI,ACT+PIREQ+4	;CAUSE INTERRUPT, SHOULD SET
  3605	033427	7 004 34 0 00 002000 		CONSO	PI,2000		;HOLD (PIH) SEE PI2 PRINT
  3606						STOP			^
  3607	033430	254 04 0 00 033431 		HALT	.+1
  3608	033431	320 00 0 00 033432 		JUMP	.+1
  3609									^;BOTH PIR+PIH SHOULD BE SET
  3610
  3611						SETPIH	2,1000		^;CH 6
  3612
  3613						CLEAN			^
  3614	033432	7 000 20 0 00 634440 		CONO	634440
  3615	033433	7 004 20 0 00 010000 		CONO	PI,10000
  3616									^;CHECK REQ AND PIH FLOPS
  3617	033434	7 004 20 0 00 004202 		CONO	PI,ACT+PIREQ+2	;CAUSE INTERRUPT, SHOULD SET
  3618	033435	7 004 34 0 00 001000 		CONSO	PI,1000		;HOLD (PIH) SEE PI2 PRINT
  3619						STOP			^
  3620	033436	254 04 0 00 033437 		HALT	.+1
  3621	033437	320 00 0 00 033440 		JUMP	.+1
  3622									^;BOTH PIR+PIH SHOULD BE SET
  3623
  3624						SETPIH	1,400		^;CH 7
  3625
  3626						CLEAN			^
  3627	033440	7 000 20 0 00 634440 		CONO	634440
  3628	033441	7 004 20 0 00 010000 		CONO	PI,10000
  3629									^;CHECK REQ AND PIH FLOPS
  3630	033442	7 004 20 0 00 004201 		CONO	PI,ACT+PIREQ+1	;CAUSE INTERRUPT, SHOULD SET
  3631	033443	7 004 34 0 00 000400 		CONSO	PI,400		;HOLD (PIH) SEE PI2 PRINT
  3632						STOP			^
  3633	033444	254 04 0 00 033445 		HALT	.+1
  3634	033445	320 00 0 00 033446 		JUMP	.+1
  3635									^;BOTH PIR+PIH SHOULD BE SET
  3636
  3637	033446				MOD90:	CLEAN^
  3638	033446	7 000 20 0 00 634440 		CONO	634440
  3639	033447	7 004 20 0 00 010000 		CONO	PI,10000
  3640									^
  3641
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 36
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0090

  3642					DEFINE	PIADDR	(A,B)<
  3643						CLEAN			;CHECK ABILITY TO INTERRUPT TO
  3644						SETZ			;LOC 40-60 SHOULD SEE MOVEI
  3645						CONO	PI,ACT+PIREQ+A	;ACTIVATE AN INTERRUPT. IF C(0)=0
  3646						CAIE	B		;NO INTERRUPT OCCURED, C(0)=ADDR
  3647						STOP			;OF INTERRUPT EXECUTED
  3648					>
  3649
  3650						BLURB^
  3651					;CORE LOCATIONS 40 TO 60 CONTAIN A "MOVEI, ADDRESS"
  3652					;THEREFORE IF A INTERRUPT OCCURES THE MOVEI WILL
  3653					;STORE IN LOCATION ZERO THE ADDRESS OF THE EXECUTED
  3654					;INSTRUCTION
  3655					^
  3656	033450				MOD91:	PIADDR	100,42		^;CH 1 TO LOC 42
  3657
  3658						CLEAN			^
  3659	033450	7 000 20 0 00 634440 		CONO	634440
  3660	033451	7 004 20 0 00 010000 		CONO	PI,10000
  3661									^;CHECK ABILITY TO INTERRUPT TO
  3662	033452	400 00 0 00 000000 		SETZ			;LOC 40-60 SHOULD SEE MOVEI
  3663	033453	7 004 20 0 00 004300 		CONO	PI,ACT+PIREQ+100	;ACTIVATE AN INTERRUPT. IF C(0)=0
  3664	033454	302 00 0 00 000042 		CAIE	42		;NO INTERRUPT OCCURED, C(0)=ADDR
  3665						STOP			^
  3666	033455	254 04 0 00 033456 		HALT	.+1
  3667	033456	320 00 0 00 033457 		JUMP	.+1
  3668									^;OF INTERRUPT EXECUTED
  3669
  3670						PIADDR	40,44		^;CH 2 TO LOC 44
  3671
  3672						CLEAN			^
  3673	033457	7 000 20 0 00 634440 		CONO	634440
  3674	033460	7 004 20 0 00 010000 		CONO	PI,10000
  3675									^;CHECK ABILITY TO INTERRUPT TO
  3676	033461	400 00 0 00 000000 		SETZ			;LOC 40-60 SHOULD SEE MOVEI
  3677	033462	7 004 20 0 00 004240 		CONO	PI,ACT+PIREQ+40	;ACTIVATE AN INTERRUPT. IF C(0)=0
  3678	033463	302 00 0 00 000044 		CAIE	44		;NO INTERRUPT OCCURED, C(0)=ADDR
  3679						STOP			^
  3680	033464	254 04 0 00 033465 		HALT	.+1
  3681	033465	320 00 0 00 033466 		JUMP	.+1
  3682									^;OF INTERRUPT EXECUTED
  3683
  3684						CHANEL	MOD93^
  3685	033466	336 00 0 00 036672 		SKIPN	PI7SYS#
  3686	033467	254 00 0 00 033533 		JRST	MOD93
  3687									^
  3688	033470				MOD92:	PIADDR	20,46		^;CH 3 TO LOC 46
  3689
  3690						CLEAN			^
  3691	033470	7 000 20 0 00 634440 		CONO	634440
  3692	033471	7 004 20 0 00 010000 		CONO	PI,10000
  3693									^;CHECK ABILITY TO INTERRUPT TO
  3694	033472	400 00 0 00 000000 		SETZ			;LOC 40-60 SHOULD SEE MOVEI
  3695	033473	7 004 20 0 00 004220 		CONO	PI,ACT+PIREQ+20	;ACTIVATE AN INTERRUPT. IF C(0)=0
  3696	033474	302 00 0 00 000046 		CAIE	46		;NO INTERRUPT OCCURED, C(0)=ADDR
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 36-1
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0091

  3697						STOP			^
  3698	033475	254 04 0 00 033476 		HALT	.+1
  3699	033476	320 00 0 00 033477 		JUMP	.+1
  3700									^;OF INTERRUPT EXECUTED
  3701
  3702						PIADDR	10,50		^;CH 4 TO LOC 50
  3703
  3704						CLEAN			^
  3705	033477	7 000 20 0 00 634440 		CONO	634440
  3706	033500	7 004 20 0 00 010000 		CONO	PI,10000
  3707									^;CHECK ABILITY TO INTERRUPT TO
  3708	033501	400 00 0 00 000000 		SETZ			;LOC 40-60 SHOULD SEE MOVEI
  3709	033502	7 004 20 0 00 004210 		CONO	PI,ACT+PIREQ+10	;ACTIVATE AN INTERRUPT. IF C(0)=0
  3710	033503	302 00 0 00 000050 		CAIE	50		;NO INTERRUPT OCCURED, C(0)=ADDR
  3711						STOP			^
  3712	033504	254 04 0 00 033505 		HALT	.+1
  3713	033505	320 00 0 00 033506 		JUMP	.+1
  3714									^;OF INTERRUPT EXECUTED
  3715
  3716						PIADDR	4,52		^;CH 5 TO LOC 52
  3717
  3718						CLEAN			^
  3719	033506	7 000 20 0 00 634440 		CONO	634440
  3720	033507	7 004 20 0 00 010000 		CONO	PI,10000
  3721									^;CHECK ABILITY TO INTERRUPT TO
  3722	033510	400 00 0 00 000000 		SETZ			;LOC 40-60 SHOULD SEE MOVEI
  3723	033511	7 004 20 0 00 004204 		CONO	PI,ACT+PIREQ+4	;ACTIVATE AN INTERRUPT. IF C(0)=0
  3724	033512	302 00 0 00 000052 		CAIE	52		;NO INTERRUPT OCCURED, C(0)=ADDR
  3725						STOP			^
  3726	033513	254 04 0 00 033514 		HALT	.+1
  3727	033514	320 00 0 00 033515 		JUMP	.+1
  3728									^;OF INTERRUPT EXECUTED
  3729
  3730						PIADDR	2,54		^;CH 6 TO LOC 54
  3731
  3732						CLEAN			^
  3733	033515	7 000 20 0 00 634440 		CONO	634440
  3734	033516	7 004 20 0 00 010000 		CONO	PI,10000
  3735									^;CHECK ABILITY TO INTERRUPT TO
  3736	033517	400 00 0 00 000000 		SETZ			;LOC 40-60 SHOULD SEE MOVEI
  3737	033520	7 004 20 0 00 004202 		CONO	PI,ACT+PIREQ+2	;ACTIVATE AN INTERRUPT. IF C(0)=0
  3738	033521	302 00 0 00 000054 		CAIE	54		;NO INTERRUPT OCCURED, C(0)=ADDR
  3739						STOP			^
  3740	033522	254 04 0 00 033523 		HALT	.+1
  3741	033523	320 00 0 00 033524 		JUMP	.+1
  3742									^;OF INTERRUPT EXECUTED
  3743
  3744						PIADDR	1,56		^;CH 7 TO LOC 56
  3745
  3746						CLEAN			^
  3747	033524	7 000 20 0 00 634440 		CONO	634440
  3748	033525	7 004 20 0 00 010000 		CONO	PI,10000
  3749									^;CHECK ABILITY TO INTERRUPT TO
  3750	033526	400 00 0 00 000000 		SETZ			;LOC 40-60 SHOULD SEE MOVEI
  3751	033527	7 004 20 0 00 004201 		CONO	PI,ACT+PIREQ+1	;ACTIVATE AN INTERRUPT. IF C(0)=0
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 36-2
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0092

  3752	033530	302 00 0 00 000056 		CAIE	56		;NO INTERRUPT OCCURED, C(0)=ADDR
  3753						STOP			^
  3754	033531	254 04 0 00 033532 		HALT	.+1
  3755	033532	320 00 0 00 033533 		JUMP	.+1
  3756									^;OF INTERRUPT EXECUTED
  3757
  3758
  3759	033533				MOD93:	CLEAN^
  3760	033533	7 000 20 0 00 634440 		CONO	634440
  3761	033534	7 004 20 0 00 010000 		CONO	PI,10000
  3762									^
  3763
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 37
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0093

  3764					DEFINE	TWOPIR	(A,B)<
  3765						CLEAN			;CK PIR(0) ABILITY TO PREVENT INTERRUPT
  3766						SETZ			;LOWER CHANNEL SHOULD BE INHIBIT
  3767						CONO	PI,ACT+PIREQ+A	;TURN ON 2 PIR FLOPS. CHECK INT LOC
  3768						CAIN B			;PIR (0) INPUT TO PIOK
  3769						STOP
  3770					>
  3771						BLURB^
  3772					;CORE LOCATIONS 40 TO 60 CONTAIN A "MOVEI, ADDRESS"
  3773					;THEREFORE IF A INTERRUPT OCCURES THE MOVEI WILL
  3774					;STORE IN LOCATION ZERO THE ADDRESS OF THE EXECUTED
  3775					;INSTRUCTION
  3776					^
  3777	033535				MOD94:	TWOPIR	100,46		^;CH 1+2
  3778
  3779						CLEAN			^
  3780	033535	7 000 20 0 00 634440 		CONO	634440
  3781	033536	7 004 20 0 00 010000 		CONO	PI,10000
  3782									^;CK PIR(0) ABILITY TO PREVENT INTERRUPT
  3783	033537	400 00 0 00 000000 		SETZ			;LOWER CHANNEL SHOULD BE INHIBIT
  3784	033540	7 004 20 0 00 004300 		CONO	PI,ACT+PIREQ+100	;TURN ON 2 PIR FLOPS. CHECK INT LOC
  3785	033541	306 00 0 00 000046 		CAIN 46			;PIR (0) INPUT TO PIOK
  3786						STOP^
  3787	033542	254 04 0 00 033543 		HALT	.+1
  3788	033543	320 00 0 00 033544 		JUMP	.+1
  3789									^
  3790
  3791						TWOPIR	40,46		^;CH 2+3
  3792
  3793						CLEAN			^
  3794	033544	7 000 20 0 00 634440 		CONO	634440
  3795	033545	7 004 20 0 00 010000 		CONO	PI,10000
  3796									^;CK PIR(0) ABILITY TO PREVENT INTERRUPT
  3797	033546	400 00 0 00 000000 		SETZ			;LOWER CHANNEL SHOULD BE INHIBIT
  3798	033547	7 004 20 0 00 004240 		CONO	PI,ACT+PIREQ+40	;TURN ON 2 PIR FLOPS. CHECK INT LOC
  3799	033550	306 00 0 00 000046 		CAIN 46			;PIR (0) INPUT TO PIOK
  3800						STOP^
  3801	033551	254 04 0 00 033552 		HALT	.+1
  3802	033552	320 00 0 00 033553 		JUMP	.+1
  3803									^
  3804
  3805						CHANEL MOD96^
  3806	033553	336 00 0 00 036672 		SKIPN	PI7SYS#
  3807	033554	254 00 0 00 033611 		JRST	MOD96
  3808									^
  3809	033555				MOD95:	TWOPIR	20,56		^;CH 3+4
  3810
  3811						CLEAN			^
  3812	033555	7 000 20 0 00 634440 		CONO	634440
  3813	033556	7 004 20 0 00 010000 		CONO	PI,10000
  3814									^;CK PIR(0) ABILITY TO PREVENT INTERRUPT
  3815	033557	400 00 0 00 000000 		SETZ			;LOWER CHANNEL SHOULD BE INHIBIT
  3816	033560	7 004 20 0 00 004220 		CONO	PI,ACT+PIREQ+20	;TURN ON 2 PIR FLOPS. CHECK INT LOC
  3817	033561	306 00 0 00 000056 		CAIN 56			;PIR (0) INPUT TO PIOK
  3818						STOP^
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 37-1
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0094

  3819	033562	254 04 0 00 033563 		HALT	.+1
  3820	033563	320 00 0 00 033564 		JUMP	.+1
  3821									^
  3822
  3823						TWOPIR	10,52		^;CH 4+5
  3824
  3825						CLEAN			^
  3826	033564	7 000 20 0 00 634440 		CONO	634440
  3827	033565	7 004 20 0 00 010000 		CONO	PI,10000
  3828									^;CK PIR(0) ABILITY TO PREVENT INTERRUPT
  3829	033566	400 00 0 00 000000 		SETZ			;LOWER CHANNEL SHOULD BE INHIBIT
  3830	033567	7 004 20 0 00 004210 		CONO	PI,ACT+PIREQ+10	;TURN ON 2 PIR FLOPS. CHECK INT LOC
  3831	033570	306 00 0 00 000052 		CAIN 52			;PIR (0) INPUT TO PIOK
  3832						STOP^
  3833	033571	254 04 0 00 033572 		HALT	.+1
  3834	033572	320 00 0 00 033573 		JUMP	.+1
  3835									^
  3836
  3837						TWOPIR	4,56		^;CH 5+6
  3838
  3839						CLEAN			^
  3840	033573	7 000 20 0 00 634440 		CONO	634440
  3841	033574	7 004 20 0 00 010000 		CONO	PI,10000
  3842									^;CK PIR(0) ABILITY TO PREVENT INTERRUPT
  3843	033575	400 00 0 00 000000 		SETZ			;LOWER CHANNEL SHOULD BE INHIBIT
  3844	033576	7 004 20 0 00 004204 		CONO	PI,ACT+PIREQ+4	;TURN ON 2 PIR FLOPS. CHECK INT LOC
  3845	033577	306 00 0 00 000056 		CAIN 56			;PIR (0) INPUT TO PIOK
  3846						STOP^
  3847	033600	254 04 0 00 033601 		HALT	.+1
  3848	033601	320 00 0 00 033602 		JUMP	.+1
  3849									^
  3850
  3851						TWOPIR	2,56		^;CH 6+7
  3852
  3853						CLEAN			^
  3854	033602	7 000 20 0 00 634440 		CONO	634440
  3855	033603	7 004 20 0 00 010000 		CONO	PI,10000
  3856									^;CK PIR(0) ABILITY TO PREVENT INTERRUPT
  3857	033604	400 00 0 00 000000 		SETZ			;LOWER CHANNEL SHOULD BE INHIBIT
  3858	033605	7 004 20 0 00 004202 		CONO	PI,ACT+PIREQ+2	;TURN ON 2 PIR FLOPS. CHECK INT LOC
  3859	033606	306 00 0 00 000056 		CAIN 56			;PIR (0) INPUT TO PIOK
  3860						STOP^
  3861	033607	254 04 0 00 033610 		HALT	.+1
  3862	033610	320 00 0 00 033611 		JUMP	.+1
  3863									^
  3864
  3865	033611				MOD96:	CLEAN^
  3866	033611	7 000 20 0 00 634440 		CONO	634440
  3867	033612	7 004 20 0 00 010000 		CONO	PI,10000
  3868									^
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 38
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0095

  3869					DEFINE	MULPIR	(A,B)<
  3870						CLEAN
  3871						SETZ			;TEST MULTI REQUEST BREAK ON
  3872						CONO	PI,ACT+PIREQ+A	;CORRECT CHANNEL TO CORRECT
  3873						CAIE B			;LOC C(0)=INTERRUPTED ADDR
  3874						STOP
  3875					>
  3876
  3877						BLURB^
  3878					;CORE LOCATIONS 40 TO 60 CONTAIN A "MOVEI, ADDRESS"
  3879					;THEREFORE IF A INTERRUPT OCCURES THE MOVEI WILL
  3880					;STORE IN LOCATION ZERO THE ADDRESS OF THE EXECUTED
  3881					;INSTRUCTION
  3882					^
  3883	033613				MOD97:	MULPIR	100,42^
  3884						CLEAN^
  3885	033613	7 000 20 0 00 634440 		CONO	634440
  3886	033614	7 004 20 0 00 010000 		CONO	PI,10000
  3887									^
  3888	033615	400 00 0 00 000000 		SETZ			;TEST MULTI REQUEST BREAK ON
  3889	033616	7 004 20 0 00 004300 		CONO	PI,ACT+PIREQ+100	;CORRECT CHANNEL TO CORRECT
  3890	033617	302 00 0 00 000042 		CAIE 42			;LOC C(0)=INTERRUPTED ADDR
  3891						STOP^
  3892	033620	254 04 0 00 033621 		HALT	.+1
  3893	033621	320 00 0 00 033622 		JUMP	.+1
  3894									^
  3895					^
  3896						MULPIR	40,44^
  3897						CLEAN^
  3898	033622	7 000 20 0 00 634440 		CONO	634440
  3899	033623	7 004 20 0 00 010000 		CONO	PI,10000
  3900									^
  3901	033624	400 00 0 00 000000 		SETZ			;TEST MULTI REQUEST BREAK ON
  3902	033625	7 004 20 0 00 004240 		CONO	PI,ACT+PIREQ+40	;CORRECT CHANNEL TO CORRECT
  3903	033626	302 00 0 00 000044 		CAIE 44			;LOC C(0)=INTERRUPTED ADDR
  3904						STOP^
  3905	033627	254 04 0 00 033630 		HALT	.+1
  3906	033630	320 00 0 00 033631 		JUMP	.+1
  3907									^
  3908					^
  3909						CHANEL	MOD99^
  3910	033631	336 00 0 00 036672 		SKIPN	PI7SYS#
  3911	033632	254 00 0 00 033676 		JRST	MOD99
  3912									^
  3913	033633				MOD98:	MULPIR	20,46^
  3914						CLEAN^
  3915	033633	7 000 20 0 00 634440 		CONO	634440
  3916	033634	7 004 20 0 00 010000 		CONO	PI,10000
  3917									^
  3918	033635	400 00 0 00 000000 		SETZ			;TEST MULTI REQUEST BREAK ON
  3919	033636	7 004 20 0 00 004220 		CONO	PI,ACT+PIREQ+20	;CORRECT CHANNEL TO CORRECT
  3920	033637	302 00 0 00 000046 		CAIE 46			;LOC C(0)=INTERRUPTED ADDR
  3921						STOP^
  3922	033640	254 04 0 00 033641 		HALT	.+1
  3923	033641	320 00 0 00 033642 		JUMP	.+1
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 38-1
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0096

  3924									^
  3925					^
  3926						MULPIR	10,50^
  3927						CLEAN^
  3928	033642	7 000 20 0 00 634440 		CONO	634440
  3929	033643	7 004 20 0 00 010000 		CONO	PI,10000
  3930									^
  3931	033644	400 00 0 00 000000 		SETZ			;TEST MULTI REQUEST BREAK ON
  3932	033645	7 004 20 0 00 004210 		CONO	PI,ACT+PIREQ+10	;CORRECT CHANNEL TO CORRECT
  3933	033646	302 00 0 00 000050 		CAIE 50			;LOC C(0)=INTERRUPTED ADDR
  3934						STOP^
  3935	033647	254 04 0 00 033650 		HALT	.+1
  3936	033650	320 00 0 00 033651 		JUMP	.+1
  3937									^
  3938					^
  3939						MULPIR	4,52^
  3940						CLEAN^
  3941	033651	7 000 20 0 00 634440 		CONO	634440
  3942	033652	7 004 20 0 00 010000 		CONO	PI,10000
  3943									^
  3944	033653	400 00 0 00 000000 		SETZ			;TEST MULTI REQUEST BREAK ON
  3945	033654	7 004 20 0 00 004204 		CONO	PI,ACT+PIREQ+4	;CORRECT CHANNEL TO CORRECT
  3946	033655	302 00 0 00 000052 		CAIE 52			;LOC C(0)=INTERRUPTED ADDR
  3947						STOP^
  3948	033656	254 04 0 00 033657 		HALT	.+1
  3949	033657	320 00 0 00 033660 		JUMP	.+1
  3950									^
  3951					^
  3952						MULPIR	2,54^
  3953						CLEAN^
  3954	033660	7 000 20 0 00 634440 		CONO	634440
  3955	033661	7 004 20 0 00 010000 		CONO	PI,10000
  3956									^
  3957	033662	400 00 0 00 000000 		SETZ			;TEST MULTI REQUEST BREAK ON
  3958	033663	7 004 20 0 00 004202 		CONO	PI,ACT+PIREQ+2	;CORRECT CHANNEL TO CORRECT
  3959	033664	302 00 0 00 000054 		CAIE 54			;LOC C(0)=INTERRUPTED ADDR
  3960						STOP^
  3961	033665	254 04 0 00 033666 		HALT	.+1
  3962	033666	320 00 0 00 033667 		JUMP	.+1
  3963									^
  3964					^
  3965						MULPIR	1,56^
  3966						CLEAN^
  3967	033667	7 000 20 0 00 634440 		CONO	634440
  3968	033670	7 004 20 0 00 010000 		CONO	PI,10000
  3969									^
  3970	033671	400 00 0 00 000000 		SETZ			;TEST MULTI REQUEST BREAK ON
  3971	033672	7 004 20 0 00 004201 		CONO	PI,ACT+PIREQ+1	;CORRECT CHANNEL TO CORRECT
  3972	033673	302 00 0 00 000056 		CAIE 56			;LOC C(0)=INTERRUPTED ADDR
  3973						STOP^
  3974	033674	254 04 0 00 033675 		HALT	.+1
  3975	033675	320 00 0 00 033676 		JUMP	.+1
  3976									^
  3977					^
  3978	033676				MOD99:	CLEAN^
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 38-2
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0097

  3979	033676	7 000 20 0 00 634440 		CONO	634440
  3980	033677	7 004 20 0 00 010000 		CONO	PI,10000
  3981									^
  3982
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 39
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0098

  3983					DEFINE	JENOK	(A,B)<
  3984						CLEAN
  3985						CONO	PI,ACT+PIREQ+A	;SET THE PIH FLOP THEN REMOVE
  3986						CONO	PI,DACT		;THE PIOK LEVELS VIA NO ACTIVE
  3987						JRST 10,.+1		;RELEASE INTERRUPT SHOULD NOT
  3988						CONSO	PI,B		;EFFECT PIH FLOP UNLESS AND
  3989						STOP
  3990					>
  3991
  3992	033700				MOD100:	JENOK	100,40000	^;PIH 1
  3993
  3994						CLEAN^
  3995	033700	7 000 20 0 00 634440 		CONO	634440
  3996	033701	7 004 20 0 00 010000 		CONO	PI,10000
  3997									^
  3998	033702	7 004 20 0 00 004300 		CONO	PI,ACT+PIREQ+100	;SET THE PIH FLOP THEN REMOVE
  3999	033703	7 004 20 0 00 000400 		CONO	PI,DACT		;THE PIOK LEVELS VIA NO ACTIVE
  4000	033704	254 10 0 00 033705 		JRST 10,.+1		;RELEASE INTERRUPT SHOULD NOT
  4001	033705	7 004 34 0 00 040000 		CONSO	PI,40000		;EFFECT PIH FLOP UNLESS AND
  4002						STOP^
  4003	033706	254 04 0 00 033707 		HALT	.+1
  4004	033707	320 00 0 00 033710 		JUMP	.+1
  4005									^
  4006
  4007						JENOK	40,20000	^;PIH 2
  4008
  4009						CLEAN^
  4010	033710	7 000 20 0 00 634440 		CONO	634440
  4011	033711	7 004 20 0 00 010000 		CONO	PI,10000
  4012									^
  4013	033712	7 004 20 0 00 004240 		CONO	PI,ACT+PIREQ+40	;SET THE PIH FLOP THEN REMOVE
  4014	033713	7 004 20 0 00 000400 		CONO	PI,DACT		;THE PIOK LEVELS VIA NO ACTIVE
  4015	033714	254 10 0 00 033715 		JRST 10,.+1		;RELEASE INTERRUPT SHOULD NOT
  4016	033715	7 004 34 0 00 020000 		CONSO	PI,20000		;EFFECT PIH FLOP UNLESS AND
  4017						STOP^
  4018	033716	254 04 0 00 033717 		HALT	.+1
  4019	033717	320 00 0 00 033720 		JUMP	.+1
  4020									^
  4021
  4022						CHANEL	MOD102^
  4023	033720	336 00 0 00 036672 		SKIPN	PI7SYS#
  4024	033721	254 00 0 00 033772 		JRST	MOD102
  4025									^
  4026	033722				MOD101:	JENOK	20,10000	^;PIH 3
  4027
  4028						CLEAN^
  4029	033722	7 000 20 0 00 634440 		CONO	634440
  4030	033723	7 004 20 0 00 010000 		CONO	PI,10000
  4031									^
  4032	033724	7 004 20 0 00 004220 		CONO	PI,ACT+PIREQ+20	;SET THE PIH FLOP THEN REMOVE
  4033	033725	7 004 20 0 00 000400 		CONO	PI,DACT		;THE PIOK LEVELS VIA NO ACTIVE
  4034	033726	254 10 0 00 033727 		JRST 10,.+1		;RELEASE INTERRUPT SHOULD NOT
  4035	033727	7 004 34 0 00 010000 		CONSO	PI,10000		;EFFECT PIH FLOP UNLESS AND
  4036						STOP^
  4037	033730	254 04 0 00 033731 		HALT	.+1
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 39-1
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0099

  4038	033731	320 00 0 00 033732 		JUMP	.+1
  4039									^
  4040
  4041						JENOK	10,4000		^;PIH 4
  4042
  4043						CLEAN^
  4044	033732	7 000 20 0 00 634440 		CONO	634440
  4045	033733	7 004 20 0 00 010000 		CONO	PI,10000
  4046									^
  4047	033734	7 004 20 0 00 004210 		CONO	PI,ACT+PIREQ+10	;SET THE PIH FLOP THEN REMOVE
  4048	033735	7 004 20 0 00 000400 		CONO	PI,DACT		;THE PIOK LEVELS VIA NO ACTIVE
  4049	033736	254 10 0 00 033737 		JRST 10,.+1		;RELEASE INTERRUPT SHOULD NOT
  4050	033737	7 004 34 0 00 004000 		CONSO	PI,4000		;EFFECT PIH FLOP UNLESS AND
  4051						STOP^
  4052	033740	254 04 0 00 033741 		HALT	.+1
  4053	033741	320 00 0 00 033742 		JUMP	.+1
  4054									^
  4055
  4056						JENOK	4,2000		^;PIH 5
  4057
  4058						CLEAN^
  4059	033742	7 000 20 0 00 634440 		CONO	634440
  4060	033743	7 004 20 0 00 010000 		CONO	PI,10000
  4061									^
  4062	033744	7 004 20 0 00 004204 		CONO	PI,ACT+PIREQ+4	;SET THE PIH FLOP THEN REMOVE
  4063	033745	7 004 20 0 00 000400 		CONO	PI,DACT		;THE PIOK LEVELS VIA NO ACTIVE
  4064	033746	254 10 0 00 033747 		JRST 10,.+1		;RELEASE INTERRUPT SHOULD NOT
  4065	033747	7 004 34 0 00 002000 		CONSO	PI,2000		;EFFECT PIH FLOP UNLESS AND
  4066						STOP^
  4067	033750	254 04 0 00 033751 		HALT	.+1
  4068	033751	320 00 0 00 033752 		JUMP	.+1
  4069									^
  4070
  4071						JENOK	2,1000		^;PIH 6
  4072
  4073						CLEAN^
  4074	033752	7 000 20 0 00 634440 		CONO	634440
  4075	033753	7 004 20 0 00 010000 		CONO	PI,10000
  4076									^
  4077	033754	7 004 20 0 00 004202 		CONO	PI,ACT+PIREQ+2	;SET THE PIH FLOP THEN REMOVE
  4078	033755	7 004 20 0 00 000400 		CONO	PI,DACT		;THE PIOK LEVELS VIA NO ACTIVE
  4079	033756	254 10 0 00 033757 		JRST 10,.+1		;RELEASE INTERRUPT SHOULD NOT
  4080	033757	7 004 34 0 00 001000 		CONSO	PI,1000		;EFFECT PIH FLOP UNLESS AND
  4081						STOP^
  4082	033760	254 04 0 00 033761 		HALT	.+1
  4083	033761	320 00 0 00 033762 		JUMP	.+1
  4084									^
  4085
  4086						JENOK	1,400		^;PIH 7
  4087
  4088						CLEAN^
  4089	033762	7 000 20 0 00 634440 		CONO	634440
  4090	033763	7 004 20 0 00 010000 		CONO	PI,10000
  4091									^
  4092	033764	7 004 20 0 00 004201 		CONO	PI,ACT+PIREQ+1	;SET THE PIH FLOP THEN REMOVE
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 39-2
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0100

  4093	033765	7 004 20 0 00 000400 		CONO	PI,DACT		;THE PIOK LEVELS VIA NO ACTIVE
  4094	033766	254 10 0 00 033767 		JRST 10,.+1		;RELEASE INTERRUPT SHOULD NOT
  4095	033767	7 004 34 0 00 000400 		CONSO	PI,400		;EFFECT PIH FLOP UNLESS AND
  4096						STOP^
  4097	033770	254 04 0 00 033771 		HALT	.+1
  4098	033771	320 00 0 00 033772 		JUMP	.+1
  4099									^
  4100
  4101	033772				MOD102:	CLEAN^
  4102	033772	7 000 20 0 00 634440 		CONO	634440
  4103	033773	7 004 20 0 00 010000 		CONO	PI,10000
  4104									^
  4105
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 40
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0101

  4106					DEFINE	ONEPIH	(A,B)<
  4107						CLEAN
  4108						CONO	PI,ACT+PIREQ+A	;CHECK FOR REDUNDANT
  4109						CONSZ PI,B		;PIH FLAGS.SEE TOP PI2 PRINT
  4110						STOP
  4111					>
  4112
  4113			020000		WW=20000
  4114			000100		ZZ=100
  4115			037400		YY=37400
  4116					MOD103:	REPEAT	7,<
  4117						ONEPIH	ZZ,YY
  4118						YY=YY+WW
  4119						WW=WW/2
  4120						ZZ=ZZ/2
  4121					>
  4122
  4123						ONEPIH	ZZ,YY^
  4124						CLEAN^
  4125	033774	7 000 20 0 00 634440 		CONO	634440
  4126	033775	7 004 20 0 00 010000 		CONO	PI,10000
  4127									^
  4128	033776	7 004 20 0 00 004300 		CONO	PI,ACT+PIREQ+ZZ	;CHECK FOR REDUNDANT
  4129	033777	7 004 30 0 00 037400 		CONSZ PI,YY		;PIH FLAGS.SEE TOP PI2 PRINT
  4130						STOP^
  4131	034000	254 04 0 00 034001 		HALT	.+1
  4132	034001	320 00 0 00 034002 		JUMP	.+1
  4133									^
  4134					^
  4135			057400			YY=YY+WW
  4136			010000			WW=WW/2
  4137			000040			ZZ=ZZ/2
  4138
  4139
  4140						ONEPIH	ZZ,YY^
  4141						CLEAN^
  4142	034002	7 000 20 0 00 634440 		CONO	634440
  4143	034003	7 004 20 0 00 010000 		CONO	PI,10000
  4144									^
  4145	034004	7 004 20 0 00 004240 		CONO	PI,ACT+PIREQ+ZZ	;CHECK FOR REDUNDANT
  4146	034005	7 004 30 0 00 057400 		CONSZ PI,YY		;PIH FLAGS.SEE TOP PI2 PRINT
  4147						STOP^
  4148	034006	254 04 0 00 034007 		HALT	.+1
  4149	034007	320 00 0 00 034010 		JUMP	.+1
  4150									^
  4151					^
  4152			067400			YY=YY+WW
  4153			004000			WW=WW/2
  4154			000020			ZZ=ZZ/2
  4155
  4156
  4157						ONEPIH	ZZ,YY^
  4158						CLEAN^
  4159	034010	7 000 20 0 00 634440 		CONO	634440
  4160	034011	7 004 20 0 00 010000 		CONO	PI,10000
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 40-1
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0102

  4161									^
  4162	034012	7 004 20 0 00 004220 		CONO	PI,ACT+PIREQ+ZZ	;CHECK FOR REDUNDANT
  4163	034013	7 004 30 0 00 067400 		CONSZ PI,YY		;PIH FLAGS.SEE TOP PI2 PRINT
  4164						STOP^
  4165	034014	254 04 0 00 034015 		HALT	.+1
  4166	034015	320 00 0 00 034016 		JUMP	.+1
  4167									^
  4168					^
  4169			073400			YY=YY+WW
  4170			002000			WW=WW/2
  4171			000010			ZZ=ZZ/2
  4172
  4173
  4174						ONEPIH	ZZ,YY^
  4175						CLEAN^
  4176	034016	7 000 20 0 00 634440 		CONO	634440
  4177	034017	7 004 20 0 00 010000 		CONO	PI,10000
  4178									^
  4179	034020	7 004 20 0 00 004210 		CONO	PI,ACT+PIREQ+ZZ	;CHECK FOR REDUNDANT
  4180	034021	7 004 30 0 00 073400 		CONSZ PI,YY		;PIH FLAGS.SEE TOP PI2 PRINT
  4181						STOP^
  4182	034022	254 04 0 00 034023 		HALT	.+1
  4183	034023	320 00 0 00 034024 		JUMP	.+1
  4184									^
  4185					^
  4186			075400			YY=YY+WW
  4187			001000			WW=WW/2
  4188			000004			ZZ=ZZ/2
  4189
  4190
  4191						ONEPIH	ZZ,YY^
  4192						CLEAN^
  4193	034024	7 000 20 0 00 634440 		CONO	634440
  4194	034025	7 004 20 0 00 010000 		CONO	PI,10000
  4195									^
  4196	034026	7 004 20 0 00 004204 		CONO	PI,ACT+PIREQ+ZZ	;CHECK FOR REDUNDANT
  4197	034027	7 004 30 0 00 075400 		CONSZ PI,YY		;PIH FLAGS.SEE TOP PI2 PRINT
  4198						STOP^
  4199	034030	254 04 0 00 034031 		HALT	.+1
  4200	034031	320 00 0 00 034032 		JUMP	.+1
  4201									^
  4202					^
  4203			076400			YY=YY+WW
  4204			000400			WW=WW/2
  4205			000002			ZZ=ZZ/2
  4206
  4207
  4208						ONEPIH	ZZ,YY^
  4209						CLEAN^
  4210	034032	7 000 20 0 00 634440 		CONO	634440
  4211	034033	7 004 20 0 00 010000 		CONO	PI,10000
  4212									^
  4213	034034	7 004 20 0 00 004202 		CONO	PI,ACT+PIREQ+ZZ	;CHECK FOR REDUNDANT
  4214	034035	7 004 30 0 00 076400 		CONSZ PI,YY		;PIH FLAGS.SEE TOP PI2 PRINT
  4215						STOP^
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 40-2
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0103

  4216	034036	254 04 0 00 034037 		HALT	.+1
  4217	034037	320 00 0 00 034040 		JUMP	.+1
  4218									^
  4219					^
  4220			077000			YY=YY+WW
  4221			000200			WW=WW/2
  4222			000001			ZZ=ZZ/2
  4223
  4224
  4225						ONEPIH	ZZ,YY^
  4226						CLEAN^
  4227	034040	7 000 20 0 00 634440 		CONO	634440
  4228	034041	7 004 20 0 00 010000 		CONO	PI,10000
  4229									^
  4230	034042	7 004 20 0 00 004201 		CONO	PI,ACT+PIREQ+ZZ	;CHECK FOR REDUNDANT
  4231	034043	7 004 30 0 00 077000 		CONSZ PI,YY		;PIH FLAGS.SEE TOP PI2 PRINT
  4232						STOP^
  4233	034044	254 04 0 00 034045 		HALT	.+1
  4234	034045	320 00 0 00 034046 		JUMP	.+1
  4235									^
  4236					^
  4237			077200			YY=YY+WW
  4238			000100			WW=WW/2
  4239			000000			ZZ=ZZ/2
  4240
  4241
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 41
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0104

  4242					DEFINE	FASTPIH	(A,B,C)<
  4243						CLEAN
  4244						CONO	PI,ACT+PIREQ+B	;SET PIH AND PIH ON
  4245						CONO	PI,ACT+PIREQ+A	;NEXT HIGHER CHANNEL
  4246						JRST 10,.+1		;SHOULD RELEASE ONLY HIGH CH
  4247						CONSO PI,C		;CHECK FOR FAST TURN OFF (PIH)
  4248						STOP
  4249					>
  4250
  4251	034046				MOD104:	FASTPIH	100,40,20000^
  4252						CLEAN^
  4253	034046	7 000 20 0 00 634440 		CONO	634440
  4254	034047	7 004 20 0 00 010000 		CONO	PI,10000
  4255									^
  4256	034050	7 004 20 0 00 004240 		CONO	PI,ACT+PIREQ+40	;SET PIH AND PIH ON
  4257	034051	7 004 20 0 00 004300 		CONO	PI,ACT+PIREQ+100	;NEXT HIGHER CHANNEL
  4258	034052	254 10 0 00 034053 		JRST 10,.+1		;SHOULD RELEASE ONLY HIGH CH
  4259	034053	7 004 34 0 00 020000 		CONSO PI,20000		;CHECK FOR FAST TURN OFF (PIH)
  4260						STOP^
  4261	034054	254 04 0 00 034055 		HALT	.+1
  4262	034055	320 00 0 00 034056 		JUMP	.+1
  4263									^
  4264					^
  4265						CHANEL	MOD106^
  4266	034056	336 00 0 00 036672 		SKIPN	PI7SYS#
  4267	034057	254 00 0 00 034130 		JRST	MOD106
  4268									^
  4269	034060				MOD105:	FASTPIH	40,20,10000^
  4270						CLEAN^
  4271	034060	7 000 20 0 00 634440 		CONO	634440
  4272	034061	7 004 20 0 00 010000 		CONO	PI,10000
  4273									^
  4274	034062	7 004 20 0 00 004220 		CONO	PI,ACT+PIREQ+20	;SET PIH AND PIH ON
  4275	034063	7 004 20 0 00 004240 		CONO	PI,ACT+PIREQ+40	;NEXT HIGHER CHANNEL
  4276	034064	254 10 0 00 034065 		JRST 10,.+1		;SHOULD RELEASE ONLY HIGH CH
  4277	034065	7 004 34 0 00 010000 		CONSO PI,10000		;CHECK FOR FAST TURN OFF (PIH)
  4278						STOP^
  4279	034066	254 04 0 00 034067 		HALT	.+1
  4280	034067	320 00 0 00 034070 		JUMP	.+1
  4281									^
  4282					^
  4283						FASTPIH	20,10,4000^
  4284						CLEAN^
  4285	034070	7 000 20 0 00 634440 		CONO	634440
  4286	034071	7 004 20 0 00 010000 		CONO	PI,10000
  4287									^
  4288	034072	7 004 20 0 00 004210 		CONO	PI,ACT+PIREQ+10	;SET PIH AND PIH ON
  4289	034073	7 004 20 0 00 004220 		CONO	PI,ACT+PIREQ+20	;NEXT HIGHER CHANNEL
  4290	034074	254 10 0 00 034075 		JRST 10,.+1		;SHOULD RELEASE ONLY HIGH CH
  4291	034075	7 004 34 0 00 004000 		CONSO PI,4000		;CHECK FOR FAST TURN OFF (PIH)
  4292						STOP^
  4293	034076	254 04 0 00 034077 		HALT	.+1
  4294	034077	320 00 0 00 034100 		JUMP	.+1
  4295									^
  4296					^
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 41-1
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0105

  4297						FASTPIH	10,4,2000^
  4298						CLEAN^
  4299	034100	7 000 20 0 00 634440 		CONO	634440
  4300	034101	7 004 20 0 00 010000 		CONO	PI,10000
  4301									^
  4302	034102	7 004 20 0 00 004204 		CONO	PI,ACT+PIREQ+4	;SET PIH AND PIH ON
  4303	034103	7 004 20 0 00 004210 		CONO	PI,ACT+PIREQ+10	;NEXT HIGHER CHANNEL
  4304	034104	254 10 0 00 034105 		JRST 10,.+1		;SHOULD RELEASE ONLY HIGH CH
  4305	034105	7 004 34 0 00 002000 		CONSO PI,2000		;CHECK FOR FAST TURN OFF (PIH)
  4306						STOP^
  4307	034106	254 04 0 00 034107 		HALT	.+1
  4308	034107	320 00 0 00 034110 		JUMP	.+1
  4309									^
  4310					^
  4311						FASTPIH	4,2,1000^
  4312						CLEAN^
  4313	034110	7 000 20 0 00 634440 		CONO	634440
  4314	034111	7 004 20 0 00 010000 		CONO	PI,10000
  4315									^
  4316	034112	7 004 20 0 00 004202 		CONO	PI,ACT+PIREQ+2	;SET PIH AND PIH ON
  4317	034113	7 004 20 0 00 004204 		CONO	PI,ACT+PIREQ+4	;NEXT HIGHER CHANNEL
  4318	034114	254 10 0 00 034115 		JRST 10,.+1		;SHOULD RELEASE ONLY HIGH CH
  4319	034115	7 004 34 0 00 001000 		CONSO PI,1000		;CHECK FOR FAST TURN OFF (PIH)
  4320						STOP^
  4321	034116	254 04 0 00 034117 		HALT	.+1
  4322	034117	320 00 0 00 034120 		JUMP	.+1
  4323									^
  4324					^
  4325						FASTPIH	2,1,400^
  4326						CLEAN^
  4327	034120	7 000 20 0 00 634440 		CONO	634440
  4328	034121	7 004 20 0 00 010000 		CONO	PI,10000
  4329									^
  4330	034122	7 004 20 0 00 004201 		CONO	PI,ACT+PIREQ+1	;SET PIH AND PIH ON
  4331	034123	7 004 20 0 00 004202 		CONO	PI,ACT+PIREQ+2	;NEXT HIGHER CHANNEL
  4332	034124	254 10 0 00 034125 		JRST 10,.+1		;SHOULD RELEASE ONLY HIGH CH
  4333	034125	7 004 34 0 00 000400 		CONSO PI,400		;CHECK FOR FAST TURN OFF (PIH)
  4334						STOP^
  4335	034126	254 04 0 00 034127 		HALT	.+1
  4336	034127	320 00 0 00 034130 		JUMP	.+1
  4337									^
  4338					^
  4339	034130				MOD106:	CLEAN^
  4340	034130	7 000 20 0 00 634440 		CONO	634440
  4341	034131	7 004 20 0 00 010000 		CONO	PI,10000
  4342									^
  4343
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 42
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0106

  4344			000100		ZZ=100
  4345			040000		YY=40000
  4346					MOD107:	REPEAT	7,<
  4347						CLEAN
  4348						CONO	PI,PIOSET+ACT+ZZ	;SET CHANNEL IOB SHOULD
  4349						CONSZ	PI,YY		;NOT HAVE DATA. CHECK AND
  4350						STOP			;OF PIR STB, IOB PIRQ, PIO
  4351						ZZ=ZZ/2			;THE PIRQ INPUT. INTERRUPT NOT
  4352						YY=YY/2			;HAVE OCCURED. SEE PI2 PRINT>
  4353
  4354						CLEAN^
  4355	034132	7 000 20 0 00 634440 		CONO	634440
  4356	034133	7 004 20 0 00 010000 		CONO	PI,10000
  4357									^
  4358	034134	7 004 20 0 00 002300 		CONO	PI,PIOSET+ACT+ZZ	;SET CHANNEL IOB SHOULD
  4359	034135	7 004 30 0 00 040000 		CONSZ	PI,YY		;NOT HAVE DATA. CHECK AND
  4360						STOP			^
  4361	034136	254 04 0 00 034137 		HALT	.+1
  4362	034137	320 00 0 00 034140 		JUMP	.+1
  4363									^;OF PIR STB, IOB PIRQ, PIO
  4364			000040			ZZ=ZZ/2			;THE PIRQ INPUT. INTERRUPT NOT
  4365			020000			YY=YY/2			;HAVE OCCURED. SEE PI2 PRINT
  4366
  4367						CLEAN^
  4368	034140	7 000 20 0 00 634440 		CONO	634440
  4369	034141	7 004 20 0 00 010000 		CONO	PI,10000
  4370									^
  4371	034142	7 004 20 0 00 002240 		CONO	PI,PIOSET+ACT+ZZ	;SET CHANNEL IOB SHOULD
  4372	034143	7 004 30 0 00 020000 		CONSZ	PI,YY		;NOT HAVE DATA. CHECK AND
  4373						STOP			^
  4374	034144	254 04 0 00 034145 		HALT	.+1
  4375	034145	320 00 0 00 034146 		JUMP	.+1
  4376									^;OF PIR STB, IOB PIRQ, PIO
  4377			000020			ZZ=ZZ/2			;THE PIRQ INPUT. INTERRUPT NOT
  4378			010000			YY=YY/2			;HAVE OCCURED. SEE PI2 PRINT
  4379
  4380						CLEAN^
  4381	034146	7 000 20 0 00 634440 		CONO	634440
  4382	034147	7 004 20 0 00 010000 		CONO	PI,10000
  4383									^
  4384	034150	7 004 20 0 00 002220 		CONO	PI,PIOSET+ACT+ZZ	;SET CHANNEL IOB SHOULD
  4385	034151	7 004 30 0 00 010000 		CONSZ	PI,YY		;NOT HAVE DATA. CHECK AND
  4386						STOP			^
  4387	034152	254 04 0 00 034153 		HALT	.+1
  4388	034153	320 00 0 00 034154 		JUMP	.+1
  4389									^;OF PIR STB, IOB PIRQ, PIO
  4390			000010			ZZ=ZZ/2			;THE PIRQ INPUT. INTERRUPT NOT
  4391			004000			YY=YY/2			;HAVE OCCURED. SEE PI2 PRINT
  4392
  4393						CLEAN^
  4394	034154	7 000 20 0 00 634440 		CONO	634440
  4395	034155	7 004 20 0 00 010000 		CONO	PI,10000
  4396									^
  4397	034156	7 004 20 0 00 002210 		CONO	PI,PIOSET+ACT+ZZ	;SET CHANNEL IOB SHOULD
  4398	034157	7 004 30 0 00 004000 		CONSZ	PI,YY		;NOT HAVE DATA. CHECK AND
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 42-1
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0107

  4399						STOP			^
  4400	034160	254 04 0 00 034161 		HALT	.+1
  4401	034161	320 00 0 00 034162 		JUMP	.+1
  4402									^;OF PIR STB, IOB PIRQ, PIO
  4403			000004			ZZ=ZZ/2			;THE PIRQ INPUT. INTERRUPT NOT
  4404			002000			YY=YY/2			;HAVE OCCURED. SEE PI2 PRINT
  4405
  4406						CLEAN^
  4407	034162	7 000 20 0 00 634440 		CONO	634440
  4408	034163	7 004 20 0 00 010000 		CONO	PI,10000
  4409									^
  4410	034164	7 004 20 0 00 002204 		CONO	PI,PIOSET+ACT+ZZ	;SET CHANNEL IOB SHOULD
  4411	034165	7 004 30 0 00 002000 		CONSZ	PI,YY		;NOT HAVE DATA. CHECK AND
  4412						STOP			^
  4413	034166	254 04 0 00 034167 		HALT	.+1
  4414	034167	320 00 0 00 034170 		JUMP	.+1
  4415									^;OF PIR STB, IOB PIRQ, PIO
  4416			000002			ZZ=ZZ/2			;THE PIRQ INPUT. INTERRUPT NOT
  4417			001000			YY=YY/2			;HAVE OCCURED. SEE PI2 PRINT
  4418
  4419						CLEAN^
  4420	034170	7 000 20 0 00 634440 		CONO	634440
  4421	034171	7 004 20 0 00 010000 		CONO	PI,10000
  4422									^
  4423	034172	7 004 20 0 00 002202 		CONO	PI,PIOSET+ACT+ZZ	;SET CHANNEL IOB SHOULD
  4424	034173	7 004 30 0 00 001000 		CONSZ	PI,YY		;NOT HAVE DATA. CHECK AND
  4425						STOP			^
  4426	034174	254 04 0 00 034175 		HALT	.+1
  4427	034175	320 00 0 00 034176 		JUMP	.+1
  4428									^;OF PIR STB, IOB PIRQ, PIO
  4429			000001			ZZ=ZZ/2			;THE PIRQ INPUT. INTERRUPT NOT
  4430			000400			YY=YY/2			;HAVE OCCURED. SEE PI2 PRINT
  4431
  4432						CLEAN^
  4433	034176	7 000 20 0 00 634440 		CONO	634440
  4434	034177	7 004 20 0 00 010000 		CONO	PI,10000
  4435									^
  4436	034200	7 004 20 0 00 002201 		CONO	PI,PIOSET+ACT+ZZ	;SET CHANNEL IOB SHOULD
  4437	034201	7 004 30 0 00 000400 		CONSZ	PI,YY		;NOT HAVE DATA. CHECK AND
  4438						STOP			^
  4439	034202	254 04 0 00 034203 		HALT	.+1
  4440	034203	320 00 0 00 034204 		JUMP	.+1
  4441									^;OF PIR STB, IOB PIRQ, PIO
  4442			000000			ZZ=ZZ/2			;THE PIRQ INPUT. INTERRUPT NOT
  4443			000200			YY=YY/2			;HAVE OCCURED. SEE PI2 PRINT
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 43
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0108

  4444
  4445					DEFINE	CPINTR	(A)<		;PROVIDE AN INTERRUPT TO PI
  4446						MOVSI	400000		;BUS FROM PROCESSOR VIA ARROV
  4447						ADD			;AND OTHER SOURCES
  4448						CONO	42220+A>
  4449
  4450					DEFINE	IOBRQ	(A,B,C)<
  4451						CLEAN			;CLEAR THE WORLD EXCEPT CP
  4452						CPINTR	A
  4453						CONO	PI,PIOSET+ACT+B	;TURN ON CK FLOP TO ALLOW
  4454						CONSO	PI,C		;INTERRUPT. CK INPUT TO PIR FLOP
  4455						STOP
  4456					>
  4457
  4458			000001		ZZ=1
  4459			040000		YY=40000
  4460					MOD108:	REPEAT	7,<		;TEST FOR NO INTERRUPT FROM BUSS
  4461						CLEAN			;CLEAR WORLD
  4462						CPINTR ZZ		;INTERRUPT TO BUSS INPUT TO PIR
  4463						CONSZ	PI,YY		;PIO=0 EXPECT NO INTERRUPT. SEE
  4464						STOP
  4465						ZZ=ZZ+1			;IOB PIRQ,PIO(1), ON PI2 PRINT
  4466						YY=YY/2
  4467					>
  4468							;TEST FOR NO INTERRUPT FROM BUSS
  4469						CLEAN			^
  4470	034204	7 000 20 0 00 634440 		CONO	634440
  4471	034205	7 004 20 0 00 010000 		CONO	PI,10000
  4472									^;CLEAR WORLD
  4473						CPINTR ZZ		^		;PROVIDE AN INTERRUPT TO PI
  4474	034206	205 00 0 00 400000 		MOVSI	400000		;BUS FROM PROCESSOR VIA ARROV
  4475	034207	270 00 0 00 000000 		ADD			;AND OTHER SOURCES
  4476	034210	7 000 20 0 00 042221 		CONO	42220+ZZ^;INTERRUPT TO BUSS INPUT TO PIR
  4477	034211	7 004 30 0 00 040000 		CONSZ	PI,YY		;PIO=0 EXPECT NO INTERRUPT. SEE
  4478						STOP^
  4479	034212	254 04 0 00 034213 		HALT	.+1
  4480	034213	320 00 0 00 034214 		JUMP	.+1
  4481									^
  4482			000002			ZZ=ZZ+1			;IOB PIRQ,PIO(1), ON PI2 PRINT
  4483			020000			YY=YY/2
  4484
  4485							;TEST FOR NO INTERRUPT FROM BUSS
  4486						CLEAN			^
  4487	034214	7 000 20 0 00 634440 		CONO	634440
  4488	034215	7 004 20 0 00 010000 		CONO	PI,10000
  4489									^;CLEAR WORLD
  4490						CPINTR ZZ		^		;PROVIDE AN INTERRUPT TO PI
  4491	034216	205 00 0 00 400000 		MOVSI	400000		;BUS FROM PROCESSOR VIA ARROV
  4492	034217	270 00 0 00 000000 		ADD			;AND OTHER SOURCES
  4493	034220	7 000 20 0 00 042222 		CONO	42220+ZZ^;INTERRUPT TO BUSS INPUT TO PIR
  4494	034221	7 004 30 0 00 020000 		CONSZ	PI,YY		;PIO=0 EXPECT NO INTERRUPT. SEE
  4495						STOP^
  4496	034222	254 04 0 00 034223 		HALT	.+1
  4497	034223	320 00 0 00 034224 		JUMP	.+1
  4498									^
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 43-1
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0109

  4499			000003			ZZ=ZZ+1			;IOB PIRQ,PIO(1), ON PI2 PRINT
  4500			010000			YY=YY/2
  4501
  4502							;TEST FOR NO INTERRUPT FROM BUSS
  4503						CLEAN			^
  4504	034224	7 000 20 0 00 634440 		CONO	634440
  4505	034225	7 004 20 0 00 010000 		CONO	PI,10000
  4506									^;CLEAR WORLD
  4507						CPINTR ZZ		^		;PROVIDE AN INTERRUPT TO PI
  4508	034226	205 00 0 00 400000 		MOVSI	400000		;BUS FROM PROCESSOR VIA ARROV
  4509	034227	270 00 0 00 000000 		ADD			;AND OTHER SOURCES
  4510	034230	7 000 20 0 00 042223 		CONO	42220+ZZ^;INTERRUPT TO BUSS INPUT TO PIR
  4511	034231	7 004 30 0 00 010000 		CONSZ	PI,YY		;PIO=0 EXPECT NO INTERRUPT. SEE
  4512						STOP^
  4513	034232	254 04 0 00 034233 		HALT	.+1
  4514	034233	320 00 0 00 034234 		JUMP	.+1
  4515									^
  4516			000004			ZZ=ZZ+1			;IOB PIRQ,PIO(1), ON PI2 PRINT
  4517			004000			YY=YY/2
  4518
  4519							;TEST FOR NO INTERRUPT FROM BUSS
  4520						CLEAN			^
  4521	034234	7 000 20 0 00 634440 		CONO	634440
  4522	034235	7 004 20 0 00 010000 		CONO	PI,10000
  4523									^;CLEAR WORLD
  4524						CPINTR ZZ		^		;PROVIDE AN INTERRUPT TO PI
  4525	034236	205 00 0 00 400000 		MOVSI	400000		;BUS FROM PROCESSOR VIA ARROV
  4526	034237	270 00 0 00 000000 		ADD			;AND OTHER SOURCES
  4527	034240	7 000 20 0 00 042224 		CONO	42220+ZZ^;INTERRUPT TO BUSS INPUT TO PIR
  4528	034241	7 004 30 0 00 004000 		CONSZ	PI,YY		;PIO=0 EXPECT NO INTERRUPT. SEE
  4529						STOP^
  4530	034242	254 04 0 00 034243 		HALT	.+1
  4531	034243	320 00 0 00 034244 		JUMP	.+1
  4532									^
  4533			000005			ZZ=ZZ+1			;IOB PIRQ,PIO(1), ON PI2 PRINT
  4534			002000			YY=YY/2
  4535
  4536							;TEST FOR NO INTERRUPT FROM BUSS
  4537						CLEAN			^
  4538	034244	7 000 20 0 00 634440 		CONO	634440
  4539	034245	7 004 20 0 00 010000 		CONO	PI,10000
  4540									^;CLEAR WORLD
  4541						CPINTR ZZ		^		;PROVIDE AN INTERRUPT TO PI
  4542	034246	205 00 0 00 400000 		MOVSI	400000		;BUS FROM PROCESSOR VIA ARROV
  4543	034247	270 00 0 00 000000 		ADD			;AND OTHER SOURCES
  4544	034250	7 000 20 0 00 042225 		CONO	42220+ZZ^;INTERRUPT TO BUSS INPUT TO PIR
  4545	034251	7 004 30 0 00 002000 		CONSZ	PI,YY		;PIO=0 EXPECT NO INTERRUPT. SEE
  4546						STOP^
  4547	034252	254 04 0 00 034253 		HALT	.+1
  4548	034253	320 00 0 00 034254 		JUMP	.+1
  4549									^
  4550			000006			ZZ=ZZ+1			;IOB PIRQ,PIO(1), ON PI2 PRINT
  4551			001000			YY=YY/2
  4552
  4553							;TEST FOR NO INTERRUPT FROM BUSS
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 43-2
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0110

  4554						CLEAN			^
  4555	034254	7 000 20 0 00 634440 		CONO	634440
  4556	034255	7 004 20 0 00 010000 		CONO	PI,10000
  4557									^;CLEAR WORLD
  4558						CPINTR ZZ		^		;PROVIDE AN INTERRUPT TO PI
  4559	034256	205 00 0 00 400000 		MOVSI	400000		;BUS FROM PROCESSOR VIA ARROV
  4560	034257	270 00 0 00 000000 		ADD			;AND OTHER SOURCES
  4561	034260	7 000 20 0 00 042226 		CONO	42220+ZZ^;INTERRUPT TO BUSS INPUT TO PIR
  4562	034261	7 004 30 0 00 001000 		CONSZ	PI,YY		;PIO=0 EXPECT NO INTERRUPT. SEE
  4563						STOP^
  4564	034262	254 04 0 00 034263 		HALT	.+1
  4565	034263	320 00 0 00 034264 		JUMP	.+1
  4566									^
  4567			000007			ZZ=ZZ+1			;IOB PIRQ,PIO(1), ON PI2 PRINT
  4568			000400			YY=YY/2
  4569
  4570							;TEST FOR NO INTERRUPT FROM BUSS
  4571						CLEAN			^
  4572	034264	7 000 20 0 00 634440 		CONO	634440
  4573	034265	7 004 20 0 00 010000 		CONO	PI,10000
  4574									^;CLEAR WORLD
  4575						CPINTR ZZ		^		;PROVIDE AN INTERRUPT TO PI
  4576	034266	205 00 0 00 400000 		MOVSI	400000		;BUS FROM PROCESSOR VIA ARROV
  4577	034267	270 00 0 00 000000 		ADD			;AND OTHER SOURCES
  4578	034270	7 000 20 0 00 042227 		CONO	42220+ZZ^;INTERRUPT TO BUSS INPUT TO PIR
  4579	034271	7 004 30 0 00 000400 		CONSZ	PI,YY		;PIO=0 EXPECT NO INTERRUPT. SEE
  4580						STOP^
  4581	034272	254 04 0 00 034273 		HALT	.+1
  4582	034273	320 00 0 00 034274 		JUMP	.+1
  4583									^
  4584			000010			ZZ=ZZ+1			;IOB PIRQ,PIO(1), ON PI2 PRINT
  4585			000200			YY=YY/2
  4586
  4587
  4588	034274				MOD109:	IOBRQ	1,100,77400^
  4589						CLEAN			^
  4590	034274	7 000 20 0 00 634440 		CONO	634440
  4591	034275	7 004 20 0 00 010000 		CONO	PI,10000
  4592									^;CLEAR THE WORLD EXCEPT CP
  4593						CPINTR	1^		;PROVIDE AN INTERRUPT TO PI
  4594	034276	205 00 0 00 400000 		MOVSI	400000		;BUS FROM PROCESSOR VIA ARROV
  4595	034277	270 00 0 00 000000 		ADD			;AND OTHER SOURCES
  4596	034300	7 000 20 0 00 042221 		CONO	42220+1^
  4597	034301	7 004 20 0 00 002300 		CONO	PI,PIOSET+ACT+100	;TURN ON CK FLOP TO ALLOW
  4598	034302	7 004 34 0 00 077400 		CONSO	PI,77400		;INTERRUPT. CK INPUT TO PIR FLOP
  4599						STOP^
  4600	034303	254 04 0 00 034304 		HALT	.+1
  4601	034304	320 00 0 00 034305 		JUMP	.+1
  4602									^
  4603					^
  4604						IOBRQ	2,40,77400^
  4605						CLEAN			^
  4606	034305	7 000 20 0 00 634440 		CONO	634440
  4607	034306	7 004 20 0 00 010000 		CONO	PI,10000
  4608									^;CLEAR THE WORLD EXCEPT CP
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 43-3
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0111

  4609						CPINTR	2^		;PROVIDE AN INTERRUPT TO PI
  4610	034307	205 00 0 00 400000 		MOVSI	400000		;BUS FROM PROCESSOR VIA ARROV
  4611	034310	270 00 0 00 000000 		ADD			;AND OTHER SOURCES
  4612	034311	7 000 20 0 00 042222 		CONO	42220+2^
  4613	034312	7 004 20 0 00 002240 		CONO	PI,PIOSET+ACT+40	;TURN ON CK FLOP TO ALLOW
  4614	034313	7 004 34 0 00 077400 		CONSO	PI,77400		;INTERRUPT. CK INPUT TO PIR FLOP
  4615						STOP^
  4616	034314	254 04 0 00 034315 		HALT	.+1
  4617	034315	320 00 0 00 034316 		JUMP	.+1
  4618									^
  4619					^
  4620						CHANEL	MOD111^
  4621	034316	336 00 0 00 036672 		SKIPN	PI7SYS#
  4622	034317	254 00 0 00 034375 		JRST	MOD111
  4623									^
  4624	034320				MOD110:	IOBRQ	3,20,77400^
  4625						CLEAN			^
  4626	034320	7 000 20 0 00 634440 		CONO	634440
  4627	034321	7 004 20 0 00 010000 		CONO	PI,10000
  4628									^;CLEAR THE WORLD EXCEPT CP
  4629						CPINTR	3^		;PROVIDE AN INTERRUPT TO PI
  4630	034322	205 00 0 00 400000 		MOVSI	400000		;BUS FROM PROCESSOR VIA ARROV
  4631	034323	270 00 0 00 000000 		ADD			;AND OTHER SOURCES
  4632	034324	7 000 20 0 00 042223 		CONO	42220+3^
  4633	034325	7 004 20 0 00 002220 		CONO	PI,PIOSET+ACT+20	;TURN ON CK FLOP TO ALLOW
  4634	034326	7 004 34 0 00 077400 		CONSO	PI,77400		;INTERRUPT. CK INPUT TO PIR FLOP
  4635						STOP^
  4636	034327	254 04 0 00 034330 		HALT	.+1
  4637	034330	320 00 0 00 034331 		JUMP	.+1
  4638									^
  4639					^
  4640						IOBRQ	4,10,77400^
  4641						CLEAN			^
  4642	034331	7 000 20 0 00 634440 		CONO	634440
  4643	034332	7 004 20 0 00 010000 		CONO	PI,10000
  4644									^;CLEAR THE WORLD EXCEPT CP
  4645						CPINTR	4^		;PROVIDE AN INTERRUPT TO PI
  4646	034333	205 00 0 00 400000 		MOVSI	400000		;BUS FROM PROCESSOR VIA ARROV
  4647	034334	270 00 0 00 000000 		ADD			;AND OTHER SOURCES
  4648	034335	7 000 20 0 00 042224 		CONO	42220+4^
  4649	034336	7 004 20 0 00 002210 		CONO	PI,PIOSET+ACT+10	;TURN ON CK FLOP TO ALLOW
  4650	034337	7 004 34 0 00 077400 		CONSO	PI,77400		;INTERRUPT. CK INPUT TO PIR FLOP
  4651						STOP^
  4652	034340	254 04 0 00 034341 		HALT	.+1
  4653	034341	320 00 0 00 034342 		JUMP	.+1
  4654									^
  4655					^
  4656						IOBRQ	5,4,77400^
  4657						CLEAN			^
  4658	034342	7 000 20 0 00 634440 		CONO	634440
  4659	034343	7 004 20 0 00 010000 		CONO	PI,10000
  4660									^;CLEAR THE WORLD EXCEPT CP
  4661						CPINTR	5^		;PROVIDE AN INTERRUPT TO PI
  4662	034344	205 00 0 00 400000 		MOVSI	400000		;BUS FROM PROCESSOR VIA ARROV
  4663	034345	270 00 0 00 000000 		ADD			;AND OTHER SOURCES
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 43-4
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0112

  4664	034346	7 000 20 0 00 042225 		CONO	42220+5^
  4665	034347	7 004 20 0 00 002204 		CONO	PI,PIOSET+ACT+4	;TURN ON CK FLOP TO ALLOW
  4666	034350	7 004 34 0 00 077400 		CONSO	PI,77400		;INTERRUPT. CK INPUT TO PIR FLOP
  4667						STOP^
  4668	034351	254 04 0 00 034352 		HALT	.+1
  4669	034352	320 00 0 00 034353 		JUMP	.+1
  4670									^
  4671					^
  4672						IOBRQ	6,2,77400^
  4673						CLEAN			^
  4674	034353	7 000 20 0 00 634440 		CONO	634440
  4675	034354	7 004 20 0 00 010000 		CONO	PI,10000
  4676									^;CLEAR THE WORLD EXCEPT CP
  4677						CPINTR	6^		;PROVIDE AN INTERRUPT TO PI
  4678	034355	205 00 0 00 400000 		MOVSI	400000		;BUS FROM PROCESSOR VIA ARROV
  4679	034356	270 00 0 00 000000 		ADD			;AND OTHER SOURCES
  4680	034357	7 000 20 0 00 042226 		CONO	42220+6^
  4681	034360	7 004 20 0 00 002202 		CONO	PI,PIOSET+ACT+2	;TURN ON CK FLOP TO ALLOW
  4682	034361	7 004 34 0 00 077400 		CONSO	PI,77400		;INTERRUPT. CK INPUT TO PIR FLOP
  4683						STOP^
  4684	034362	254 04 0 00 034363 		HALT	.+1
  4685	034363	320 00 0 00 034364 		JUMP	.+1
  4686									^
  4687					^
  4688						IOBRQ	7,1,77400^
  4689						CLEAN			^
  4690	034364	7 000 20 0 00 634440 		CONO	634440
  4691	034365	7 004 20 0 00 010000 		CONO	PI,10000
  4692									^;CLEAR THE WORLD EXCEPT CP
  4693						CPINTR	7^		;PROVIDE AN INTERRUPT TO PI
  4694	034366	205 00 0 00 400000 		MOVSI	400000		;BUS FROM PROCESSOR VIA ARROV
  4695	034367	270 00 0 00 000000 		ADD			;AND OTHER SOURCES
  4696	034370	7 000 20 0 00 042227 		CONO	42220+7^
  4697	034371	7 004 20 0 00 002201 		CONO	PI,PIOSET+ACT+1	;TURN ON CK FLOP TO ALLOW
  4698	034372	7 004 34 0 00 077400 		CONSO	PI,77400		;INTERRUPT. CK INPUT TO PIR FLOP
  4699						STOP^
  4700	034373	254 04 0 00 034374 		HALT	.+1
  4701	034374	320 00 0 00 034375 		JUMP	.+1
  4702									^
  4703					^
  4704	034375				MOD111:	CLEAN^
  4705	034375	7 000 20 0 00 634440 		CONO	634440
  4706	034376	7 004 20 0 00 010000 		CONO	PI,10000
  4707									^
  4708
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 44
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0113

  4709	034377				MOD115:	CLEAN			^;TEST CP FOR NO INTERRUPT
  4710
  4711	034377	7 000 20 0 00 634440 		CONO	634440
  4712	034400	7 004 20 0 00 010000 		CONO	PI,10000
  4713
  4714	034401	7 000 20 0 00 000001 		CONO	1		;ASSIGN A CHANNEL TO
  4715	034402	7 004 20 0 00 002377 		CONO	PI,PIG0		;PROCESSOR, ENABLE PI. IF
  4716	034403	7 004 30 0 00 077400 		CONSZ	PI,77400	;INTERRUPT PROCESS PUT BIT ON PI BUSS
  4717						STOP			^;CHECK TOB IPRQ ON CPA PRINT
  4718
  4719	034404	254 04 0 00 034405 		HALT	.+1
  4720	034405	320 00 0 00 034406 		JUMP	.+1
  4721
  4722
  4723						BLURB^
  4724					;CORE LOCATIONS 40 TO 60 CONTAIN A "MOVEI, ADDRESS"
  4725					;THEREFORE IF A INTERRUPT OCCURES THE MOVEI WILL
  4726					;STORE IN LOCATION ZERO THE ADDRESS OF THE EXECUTED
  4727					;INSTRUCTION
  4728					^
  4729
  4730	034406				MOD116:	CLEAN^
  4731	034406	7 000 20 0 00 634440 		CONO	634440
  4732	034407	7 004 20 0 00 010000 		CONO	PI,10000
  4733									^
  4734						CPINTR	1		^;ENABLE PROCESSOR INTERRUPT
  4735							;PROVIDE AN INTERRUPT TO PI
  4736	034410	205 00 0 00 400000 		MOVSI	400000		;BUS FROM PROCESSOR VIA ARROV
  4737	034411	270 00 0 00 000000 		ADD			;AND OTHER SOURCES
  4738	034412	7 000 20 0 00 042221 		CONO	42220+1
  4739	034413	400 00 0 00 000000 		SETZ
  4740	034414	7 004 20 0 00 002377 		CONO	PI,PIG0		;PROCESSOR DECODE TO PI BUSS
  4741	034415	302 00 0 00 000042 		CAIE	42		;FAIL, SEE TOP RIGHT OF CPU
  4742						STOP			^;PRINT C(0)=ADDR OF XCT INST
  4743
  4744	034416	254 04 0 00 034417 		HALT	.+1
  4745	034417	320 00 0 00 034420 		JUMP	.+1
  4746
  4747
  4748	034420				MOD117:	CLEAN^
  4749	034420	7 000 20 0 00 634440 		CONO	634440
  4750	034421	7 004 20 0 00 010000 		CONO	PI,10000
  4751									^
  4752						CPINTR	2		^;ENABLE PROCESSOR INTERRUPT
  4753							;PROVIDE AN INTERRUPT TO PI
  4754	034422	205 00 0 00 400000 		MOVSI	400000		;BUS FROM PROCESSOR VIA ARROV
  4755	034423	270 00 0 00 000000 		ADD			;AND OTHER SOURCES
  4756	034424	7 000 20 0 00 042222 		CONO	42220+2
  4757	034425	400 00 0 00 000000 		SETZ			;WILL BE FILLED BY ADDR OF XCT INST
  4758	034426	7 004 20 0 00 002377 		CONO	PI,PIG0		;ACTIVATE PI SYS
  4759	034427	302 00 0 00 000044 		CAIE	44		;EXPECT CHANNEL 2
  4760						STOP			^;IF C(0)=0 NO INTERRUPT. SEE CPA PRINT
  4761
  4762	034430	254 04 0 00 034431 		HALT	.+1
  4763	034431	320 00 0 00 034432 		JUMP	.+1
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 44-1
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0114

  4764
  4765						CHANEL	MOD120^
  4766	034432	336 00 0 00 036672 		SKIPN	PI7SYS#
  4767	034433	254 00 0 00 034507 		JRST	MOD120
  4768									^
  4769	034434				MOD118:	CLEAN^
  4770	034434	7 000 20 0 00 634440 		CONO	634440
  4771	034435	7 004 20 0 00 010000 		CONO	PI,10000
  4772									^
  4773						CPINTR	4		^;ENABLE PROCESSOR INTERRUPT
  4774							;PROVIDE AN INTERRUPT TO PI
  4775	034436	205 00 0 00 400000 		MOVSI	400000		;BUS FROM PROCESSOR VIA ARROV
  4776	034437	270 00 0 00 000000 		ADD			;AND OTHER SOURCES
  4777	034440	7 000 20 0 00 042224 		CONO	42220+4
  4778	034441	400 00 0 00 000000 		SETZ			;WILL BE FILL BY ADDR OF XCT INST
  4779	034442	7 004 20 0 00 002377 		CONO	PI,PIG0		;ACT PI SYS
  4780	034443	302 00 0 00 000050 		CAIE	50		;EXPECT CHANNEL 4
  4781						STOP			^;IF C(0)=0 NO INTERRUPT. SEE CPA PRINT
  4782
  4783	034444	254 04 0 00 034445 		HALT	.+1
  4784	034445	320 00 0 00 034446 		JUMP	.+1
  4785
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 45
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0115

  4786
  4787						BLURB^
  4788					;CORE LOCATIONS 40 TO 60 CONTAIN A "MOVEI, ADDRESS"
  4789					;THEREFORE IF A INTERRUPT OCCURES THE MOVEI WILL
  4790					;STORE IN LOCATION ZERO THE ADDRESS OF THE EXECUTED
  4791					;INSTRUCTION
  4792					^
  4793	034446				MOD119:	CLEAN			^;ENABLE AN INTERRUPT ON CHANNEL 1-7
  4794
  4795	034446	7 000 20 0 00 634440 		CONO	634440
  4796	034447	7 004 20 0 00 010000 		CONO	PI,10000
  4797
  4798						CPINTR	7		^;CHECK PROCESSOR INTERRUPT
  4799							;PROVIDE AN INTERRUPT TO PI
  4800	034450	205 00 0 00 400000 		MOVSI	400000		;BUS FROM PROCESSOR VIA ARROV
  4801	034451	270 00 0 00 000000 		ADD			;AND OTHER SOURCES
  4802	034452	7 000 20 0 00 042227 		CONO	42220+7
  4803	034453	7 004 20 0 00 002377 		CONO	PI,PIG0
  4804	034454	302 00 0 00 000056 		CAIE	56
  4805						STOP			^;CH 7 FAIL TO INTERRUPT
  4806
  4807	034455	254 04 0 00 034456 		HALT	.+1
  4808	034456	320 00 0 00 034457 		JUMP	.+1
  4809
  4810	034457	7 000 20 0 00 000006 		CONO	6
  4811	034460	302 00 0 00 000054 		CAIE	54
  4812						STOP			^;CH 6 FAIL TO INTERRUPT
  4813
  4814	034461	254 04 0 00 034462 		HALT	.+1
  4815	034462	320 00 0 00 034463 		JUMP	.+1
  4816
  4817	034463	7 000 20 0 00 000005 		CONO	5
  4818	034464	302 00 0 00 000052 		CAIE	52
  4819						STOP			^;CH 5 FAIL TO INTERRUPT
  4820
  4821	034465	254 04 0 00 034466 		HALT	.+1
  4822	034466	320 00 0 00 034467 		JUMP	.+1
  4823
  4824	034467	7 000 20 0 00 000004 		CONO	4
  4825	034470	302 00 0 00 000050 		CAIE	50
  4826						STOP			^;CH 4 FAIL TO INTERRUPT
  4827
  4828	034471	254 04 0 00 034472 		HALT	.+1
  4829	034472	320 00 0 00 034473 		JUMP	.+1
  4830
  4831	034473	7 000 20 0 00 000003 		CONO	3
  4832	034474	302 00 0 00 000046 		CAIE	46
  4833						STOP			^;CH 3 FAIL TO INTERRUPT
  4834
  4835	034475	254 04 0 00 034476 		HALT	.+1
  4836	034476	320 00 0 00 034477 		JUMP	.+1
  4837
  4838	034477	7 000 20 0 00 000002 		CONO	2
  4839	034500	302 00 0 00 000044 		CAIE	44
  4840						STOP			^;CH 2 FAIL TO INTERRUPT
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 45-1
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0116

  4841
  4842	034501	254 04 0 00 034502 		HALT	.+1
  4843	034502	320 00 0 00 034503 		JUMP	.+1
  4844
  4845	034503	7 000 20 0 00 000001 		CONO	1
  4846	034504	302 00 0 00 000042 		CAIE	42
  4847						STOP			^;CH 1 FAIL TO INTERRUPT
  4848
  4849	034505	254 04 0 00 034506 		HALT	.+1
  4850	034506	320 00 0 00 034507 		JUMP	.+1
  4851
  4852	034507				MOD120:	CLEAN^
  4853	034507	7 000 20 0 00 634440 		CONO	634440
  4854	034510	7 004 20 0 00 010000 		CONO	PI,10000
  4855									^
  4856
  4857						BLURB^
  4858					;CORE LOCATIONS 40 TO 60 CONTAIN A "MOVEI, ADDRESS"
  4859					;THEREFORE IF A INTERRUPT OCCURES THE MOVEI WILL
  4860					;STORE IN LOCATION ZERO THE ADDRESS OF THE EXECUTED
  4861					;INSTRUCTION
  4862					^
  4863	034511				MOD121:	CLEAN^
  4864	034511	7 000 20 0 00 634440 		CONO	634440
  4865	034512	7 004 20 0 00 010000 		CONO	PI,10000
  4866									^
  4867	034513	400 00 0 00 000000 		SETZ			;C(0) MODIFIED IF INTERRUPT
  4868	034514	7 004 20 0 00 002377 		CONO	PI,PIG0		;ENABLE PI
  4869	034515	255 10 0 00 034516 		JFCL	10,.+1		;CLEAR AROV
  4870	034516	7 000 20 0 00 000021 		CONO	20+1		;ENABLE AROV CH1
  4871	034517	332 00 0 00 000000 		SKIPE			;INTERRUPT OCCURED SEE CPA PRINT
  4872						STOP			^;CPA AROV EN(1) AND GATE TO PIRQ
  4873
  4874	034520	254 04 0 00 034521 		HALT	.+1
  4875	034521	320 00 0 00 034522 		JUMP	.+1
  4876
  4877
  4878	034522				MOD122:	CLEAN^
  4879	034522	7 000 20 0 00 634440 		CONO	634440
  4880	034523	7 004 20 0 00 010000 		CONO	PI,10000
  4881									^
  4882	034524	400 00 0 00 000000 		SETZ
  4883	034525	7 004 20 0 00 002377 		CONO	PI,PIG0
  4884	034526	205 00 0 00 400000 		MOVSI	400000
  4885	034527	270 00 0 00 000000 		ADD			;SET AROV
  4886	034530	7 000 20 0 00 000001 		CONO	1		;AROV CNT NO ENABLE
  4887	034531	332 00 0 00 000000 		SKIPE			;INT OCCURED SEE CPU PRINT
  4888						STOP^
  4889	034532	254 04 0 00 034533 		HALT	.+1
  4890	034533	320 00 0 00 034534 		JUMP	.+1
  4891									^
  4892
  4893	034534				MOD123:	CLEAN^
  4894	034534	7 000 20 0 00 634440 		CONO	634440
  4895	034535	7 004 20 0 00 010000 		CONO	PI,10000
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 45-2
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0117

  4896									^
  4897	034536	400 00 0 00 000000 		SETZ
  4898	034537	7 004 20 0 00 002377 		CONO	PI,PIG0		;ENABLE PI
  4899	034540	205 00 0 00 400000 		MOVSI	400000		;SET AROV
  4900	034541	270 00 0 00 000000 		ADD			;FLOP
  4901	034542	7 000 20 0 00 000021 		CONO	21		;FLOP AND AROV (EN)
  4902	034543	302 00 0 00 000042 		CAIE	42		;NO INTERRUPT CHECK AND GATE
  4903						STOP			^;TO PIRQ ON CPU PRINT
  4904
  4905	034544	254 04 0 00 034545 		HALT	.+1
  4906	034545	320 00 0 00 034546 		JUMP	.+1
  4907
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 46
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0118

  4908
  4909	034546				MOD124:	CLEAN^
  4910	034546	7 000 20 0 00 634440 		CONO	634440
  4911	034547	7 004 20 0 00 010000 		CONO	PI,10000
  4912									^
  4913	034550	400 00 0 00 000000 		SETZ
  4914	034551	7 004 20 0 00 002377 		CONO	PI,PIG0		;ENABLE PI
  4915	034552	7 000 34 0 00 001000 		CONSO	1000
  4916	034553	254 00 0 00 034552 		JRST	.-1		;WAIT IF CLK=0
  4917	034554	7 000 20 0 00 002001 		CONO	2001		;SET CLOCK ENABLE
  4918	034555	302 00 0 00 000042 		CAIE	42		;SHOULD INTERRUPT TO LOC 42
  4919						STOP			^;SEE CPU PRINT AND CLK ENABLE
  4920
  4921	034556	254 04 0 00 034557 		HALT	.+1
  4922	034557	320 00 0 00 034560 		JUMP	.+1
  4923
  4924
  4925						BLURB^
  4926					;CORE LOCATIONS 40 TO 60 CONTAIN A "MOVEI, ADDRESS"
  4927					;THEREFORE IF A INTERRUPT OCCURES THE MOVEI WILL
  4928					;STORE IN LOCATION ZERO THE ADDRESS OF THE EXECUTED
  4929					;INSTRUCTION
  4930					^
  4931	034560				MOD125:	CLEAN^
  4932	034560	7 000 20 0 00 634440 		CONO	634440
  4933	034561	7 004 20 0 00 010000 		CONO	PI,10000
  4934									^
  4935	034562	7 004 20 0 00 002377 		CONO	PI,PIG0		;ENABLE PISYS
  4936	034563	7 000 20 0 00 000001 		CONO	1		;TRY TO SET NONEX MEM
  4937	034564	400 00 0 00 000000 		SETZ			;NO INTERRUPT SET
  4938	034565	310 00 0 00 777777 		CAM	-1		;NONEX INPUT TO
  4939	034566	302 00 0 00 000042 		CAIE	42		;PIRQ ON CPA
  4940						STOP			^;PRINT
  4941
  4942	034567	254 04 0 00 034570 		HALT	.+1
  4943	034570	320 00 0 00 034571 		JUMP	.+1
  4944
  4945
  4946	034571				MOD127:	CLEAN^
  4947	034571	7 000 20 0 00 634440 		CONO	634440
  4948	034572	7 004 20 0 00 010000 		CONO	PI,10000
  4949									^
  4950	034573	7 004 20 0 00 002377 		CONO	PI,PIG0		;ENABLE PI
  4951	034574	7 000 20 0 00 000001 		CONO	1		;CPU TO CHANNEL 1
  4952	034575	474 00 0 00 000000 		SETO			;SET THE
  4953	034576	260 00 0 00 034577 		PUSHJ	.+1		;PDL FLAG
  4954	034577	302 00 0 00 000042 		CAIE	42		;IT FAILED TO INTERRUPT
  4955						STOP			^;SEE ITS INPUT TO PIRQ ON CPA PRINT
  4956
  4957	034600	254 04 0 00 034601 		HALT	.+1
  4958	034601	320 00 0 00 034602 		JUMP	.+1
  4959
  4960
  4961	034602				MOD128:	CLEAN^
  4962	034602	7 000 20 0 00 634440 		CONO	634440
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 46-1
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0119

  4963	034603	7 004 20 0 00 010000 		CONO	PI,10000
  4964									^
  4965	034604	7 004 20 0 00 002377 		CONO	PI,PIG0		;ENABLE PI
  4966	034605	7 000 20 0 00 000001 		CONO	1
  4967	034606	400 00 0 00 000000 		SETZ
  4968	034607	7 004 20 0 00 040000 		CONO	PI,40000	;ENABLE PAR
  4969	034610	332 00 0 00 000000 		SKIPE			;INTERRUPT OCCURED
  4970						STOP			^;CHECK CPU PIRQ INPUT
  4971
  4972	034611	254 04 0 00 034612 		HALT	.+1
  4973	034612	320 00 0 00 034613 		JUMP	.+1
  4974
  4975
  4976	034613				MOD129:	CLEAN^
  4977	034613	7 000 20 0 00 634440 		CONO	634440
  4978	034614	7 004 20 0 00 010000 		CONO	PI,10000
  4979									^
  4980	034615	255 01 0 00 034616 		JFCL	1,.+1		;CLEAR FOV
  4981	034616	7 004 20 0 00 002377 		CONO	PI,PIG0		;ENABLE PI
  4982	034617	400 00 0 00 000000 		SETZ
  4983	034620	7 004 20 0 00 000201 		CONO	PI,201		;FOV ENABLE. INTERRUPT
  4984	034621	332 00 0 00 000000 		SKIPE			;OCCURED CK PIRQ INPUTS
  4985						STOP			^;ON CPU PRINT
  4986
  4987	034622	254 04 0 00 034623 		HALT	.+1
  4988	034623	320 00 0 00 034624 		JUMP	.+1
  4989
  4990
  4991	034624				MOD130:	CLEAN^
  4992	034624	7 000 20 0 00 634440 		CONO	634440
  4993	034625	7 004 20 0 00 010000 		CONO	PI,10000
  4994									^
  4995						SFLAG 40000		^;SET FOV FLAG
  4996
  4997	034626	205 01 0 00 040000 		MOVSI	1,40000
  4998	034627	255 17 0 00 034630 		JFCL	17,.+1
  4999	034630	254 02 0 01 034631 		JRST	2,.+1(1)
  5000
  5001	034631	400 00 0 00 000000 		SETZ
  5002	034632	7 004 20 0 00 002377 		CONO	PI,PIG0		;ENABLE PI
  5003	034633	7 000 20 0 00 000001 		CONO	1		;CH1 TO PROCESSOR
  5004	034634	332 00 0 00 000000 		SKIPE			;FOV ENABLE FAIL TO PREVENT
  5005						STOP			^;INTERRUPT SEE CPU PRINT
  5006
  5007	034635	254 04 0 00 034636 		HALT	.+1
  5008	034636	320 00 0 00 034637 		JUMP	.+1
  5009
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 47
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0120

  5010						BLURB^
  5011					;CORE LOCATIONS 40 TO 60 CONTAIN A "MOVEI, ADDRESS"
  5012					;THEREFORE IF A INTERRUPT OCCURES THE MOVEI WILL
  5013					;STORE IN LOCATION ZERO THE ADDRESS OF THE EXECUTED
  5014					;INSTRUCTION
  5015					^
  5016	034637				MOD131:	CLEAN^
  5017	034637	7 000 20 0 00 634440 		CONO	634440
  5018	034640	7 004 20 0 00 010000 		CONO	PI,10000
  5019									^
  5020						SFLAG 40000		^;SET FOV FLAG
  5021
  5022	034641	205 01 0 00 040000 		MOVSI	1,40000
  5023	034642	255 17 0 00 034643 		JFCL	17,.+1
  5024	034643	254 02 0 01 034644 		JRST	2,.+1(1)
  5025
  5026	034644	7 004 20 0 00 002377 		CONO	PI,PIG0		;ENABLE PI
  5027	034645	400 00 0 00 000000 		SETZ
  5028	034646	7 000 20 0 00 000201 		CONO	201		;ENABLE FOV+CH1
  5029	034647	302 00 0 00 000042 		CAIE	42		;FAIL TO INTERRUPT SEE
  5030						STOP			^;PIRQ INPUTS ON CPA PRINT
  5031
  5032	034650	254 04 0 00 034651 		HALT	.+1
  5033	034651	320 00 0 00 034652 		JUMP	.+1
  5034
  5035	034652				MOD132:	CLEAN^
  5036	034652	7 000 20 0 00 634440 		CONO	634440
  5037	034653	7 004 20 0 00 010000 		CONO	PI,10000
  5038									^
  5039	034654	7 004 20 0 00 004300 		CONO	PI,ACT+PIREQ+100	;INTERRUPT
  5040						REPEAT	^D10,
  5041					<	JRST .+1>
  5042	034655	254 00 0 00 034656 		JRST .+1
  5043	034656	254 00 0 00 034657 		JRST .+1
  5044	034657	254 00 0 00 034660 		JRST .+1
  5045	034660	254 00 0 00 034661 		JRST .+1
  5046	034661	254 00 0 00 034662 		JRST .+1
  5047	034662	254 00 0 00 034663 		JRST .+1
  5048	034663	254 00 0 00 034664 		JRST .+1
  5049	034664	254 00 0 00 034665 		JRST .+1
  5050	034665	254 00 0 00 034666 		JRST .+1
  5051	034666	254 00 0 00 034667 		JRST .+1
  5052	034667	7 004 34 0 00 040000 		CONSO	PI,40000	;PIH WAS RESET BY JRST (NO BIT 9)
  5053						STOP			^;SEE PI RESTORE LOGIC ON PI1 PRINT
  5054
  5055	034670	254 04 0 00 034671 		HALT	.+1
  5056	034671	320 00 0 00 034672 		JUMP	.+1
  5057
  5058	034672				MOD133:	CLEAN^
  5059	034672	7 000 20 0 00 634440 		CONO	634440
  5060	034673	7 004 20 0 00 010000 		CONO	PI,10000
  5061									^
  5062	034674	7 004 20 0 00 004300 		CONO	PI,ACT+PIREQ+100	;INTERRUPT
  5063						REPEAT	^D10,
  5064					<	CAI 10,0>
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 47-1
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0121

  5065	034675	300 10 0 00 000000 		CAI 10,0
  5066	034676	300 10 0 00 000000 		CAI 10,0
  5067	034677	300 10 0 00 000000 		CAI 10,0
  5068	034700	300 10 0 00 000000 		CAI 10,0
  5069	034701	300 10 0 00 000000 		CAI 10,0
  5070	034702	300 10 0 00 000000 		CAI 10,0
  5071	034703	300 10 0 00 000000 		CAI 10,0
  5072	034704	300 10 0 00 000000 		CAI 10,0
  5073	034705	300 10 0 00 000000 		CAI 10,0
  5074	034706	300 10 0 00 000000 		CAI 10,0
  5075	034707	7 004 34 0 00 040000 		CONSO	PI,40000	;PIH WAS RESET BY BIT9(NO JRST)
  5076						STOP			^;SEE PI RESTORE LOGIC ON PI1 PRINT
  5077
  5078	034710	254 04 0 00 034711 		HALT	.+1
  5079	034711	320 00 0 00 034712 		JUMP	.+1
  5080
  5081	034712				MOD134:	CLEAN			^;TEST PI CYC(1) INPUT TO PI OV
  5082
  5083	034712	7 000 20 0 00 634440 		CONO	634440
  5084	034713	7 004 20 0 00 010000 		CONO	PI,10000
  5085
  5086	034714	474 00 0 00 000000 		SETO			;PROVIDE ALL CONDITIONS TO SET
  5087	034715	7 000 00 0 00 000000 		BLKI			;PI OV EXCEPT PI CYC(1)
  5088	034716	7 004 20 0 00 004300 		CONO	PI,ACT+PIREQ+100	;IF C(0)=43 REPLACE THE B137
  5089	034717	302 00 0 00 000042 		CAIE	42		;AND GATE TO PI OV SEE
  5090						STOP			^;PI1 PRINT
  5091
  5092	034720	254 04 0 00 034721 		HALT	.+1
  5093	034721	320 00 0 00 034722 		JUMP	.+1
  5094
  5095	034722				MOD135:	CLEAN^
  5096	034722	7 000 20 0 00 634440 		CONO	634440
  5097	034723	7 004 20 0 00 010000 		CONO	PI,10000
  5098									^
  5099	034724	200 00 0 00 036477 		MOVE	[BLKO ME,0]	;PUT A BLKI IN
  5100	034725	202 00 0 00 000042 		MOVEM	42		;LOC 42
  5101	034726	400 00 0 00 000000 		SETZ			;PROVIDE FOR NO OVERFLOW
  5102	034727	7 004 20 0 00 004300 		CONO	PI,ACT+PIREQ+100	;INTERRUPT. IF C(0)=43
  5103	034730	306 00 0 00 000043 		CAIN	43		;AND GATE TO PIOU THE AD
  5104						STOP			^;CRY0(1) INPUT FAILED. SEE PI1 PRINT
  5105
  5106	034731	254 04 0 00 034732 		HALT	.+1
  5107	034732	320 00 0 00 034733 		JUMP	.+1
  5108
  5109	034733	254 00 0 00 034734 		JRST	MOD136
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 48
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0122

  5110					;HOLE LEFT FOR RELOCATION TEST
  5111
  5112
  5113	034734				MOD136:	CLEAN^
  5114	034734	7 000 20 0 00 634440 		CONO	634440
  5115	034735	7 004 20 0 00 010000 		CONO	PI,10000
  5116									^
  5117	034736	200 00 0 00 036500 		MOVE	[AOS]		;PUT AN AOS IN LOC 42
  5118	034737	202 00 0 00 000042 		MOVEM	42		;PROVIDE ALL INPUTS TO
  5119	034740	474 00 0 00 000000 		SETO			;PIOU EXCEPT IOT BLK
  5120	034741	7 004 20 0 00 004300 		CONO	PI,ACT+PIREQ+100	;CANT TEST GATE
  5121	034742	332 00 0 00 000000 		SKIPE			;THINK UNNECESSARY
  5122						STOP			^;BUT DO IT ANYWAY
  5123
  5124	034743	254 04 0 00 034744 		HALT	.+1
  5125	034744	320 00 0 00 034745 		JUMP	.+1
  5126
  5127
  5128	034745				MOD137:	CLEAN^
  5129	034745	7 000 20 0 00 634440 		CONO	634440
  5130	034746	7 004 20 0 00 010000 		CONO	PI,10000
  5131									^
  5132	034747	200 00 0 00 036477 		MOVE	[BLKO ME,0]	;SETUP A BLKO TO SET
  5133	034750	202 00 0 00 000042 		MOVEM	42		;THE PI OV FLOP
  5134	034751	474 00 0 00 000000 		SETO
  5135	034752	7 004 20 0 00 004300 		CONO	PI,ACT+PIREQ+100	;CAUSE FIRST INTERRUPT
  5136	034753	400 00 0 00 000000 		SETZ			;PI SHOULD SET AT THIS
  5137						CLEAN			^;TIME, IF PI OV IS NOT
  5138
  5139	034754	7 000 20 0 00 634440 		CONO	634440
  5140	034755	7 004 20 0 00 010000 		CONO	PI,10000
  5141
  5142	034756	7 004 20 0 00 004300 		CONO	PI,ACT+PIREQ+100	;CLEARED AT ST1 NEXT INTERRUPT
  5143	034757	306 00 0 00 000043 		CAIN	43		;WILL OCCUR AT LOC 43
  5144						STOP			^;SET PI 1 PRINT.
  5145
  5146	034760	254 04 0 00 034761 		HALT	.+1
  5147	034761	320 00 0 00 034762 		JUMP	.+1
  5148
  5149
  5150	034762				MOD140:	CLEAN^
  5151	034762	7 000 20 0 00 634440 		CONO	634440
  5152	034763	7 004 20 0 00 010000 		CONO	PI,10000
  5153									^
  5154	034764	200 00 0 00 036477 		MOVE	[BLKO ME,0]	;PUT A BLKO IN LOC 42
  5155	034765	202 00 0 00 000042 		MOVEM	42		;WHEN EXECUTED THIS SHOULD
  5156	034766	474 00 0 00 000000 		SETO			;SET PIOV. IF PI OV IS NOT
  5157	034767	7 004 20 0 00 004300 		CONO	PI,ACT+PIREQ+100	;CONNECTED TO MA REGISTER
  5158	034770	405 00 0 00 777777 		ANDI	-1		;42 WILL BE EXECUTED TWICE
  5159	034771	306 00 0 00 000001 		CAIN	1		;SEE MA 35 SET AT IT0
  5160						STOP			^;AND PI OV(1) ON MA1 PRINT
  5161
  5162	034772	254 04 0 00 034773 		HALT	.+1
  5163	034773	320 00 0 00 034774 		JUMP	.+1
  5164
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 48-1
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0123

  5165
  5166	034774				MOD141:	CLEAN			^;CHECK BLKO NOT RESET PIH
  5167
  5168	034774	7 000 20 0 00 634440 		CONO	634440
  5169	034775	7 004 20 0 00 010000 		CONO	PI,10000
  5170
  5171	034776	200 00 0 00 036501 		MOVE	[MOVEI 42]	;RESTORE LOC 42
  5172	034777	202 00 0 00 000042 		MOVEM	42		;TO MOVEI
  5173	035000	7 004 20 0 00 004300 		CONO	PI,PIREQ+ACT+100	;SET PIH VIA INTERRUPT
  5174	035001	400 00 0 00 000000 		SETZ			;IF PIH1(0) THEN PI CYC(1)
  5175	035002	7 774 10 0 00 000000 		BLKO	ME,0		;INPUT TO PI RESTORE FAILED
  5176
  5177	035003	300 00 0 00 000000 		CAI
  5178	035004	7 004 34 0 00 040000 		CONSO	PI,40000		;SET PI1 PRINT
  5179						STOP^
  5180	035005	254 04 0 00 035006 		HALT	.+1
  5181	035006	320 00 0 00 035007 		JUMP	.+1
  5182									^
  5183
  5184	035007				MOD142:	CLEAN			^;CHECK PI RESTORE LOGIC
  5185
  5186	035007	7 000 20 0 00 634440 		CONO	634440
  5187	035010	7 004 20 0 00 010000 		CONO	PI,10000
  5188
  5189	035011	200 00 0 00 036502 		MOVE	[DATAO ME,0]	;DATAO AND PIOV SHOULD PRODUCE
  5190	035012	202 00 0 00 000042 		MOVEM	42		;PI RESTORE. CHECK THIS INPUT
  5191	035013	7 004 20 0 00 004300 		CONO	PI,PIREQ+ACT+100	;TO PI RESTORE ON PI1 PRINT
  5192	035014	7 004 30 0 00 040000 		CONSZ	PI,40000		;ALSO CHECK PI CYC(1) INPUT
  5193						STOP			^;ON SAME PAGE
  5194
  5195	035015	254 04 0 00 035016 		HALT	.+1
  5196	035016	320 00 0 00 035017 		JUMP	.+1
  5197
  5198
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 49
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0124

  5199	035017				MOD143:	CLEAN^
  5200	035017	7 000 20 0 00 634440 		CONO	634440
  5201	035020	7 004 20 0 00 010000 		CONO	PI,10000
  5202									^
  5203	035021	200 00 0 00 036503 		MOVE	[DATAI ME,0]	;IF MACHINE HANGS OR
  5204	035022	202 00 0 00 000042 		MOVEM	42		;PIH(1) CHECK DATAO/DATAI
  5205	035023	7 004 20 0 00 004300 		CONO	PI,PIREQ+ACT+100	;INPUT TO PRIORITY SYSTEM
  5206	035024	7 004 30 0 00 040000 		CONSZ	PI,40000		;SEE PI1 PRINT (LOWER LEFT)
  5207						STOP^
  5208	035025	254 04 0 00 035026 		HALT	.+1
  5209	035026	320 00 0 00 035027 		JUMP	.+1
  5210									^
  5211
  5212	035027				MOD144:	CLEAN^
  5213	035027	7 000 20 0 00 634440 		CONO	634440
  5214	035030	7 004 20 0 00 010000 		CONO	PI,10000
  5215									^
  5216	035031	200 00 0 00 036477 		MOVE	[BLKO ME,0]	;INTERRUPT TO A BLKO WHOS
  5217	035032	202 00 0 00 000042 		MOVEM	42		;POINTER SHOULD SET PIOV. THE
  5218	035033	474 00 0 00 000000 		SETO			;INST AT LOC 43 A (MOVEI 43)
  5219	035034	7 004 20 0 00 004300 		CONO	PI,PIREQ+ACT+100	;SHOULD BE EXECUTED. CHECK
  5220	035035	7 004 34 0 00 040000 		CONSO	PI,40000	;PI OV AND ASSOCIATED LOGIC
  5221						STOP			^;ON PI1 PRINT
  5222
  5223	035036	254 04 0 00 035037 		HALT	.+1
  5224	035037	320 00 0 00 035040 		JUMP	.+1
  5225
  5226
  5227	035040				MOD145:	CLEAN^
  5228	035040	7 000 20 0 00 634440 		CONO	634440
  5229	035041	7 004 20 0 00 010000 		CONO	PI,10000
  5230									^
  5231	035042	200 00 0 00 036477 		MOVE	[BLKO ME,0]	;INTERRUPT TO A BLKO WHOS
  5232	035043	202 00 0 00 000042 		MOVEM	42		;POINTER SHOULD SET PIOV. THE
  5233	035044	474 00 0 00 000000 		SETO			;INST AT LOC 43 A (MOVEI 43)
  5234	035045	7 004 20 0 00 004300 		CONO	PI,PIREQ+ACT+100	;SHOULD BE EXECUTED. CHECK
  5235	035046	302 00 0 00 000043 		CAIE	43		;CHECK PI OV INPUT TO MA35
  5236						STOP			^;SET ON MA1 PRINT
  5237
  5238	035047	254 04 0 00 035050 		HALT	.+1
  5239	035050	320 00 0 00 035051 		JUMP	.+1
  5240
  5241
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 50
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0125

  5242	035051				MOD147:	CLEAN			^;TEST PI CYC(0) GET TO PIR STB
  5243
  5244	035051	7 000 20 0 00 634440 		CONO	634440
  5245	035052	7 004 20 0 00 010000 		CONO	PI,10000
  5246
  5247	035053	200 00 0 00 036477 		MOVE	[BLKO ME,0]	;PUT A BLKO WITH POINTER TO
  5248	035054	202 00 0 00 000044 		MOVEM	44		;SET PI OV IN CHANNEL 2 BLKO
  5249	035055	200 00 0 00 036504 		MOVE	[MOVEI 1,42]	;WILL SET NONEX MEM CAUSING
  5250	035056	202 00 0 00 000042 		MOVEM	42		;INTERRUPT ON CH1 THE INSTRUCTION
  5251	035057	561 00 0 00 777776 		HRROI	-2		;AT LOC 45 MUST BE EXECUTED
  5252	035060	7 004 20 0 00 002100 		CONO PI,PIOSET+100
  5253	035061	7 000 20 0 00 000001 		CONO	1		;OR PI CYC(0) GATE TO PIR STB FAILED
  5254	035062	7 004 20 0 00 004240 		CONO PI,PIREQ+ACT+40
  5255	035063	302 00 0 00 000045 		CAIE	45		;AND OF MC RQ PULSE PICYC(0)
  5256						STOP^
  5257	035064	254 04 0 00 035065 		HALT	.+1
  5258	035065	320 00 0 00 035066 		JUMP	.+1
  5259									^
  5260	035066	302 01 0 00 000042 		CAIE	1,42
  5261						STOP			^;NONEX FAIL TO INTERRUPT CH1
  5262
  5263	035067	254 04 0 00 035070 		HALT	.+1
  5264	035070	320 00 0 00 035071 		JUMP	.+1
  5265
  5266
  5267	035071				MOD148:	CLEAN			^;PUT A SKIPA IN THE
  5268
  5269	035071	7 000 20 0 00 634440 		CONO	634440
  5270	035072	7 004 20 0 00 010000 		CONO	PI,10000
  5271
  5272	035073	200 00 0 00 036505 		MOVE	[SKIPA]		;INTERRUPT SPOT
  5273	035074	202 00 0 00 000042 		MOVEM	42
  5274	035075	7 004 20 0 00 004300 		CONO	PI,PIREQ+ACT+100
  5275						STOP^
  5276	035076	254 04 0 00 035077 		HALT	.+1
  5277	035077	320 00 0 00 035100 		JUMP	.+1
  5278									^
  5279
  5280	035100				MOD149:	CLEAN^
  5281	035100	7 000 20 0 00 634440 		CONO	634440
  5282	035101	7 004 20 0 00 010000 		CONO	PI,10000
  5283									^
  5284	035102	200 00 0 00 036506 		MOVE	[JSR .+4]
  5285	035103	202 00 0 00 000042 		MOVEM	42
  5286	035104	7 004 20 0 00 004300 		CONO	PI,PIREQ+ACT+100
  5287						STOP^
  5288	035105	254 04 0 00 035106 		HALT	.+1
  5289	035106	320 00 0 00 035107 		JUMP	.+1
  5290									^
  5291	035107	000000	000000			0
  5292
  5293	035110				MOD150:	CLEAN			^;INTERRUPT TO A PUSHJ
  5294
  5295	035110	7 000 20 0 00 634440 		CONO	634440
  5296	035111	7 004 20 0 00 010000 		CONO	PI,10000
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 50-1
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0126

  5297
  5298	035112	200 00 0 00 036507 		MOVE	[PUSHJ .+4]
  5299	035113	202 00 0 00 000042 		MOVEM	42
  5300	035114	205 00 0 00 777777 		MOVSI	-1
  5301	035115	7 004 20 0 00 004300 		CONO	PI,ACT+PIREQ+100
  5302	035116	405 01 0 00 777777 		ANDI	1,-1
  5303	035117	302 01 0 00 035116 		CAIE	1,.-1
  5304						STOP			^;PC STORED INCORRECTLY
  5305
  5306	035120	254 04 0 00 035121 		HALT	.+1
  5307	035121	320 00 0 00 035122 		JUMP	.+1
  5308
  5309	035122	302 00 0 00 000001 		CAIE	1		;THE PUSHJ
  5310						STOP			^;POINTER WORD IN ERROR
  5311
  5312	035123	254 04 0 00 035124 		HALT	.+1
  5313	035124	320 00 0 00 035125 		JUMP	.+1
  5314
  5315						CLEAN^
  5316	035125	7 000 20 0 00 634440 		CONO	634440
  5317	035126	7 004 20 0 00 010000 		CONO	PI,10000
  5318									^
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 51
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0127

  5319	035127				MOD151:	CLEAN^
  5320	035127	7 000 20 0 00 634440 		CONO	634440
  5321	035130	7 004 20 0 00 010000 		CONO	PI,10000
  5322									^
  5323	035131	200 00 0 00 036510 		MOVE [MOVEI 43]		;TEST CLEAR MA ON INTERRUPT
  5324	035132	202 00 0 00 000043 		MOVEM 43
  5325	035133	200 00 0 00 036511 		MOVE [BLKO ME,4]
  5326	035134	202 00 0 00 000042 		MOVEM 42
  5327	035135	477 00 0 00 000004 		SETOB 4
  5328	035136	541 04 0 00 000004 		HRRI 4,4
  5329	035137	7 004 20 0 00 004300 		CONO PI,PIREQ+ACT+100
  5330	035140	302 00 0 00 000043 		CAIE 43
  5331						STOP^
  5332	035141	254 04 0 00 035142 		HALT	.+1
  5333	035142	320 00 0 00 035143 		JUMP	.+1
  5334									^
  5335
  5336
  5337	035143	402 00 0 00 000060 	MOD152:	SETZM	60		;TEST TRAP TO 60
  5338	035144	200 00 0 00 036512 		MOVE	[JSP MOD153]	;GO HERE IF TRAP TO 40
  5339	035145	202 00 0 00 000041 		MOVEM	41		;ERROR
  5340	035146	200 00 0 00 036513 		MOVE	[JSP MOD153+1]
  5341	035147	202 00 0 00 000061 		MOVEM	61		;OK TRAP
  5342	035150	100000	000000			XWD	100000,0	;OP CODE 100-127
  5343						STOP^
  5344	035151	254 04 0 00 035152 		HALT	.+1
  5345	035152	320 00 0 00 035153 		JUMP	.+1
  5346									^
  5347	035153				MOD153:	STOP^
  5348	035153	254 04 0 00 035154 		HALT	.+1
  5349	035154	320 00 0 00 035155 		JUMP	.+1
  5350									^
  5351	035155	336 00 0 00 000060 		SKIPN	60		;NOTHING STORED IN C(60)
  5352						STOP^
  5353	035156	254 04 0 00 035157 		HALT	.+1
  5354	035157	320 00 0 00 035160 		JUMP	.+1
  5355									^
  5356
  5357	035160	336 00 0 00 036674 	MOD154:	SKIPN	USMOD#		;TEST RELOC IF SPECIFIED
  5358	035161	254 00 0 00 036303 		JRST	MOD195
  5359
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 52
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0128

  5360					DEFINE	UMON<
  5361						CONO	634440		;PREPARE TO TURN ON USER
  5362						CONO	PI,10000	;MODE. CL PI, IOB, RELOC
  5363						DATAO	[XWD -1,0]>
  5364
  5365					DEFINE	UMOFF<
  5366						MOVE	[JSP .+3]	;TURN OFF USER MODE VIA
  5367						MOVEM	41		;UUO. PROG RETURNS TO END
  5368						XWD	040000,0	;OF MACRO. PC+FLAGS STORED .+1
  5369					>
  5370
  5371					DEFINE	HOLD<
  5372						JUMPA	.		;MACH ERROR. HALT MAY TRAP
  5373						JUMP	.+1		;SO WAITING FOR OPERATOR
  5374					>
  5375
  5376	035162	254 02 1 00 036514 	MOD160:	JRST	2,@[XWD 0,.+1]	;CLEAR EX IOT USER, IF LIGHT
  5377	035163	265 00 0 00 035164 		JSP	.+1		;OUT FLAG TRANSFER TO AR FAIL
  5378
  5379	035164	603 00 0 00 004000 		TLNE UMIOT		;BIT 6. OR FLOP FAIL TO CLEAR
  5380						STOP^
  5381	035165	254 04 0 00 035166 		HALT	.+1
  5382	035166	320 00 0 00 035167 		JUMP	.+1
  5383									^
  5384
  5385	035167	254 02 1 00 036515 		JRST	2,@[XWD UMIOT,.+1]	;SET THEN CLEAR EX IOT USER
  5386	035170	254 02 1 00 036516 		JRST	2,@[XWD 0,.+1]	;CK AND GATE ARF FLAGS FM BR (J),
  5387	035171	265 00 0 00 035172 		JSP	.+1		;BR6(0) FAIL TO CLEAR
  5388
  5389	035172	603 00 0 00 004000 		TLNE UMIOT		;EX IOT USER ON EX PRINT
  5390						STOP^
  5391	035173	254 04 0 00 035174 		HALT	.+1
  5392	035174	320 00 0 00 035175 		JUMP	.+1
  5393									^
  5394
  5395	035175	254 02 1 00 036517 		JRST	2,@[XWD 0,.+1]	;CLEAR THEN SET EX IOT USER
  5396	035176	254 02 1 00 036520 		JRST	2,@[XWD UMIOT,.+1]	;IF LIGHT=1 FLAGS TO AR FAIL
  5397	035177	265 00 0 00 035200 		JSP	.+1		;IF LIGHT=0 FLOP FAIL TO SET. CK
  5398	035200	607 00 0 00 004000 		TLNN	UMIOT		;BR6(1), EX USER(0), ARF FLAGS(J), EX PRINT
  5399						STOP^
  5400	035201	254 04 0 00 035202 		HALT	.+1
  5401	035202	320 00 0 00 035203 		JUMP	.+1
  5402									^
  5403
  5404	035203	254 02 1 00 036521 		JRST	2,@[XWD 0,.+1]	;CLEAR USER. IOB1 PRINT
  5405	035204	7 000 30 0 00 100000 		CONSZ	1B20		;READ PROCESSOR STATUS
  5406						STOP^
  5407	035205	254 04 0 00 035206 		HALT	.+1
  5408	035206	320 00 0 00 035207 		JUMP	.+1
  5409									^
  5410
  5411	035207	254 02 1 00 036522 		JRST	2,@[XWD UMIOT,.+1]	;SET USER IOB1 PRINT
  5412	035210	7 000 34 0 00 100000 		CONSO	1B20		;CPA STATUS FAIL
  5413						STOP^
  5414	035211	254 04 0 00 035212 		HALT	.+1
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 52-1
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0129

  5415	035212	320 00 0 00 035213 		JUMP	.+1
  5416									^
  5417
  5418	035213				MOD161:	UMOFF^
  5419	035213	200 00 0 00 036523 		MOVE	[JSP .+3]	;TURN OFF USER MODE VIA
  5420	035214	202 00 0 00 000041 		MOVEM	41		;UUO. PROG RETURNS TO END
  5421	035215	040000	000000			XWD	040000,0	;OF MACRO. PC+FLAGS STORED .+1
  5422					^
  5423	035216	603 00 0 00 010000 		TLNE	USERF		;FLAGS TO AR BIT5 (USER MODE) FAIL
  5424						HOLD^
  5425	035217	324 00 0 00 035217 		JUMPA	.		;MACH ERROR. HALT MAY TRAP
  5426	035220	320 00 0 00 035221 		JUMP	.+1		;SO WAITING FOR OPERATOR
  5427					^
  5428
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 53
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0130

  5429					;TRY TO TURN ON USER MODE VIA RESTORE FLAGS THEN
  5430					;TURN OFF VIA UU0. SEE EX PRINT
  5431
  5432	035221	200 00 0 00 036524 	MOD162:	MOVE	[JSP	MD162A]
  5433	035222	202 00 0 00 000041 		MOVEM	41
  5434						UMON^
  5435	035223	7 000 20 0 00 634440 		CONO	634440		;PREPARE TO TURN ON USER
  5436	035224	7 004 20 0 00 010000 		CONO	PI,10000	;MODE. CL PI, IOB, RELOC
  5437	035225	7 000 14 0 00 036525 		DATAO	[XWD -1,0]^
  5438	035226	254 02 1 00 036526 		JRST	2,@[XWD USERF+UMIOT,MD162B]	;ALSO PRIVI IO
  5439
  5440	035227				MD162A:	HOLD	^		;TRAP HERE, NO MEMORY ACCESS, USER MODE
  5441
  5442	035227	324 00 0 00 035227 		JUMPA	.		;MACH ERROR. HALT MAY TRAP
  5443	035230	320 00 0 00 035231 		JUMP	.+1		;SO WAITING FOR OPERATOR
  5444
  5445
  5446	035231				MD162B:	UMOFF^
  5447	035231	200 00 0 00 036527 		MOVE	[JSP .+3]	;TURN OFF USER MODE VIA
  5448	035232	202 00 0 00 000041 		MOVEM	41		;UUO. PROG RETURNS TO END
  5449	035233	040000	000000			XWD	040000,0	;OF MACRO. PC+FLAGS STORED .+1
  5450					^
  5451	035234	607 00 0 00 010000 		TLNN	USERF		;JSP STORED FLAGS IN C(0)
  5452						HOLD^
  5453	035235	324 00 0 00 035235 		JUMPA	.		;MACH ERROR. HALT MAY TRAP
  5454	035236	320 00 0 00 035237 		JUMP	.+1		;SO WAITING FOR OPERATOR
  5455					^
  5456
  5457					;TEST UUO TURN OFF OF USER MODE. PRIVI I/O ALLOWS
  5458					;IOT TO OCCUR IN CASE USER STILL ON. SEE EX PRINT
  5459
  5460	035237				MOD163:	UMON^
  5461	035237	7 000 20 0 00 634440 		CONO	634440		;PREPARE TO TURN ON USER
  5462	035240	7 004 20 0 00 010000 		CONO	PI,10000	;MODE. CL PI, IOB, RELOC
  5463	035241	7 000 14 0 00 036525 		DATAO	[XWD -1,0]^
  5464	035242	254 02 1 00 036530 		JRST	2,@[XWD USERF+UMIOT,.+1]
  5465						UMOFF^
  5466	035243	200 00 0 00 036531 		MOVE	[JSP .+3]	;TURN OFF USER MODE VIA
  5467	035244	202 00 0 00 000041 		MOVEM	41		;UUO. PROG RETURNS TO END
  5468	035245	040000	000000			XWD	040000,0	;OF MACRO. PC+FLAGS STORED .+1
  5469					^
  5470						UMOFF^
  5471	035246	200 00 0 00 036532 		MOVE	[JSP .+3]	;TURN OFF USER MODE VIA
  5472	035247	202 00 0 00 000041 		MOVEM	41		;UUO. PROG RETURNS TO END
  5473	035250	040000	000000			XWD	040000,0	;OF MACRO. PC+FLAGS STORED .+1
  5474					^
  5475	035251	603 00 0 00 010000 		TLNE	USERF		;FLAGS STORED VIA JSP AT 41
  5476						HOLD^
  5477	035252	324 00 0 00 035252 		JUMPA	.		;MACH ERROR. HALT MAY TRAP
  5478	035253	320 00 0 00 035254 		JUMP	.+1		;SO WAITING FOR OPERATOR
  5479					^
  5480
  5481	035254				MOD164:	UMON^
  5482	035254	7 000 20 0 00 634440 		CONO	634440		;PREPARE TO TURN ON USER
  5483	035255	7 004 20 0 00 010000 		CONO	PI,10000	;MODE. CL PI, IOB, RELOC
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 53-1
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0131

  5484	035256	7 000 14 0 00 036525 		DATAO	[XWD -1,0]^
  5485	035257	254 02 1 00 036533 		JRST	2,@[XWD USERF+UMIOT,.+1]	;SET USER+PRIV I/O
  5486	035260	200 00 0 00 036534 		MOVE	[JUMPA .+3]	;SET RETURN FOR THE
  5487	035261	202 00 0 00 000041 		MOVEM	41		;UUO. EX ILL OP SHOULD
  5488	035262	040000	000000			XWD	40000,0		;NOT TURN OFF USER FLAG
  5489	035263	265 00 0 00 035264 		JSP	.+1		;BECAUSE AR FM PC(J)(ET0)
  5490	035264	607 00 0 00 010000 		TLNN	USERF		;PULSE IF NOT PRESENT. SEE EX
  5491						HOLD^
  5492	035265	324 00 0 00 035265 		JUMPA	.		;MACH ERROR. HALT MAY TRAP
  5493	035266	320 00 0 00 035267 		JUMP	.+1		;SO WAITING FOR OPERATOR
  5494					^
  5495						UMOFF^
  5496	035267	200 00 0 00 036535 		MOVE	[JSP .+3]	;TURN OFF USER MODE VIA
  5497	035270	202 00 0 00 000041 		MOVEM	41		;UUO. PROG RETURNS TO END
  5498	035271	040000	000000			XWD	040000,0	;OF MACRO. PC+FLAGS STORED .+1
  5499					^
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 54
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0132

  5500
  5501					;PERFORM A UUO. THE PURPOSE OF THIS IS TO SET THE
  5502					;EX ILL OP FLOP.  THE FLOP SHOULD BE CLEARED BY THE
  5503					;JSP AT 41. IF HOWEVER THIS DID NOT OCCUR, ANY
  5504					;STORE PC INSTRUCTION IN USER MODE WOULD CLEAR
  5505					;USER MODE.  THIS TEST THEREFORE TEST THE CLEAR
  5506					;TO EX ILL OP VIA AR FM PC(J) (ET0) ON EX PRINT
  5507
  5508	035272				MOD165:	UMOFF^
  5509	035272	200 00 0 00 036536 		MOVE	[JSP .+3]	;TURN OFF USER MODE VIA
  5510	035273	202 00 0 00 000041 		MOVEM	41		;UUO. PROG RETURNS TO END
  5511	035274	040000	000000			XWD	040000,0	;OF MACRO. PC+FLAGS STORED .+1
  5512					^
  5513						UMON^
  5514	035275	7 000 20 0 00 634440 		CONO	634440		;PREPARE TO TURN ON USER
  5515	035276	7 004 20 0 00 010000 		CONO	PI,10000	;MODE. CL PI, IOB, RELOC
  5516	035277	7 000 14 0 00 036525 		DATAO	[XWD -1,0]^
  5517	035300	254 02 1 00 036537 		JRST	2,@[XWD USERF+UMIOT,.+1]
  5518	035301	265 00 0 00 035302 		JSP	.+1		;DONT FORGET FAIL TO CLEAR
  5519	035302	265 00 0 00 035303 		JSP	.+1		;MAY BE PHONEY SET EX ILL OP
  5520	035303	607 00 0 00 010000 		TLNN	USERF		;OR PHONEY CLEAR EX-USER
  5521						HOLD^
  5522	035304	324 00 0 00 035304 		JUMPA	.		;MACH ERROR. HALT MAY TRAP
  5523	035305	320 00 0 00 035306 		JUMP	.+1		;SO WAITING FOR OPERATOR
  5524					^
  5525						UMOFF^
  5526	035306	200 00 0 00 036540 		MOVE	[JSP .+3]	;TURN OFF USER MODE VIA
  5527	035307	202 00 0 00 000041 		MOVEM	41		;UUO. PROG RETURNS TO END
  5528	035310	040000	000000			XWD	040000,0	;OF MACRO. PC+FLAGS STORED .+1
  5529					^
  5530
  5531	035311				MOD166:	UMOFF^
  5532	035311	200 00 0 00 036541 		MOVE	[JSP .+3]	;TURN OFF USER MODE VIA
  5533	035312	202 00 0 00 000041 		MOVEM	41		;UUO. PROG RETURNS TO END
  5534	035313	040000	000000			XWD	040000,0	;OF MACRO. PC+FLAGS STORED .+1
  5535					^
  5536						UMON^
  5537	035314	7 000 20 0 00 634440 		CONO	634440		;PREPARE TO TURN ON USER
  5538	035315	7 004 20 0 00 010000 		CONO	PI,10000	;MODE. CL PI, IOB, RELOC
  5539	035316	7 000 14 0 00 036525 		DATAO	[XWD -1,0]^
  5540	035317	254 01 0 00 035320 		JRST	1,.+1		;SET USER MODE VIA ET0
  5541	035320	265 00 0 00 035321 		JSP	.+1		;IR JRST, IR12(1). IT FAILED
  5542	035321	607 00 0 00 010000 		TLNN	USERF		;REPLACE B135 ON EX PRINT
  5543						HOLD^
  5544	035322	324 00 0 00 035322 		JUMPA	.		;MACH ERROR. HALT MAY TRAP
  5545	035323	320 00 0 00 035324 		JUMP	.+1		;SO WAITING FOR OPERATOR
  5546					^
  5547						UMOFF^
  5548	035324	200 00 0 00 036542 		MOVE	[JSP .+3]	;TURN OFF USER MODE VIA
  5549	035325	202 00 0 00 000041 		MOVEM	41		;UUO. PROG RETURNS TO END
  5550	035326	040000	000000			XWD	040000,0	;OF MACRO. PC+FLAGS STORED .+1
  5551					^
  5552
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 55
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0133

  5553					;THIS TEST WILL TRY TO SET THE PRIV I/O BIT WHEN IN
  5554					;USER MODE. IF THE EX IOT USER FLOP SETS EX USER (0) INPUT
  5555					;TO THE FLAG FAILED  SEE EX PRINT
  5556
  5557	035327				MOD167:	UMON^
  5558	035327	7 000 20 0 00 634440 		CONO	634440		;PREPARE TO TURN ON USER
  5559	035330	7 004 20 0 00 010000 		CONO	PI,10000	;MODE. CL PI, IOB, RELOC
  5560	035331	7 000 14 0 00 036525 		DATAO	[XWD -1,0]^
  5561	035332	254 02 1 00 036543 		JRST	2,@[XWD USERF,.+1]	;SET USER
  5562	035333	254 02 1 00 036544 		JRST	2,@[XWD USERF+UMIOT,.+1]	;TRY TO SET PRIV I/O
  5563	035334	265 00 0 00 035335 		JSP	.+1
  5564	035335	603 00 0 00 004000 		TLNE	UMIOT
  5565						HOLD^
  5566	035336	324 00 0 00 035336 		JUMPA	.		;MACH ERROR. HALT MAY TRAP
  5567	035337	320 00 0 00 035340 		JUMP	.+1		;SO WAITING FOR OPERATOR
  5568					^
  5569						UMOFF^
  5570	035340	200 00 0 00 036545 		MOVE	[JSP .+3]	;TURN OFF USER MODE VIA
  5571	035341	202 00 0 00 000041 		MOVEM	41		;UUO. PROG RETURNS TO END
  5572	035342	040000	000000			XWD	040000,0	;OF MACRO. PC+FLAGS STORED .+1
  5573					^
  5574
  5575	035343				MOD170:	UMON^
  5576	035343	7 000 20 0 00 634440 		CONO	634440		;PREPARE TO TURN ON USER
  5577	035344	7 004 20 0 00 010000 		CONO	PI,10000	;MODE. CL PI, IOB, RELOC
  5578	035345	7 000 14 0 00 036525 		DATAO	[XWD -1,0]^
  5579	035346	254 02 1 00 036546 		JRST	2,@[XWD USERF,.+1]	;SET USER MODE
  5580	035347	200 00 0 00 036547 		MOVE	[JSP .+4]		;SET TRAP RETURN
  5581	035350	202 00 0 00 000041 		MOVEM	41			;1 PAST THE IOT INST
  5582	035351	402 00 0 00 000040 		SETZM	40			;FAIL TO TRAP. EX ALLOW IOT
  5583	035352	700000	000000			XWD	700000,0		;ALLOWED THE IOT IN USER
  5584	035353	336 00 0 00 000040 		SKIPN	40			;MODE. SEE EX PRINT
  5585						HOLD^
  5586	035354	324 00 0 00 035354 		JUMPA	.		;MACH ERROR. HALT MAY TRAP
  5587	035355	320 00 0 00 035356 		JUMP	.+1		;SO WAITING FOR OPERATOR
  5588					^
  5589						UMOFF^
  5590	035356	200 00 0 00 036550 		MOVE	[JSP .+3]	;TURN OFF USER MODE VIA
  5591	035357	202 00 0 00 000041 		MOVEM	41		;UUO. PROG RETURNS TO END
  5592	035360	040000	000000			XWD	040000,0	;OF MACRO. PC+FLAGS STORED .+1
  5593					^
  5594
  5595	035361				MOD171:	UMON^
  5596	035361	7 000 20 0 00 634440 		CONO	634440		;PREPARE TO TURN ON USER
  5597	035362	7 004 20 0 00 010000 		CONO	PI,10000	;MODE. CL PI, IOB, RELOC
  5598	035363	7 000 14 0 00 036525 		DATAO	[XWD -1,0]^
  5599	035364	254 02 1 00 036551 		JRST	2,@[XWD USERF+UMIOT,.+1]	;SET PRIVI+USER
  5600	035365	200 00 0 00 036552 		MOVE	[JSP .+4]		;SET TRAP RETURN 1 PAST
  5601	035366	202 00 0 00 000041 		MOVEM	41			;THE TRAP INST
  5602	035367	403 00 0 00 000040 		SETZB	40			;THE EX IOT USER FLOP
  5603	035370	700000	000000			XWD	700000,0		;SHOULD ALLOW THE IOT
  5604	035371	300 00 0 00 000000 		CAI
  5605	035372	332 00 0 00 000040 		SKIPE	40			;CHECK EX ALLOW IOT. EX PRINT
  5606						HOLD^
  5607	035373	324 00 0 00 035373 		JUMPA	.		;MACH ERROR. HALT MAY TRAP
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 55-1
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0134

  5608	035374	320 00 0 00 035375 		JUMP	.+1		;SO WAITING FOR OPERATOR
  5609					^
  5610						UMOFF^
  5611	035375	200 00 0 00 036553 		MOVE	[JSP .+3]	;TURN OFF USER MODE VIA
  5612	035376	202 00 0 00 000041 		MOVEM	41		;UUO. PROG RETURNS TO END
  5613	035377	040000	000000			XWD	040000,0	;OF MACRO. PC+FLAGS STORED .+1
  5614					^
  5615
  5616	035400				MOD172:	UMON^
  5617	035400	7 000 20 0 00 634440 		CONO	634440		;PREPARE TO TURN ON USER
  5618	035401	7 004 20 0 00 010000 		CONO	PI,10000	;MODE. CL PI, IOB, RELOC
  5619	035402	7 000 14 0 00 036525 		DATAO	[XWD -1,0]^
  5620	035403	254 02 1 00 036554 		JRST	2,@[XWD USERF+UMIOT,.+1]	;USER AND PRIV I/O
  5621	035404	200 00 0 00 036555 		MOVE	[JSP .+3]		;THEN CAUSE A PI REQUEST
  5622	035405	202 00 0 00 000042 		MOVEM	42			;PI CYC(1) SHOULD SET EX PI SYNC
  5623	035406	7 004 20 0 00 004300 		CONO	PI,ACT+PIREQ+100	;WHICH SHOULD CLEAR EX USER
  5624	035407	265 00 0 00 035410 		JSP	.+1			;AT ET1 OF JSP AT 42. IT
  5625	035410	603 00 0 00 010000 		TLNE	USERF			;FAILED. SEE EX PRINT
  5626						HOLD^
  5627	035411	324 00 0 00 035411 		JUMPA	.		;MACH ERROR. HALT MAY TRAP
  5628	035412	320 00 0 00 035413 		JUMP	.+1		;SO WAITING FOR OPERATOR
  5629					^
  5630
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 56
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0135

  5631					;THIS TEST WILL INSURE THAT EX ILL OP IS CLEARED
  5632					;BY IOT BLK.  THIS LOGIC IS NECESSARY FOR RETURNING TO
  5633					;THE PROPER RELOCATION WHEN A UUO IS INTERRUPTED AND
  5634					;MUST BE RE EXECUTED.
  5635
  5636
  5637	035413	200 00 0 00 036556 	MOD173:	MOVE [JUMPA .+3]
  5638	035414	202 00 0 00 000041 		MOVEM 41
  5639	035415	040000	000000			XWD 040000,0		;PERHAPS TURN OFF USER MODE
  5640	035416	400 00 0 00 000000 		SETZ			;PREVIOUS UUO SET EX ILL OP
  5641	035417	7 000 00 0 00 000000 		BLKI			;THIS IOT SHOULD CLEAR IT
  5642	035420	300 00 0 00 000000 		CAI
  5643	035421	254 02 1 00 036557 		JRST 2,@[XWD USERF,.+1]	;NOW ENTER USER MODE IF
  5644	035422	265 00 0 00 035423 		JSP	.+1		;EX ILL OP SET JSP WILL CLEAR
  5645	035423	265 00 0 00 035424 		JSP	.+1		;EX USER FLAG.  SEE EX PRINT
  5646	035424	607 00 0 00 010000 		TLNN	USERF
  5647						HOLD^
  5648	035425	324 00 0 00 035425 		JUMPA	.		;MACH ERROR. HALT MAY TRAP
  5649	035426	320 00 0 00 035427 		JUMP	.+1		;SO WAITING FOR OPERATOR
  5650					^
  5651						UMOFF^
  5652	035427	200 00 0 00 036560 		MOVE	[JSP .+3]	;TURN OFF USER MODE VIA
  5653	035430	202 00 0 00 000041 		MOVEM	41		;UUO. PROG RETURNS TO END
  5654	035431	040000	000000			XWD	040000,0	;OF MACRO. PC+FLAGS STORED .+1
  5655					^
  5656
  5657	035432				MOD174:	UMON^
  5658	035432	7 000 20 0 00 634440 		CONO	634440		;PREPARE TO TURN ON USER
  5659	035433	7 004 20 0 00 010000 		CONO	PI,10000	;MODE. CL PI, IOB, RELOC
  5660	035434	7 000 14 0 00 036525 		DATAO	[XWD -1,0]^
  5661	035435	254 02 1 00 036561 		JRST	2,@[XWD USERF,.+1]
  5662	035436	200 00 0 00 036562 		MOVE	[JSP .+4]	;SET RETURN
  5663	035437	202 00 0 00 000041 		MOVEM	41		;SEE IR2 PRINT
  5664	035440	402 00 0 00 000040 		SETZM	40		;IR JRST A IR10(1)
  5665	035441	254 04 0 00 035441 		HALT	.		;THIS HALT SHOULD TRAP
  5666	035442	336 00 0 00 000040 		SKIPN	40		;BUT DID NOT
  5667						HOLD^
  5668	035443	324 00 0 00 035443 		JUMPA	.		;MACH ERROR. HALT MAY TRAP
  5669	035444	320 00 0 00 035445 		JUMP	.+1		;SO WAITING FOR OPERATOR
  5670					^
  5671						UMOFF^
  5672	035445	200 00 0 00 036563 		MOVE	[JSP .+3]	;TURN OFF USER MODE VIA
  5673	035446	202 00 0 00 000041 		MOVEM	41		;UUO. PROG RETURNS TO END
  5674	035447	040000	000000			XWD	040000,0	;OF MACRO. PC+FLAGS STORED .+1
  5675					^
  5676
  5677	035450				MOD175:	UMON^
  5678	035450	7 000 20 0 00 634440 		CONO	634440		;PREPARE TO TURN ON USER
  5679	035451	7 004 20 0 00 010000 		CONO	PI,10000	;MODE. CL PI, IOB, RELOC
  5680	035452	7 000 14 0 00 036525 		DATAO	[XWD -1,0]^
  5681	035453	254 02 1 00 036564 		JRST	2,@[XWD USERF,.+1]
  5682	035454	200 00 0 00 036565 		MOVE	[JSP .+4]	;SET RETURN
  5683	035455	202 00 0 00 000041 		MOVEM	41		;SEE IR2 PRINT
  5684	035456	402 00 0 00 000040 		SETZM	40		;THE ENABLE PI SHOULD
  5685	035457	254 12 0 00 035460 		JEN	.+1		;TRAP TO 40
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 56-1
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0136

  5686	035460	336 00 0 00 000040 		SKIPN	40		;BUT DID NOT
  5687						HOLD^
  5688	035461	324 00 0 00 035461 		JUMPA	.		;MACH ERROR. HALT MAY TRAP
  5689	035462	320 00 0 00 035463 		JUMP	.+1		;SO WAITING FOR OPERATOR
  5690					^
  5691						UMOFF^
  5692	035463	200 00 0 00 036566 		MOVE	[JSP .+3]	;TURN OFF USER MODE VIA
  5693	035464	202 00 0 00 000041 		MOVEM	41		;UUO. PROG RETURNS TO END
  5694	035465	040000	000000			XWD	040000,0	;OF MACRO. PC+FLAGS STORED .+1
  5695					^
  5696
  5697	035466				MOD176:	UMON^
  5698	035466	7 000 20 0 00 634440 		CONO	634440		;PREPARE TO TURN ON USER
  5699	035467	7 004 20 0 00 010000 		CONO	PI,10000	;MODE. CL PI, IOB, RELOC
  5700	035470	7 000 14 0 00 036525 		DATAO	[XWD -1,0]^
  5701	035471	254 02 1 00 036567 		JRST	2,@[XWD USERF+UMIOT,.+1]
  5702	035472	200 00 0 00 036570 		MOVE	[JSP .+4]	;SET PRIVI IO BIT
  5703	035473	202 00 0 00 000041 		MOVEM	41		;THIS SHOULD PREVENT JRST IO,
  5704	035474	402 00 0 00 000040 		SETZM	40		;FROM TRAPPING. SEE IR UUO
  5705	035475	254 10 0 00 035476 		JRST	10,.+1		;ON IR2 PRINT
  5706	035476	332 00 0 00 000040 		SKIPE	40
  5707						HOLD^
  5708	035477	324 00 0 00 035477 		JUMPA	.		;MACH ERROR. HALT MAY TRAP
  5709	035500	320 00 0 00 035501 		JUMP	.+1		;SO WAITING FOR OPERATOR
  5710					^
  5711						UMOFF^
  5712	035501	200 00 0 00 036571 		MOVE	[JSP .+3]	;TURN OFF USER MODE VIA
  5713	035502	202 00 0 00 000041 		MOVEM	41		;UUO. PROG RETURNS TO END
  5714	035503	040000	000000			XWD	040000,0	;OF MACRO. PC+FLAGS STORED .+1
  5715					^
  5716
  5717	035504				MOD177:	UMON^
  5718	035504	7 000 20 0 00 634440 		CONO	634440		;PREPARE TO TURN ON USER
  5719	035505	7 004 20 0 00 010000 		CONO	PI,10000	;MODE. CL PI, IOB, RELOC
  5720	035506	7 000 14 0 00 036525 		DATAO	[XWD -1,0]^
  5721	035507	254 01 0 00 035510 		JRST	1,.+1		;SEE IF JUST A PLAIN
  5722	035510	200 00 0 00 036572 		MOVE	[JSP .+4]	;JRST WILL TRAP
  5723	035511	202 00 0 00 000041 		MOVEM	41		;SEE IR2 PRINT FOR
  5724	035512	402 00 0 00 000040 		SETZM	40		;DECODE IR-UUO
  5725	035513	254 00 0 00 035514 		JRST	.+1
  5726	035514	332 00 0 00 000040 		SKIPE	40
  5727						HOLD^
  5728	035515	324 00 0 00 035515 		JUMPA	.		;MACH ERROR. HALT MAY TRAP
  5729	035516	320 00 0 00 035517 		JUMP	.+1		;SO WAITING FOR OPERATOR
  5730					^
  5731						UMOFF^
  5732	035517	200 00 0 00 036573 		MOVE	[JSP .+3]	;TURN OFF USER MODE VIA
  5733	035520	202 00 0 00 000041 		MOVEM	41		;UUO. PROG RETURNS TO END
  5734	035521	040000	000000			XWD	040000,0	;OF MACRO. PC+FLAGS STORED .+1
  5735					^
  5736
  5737	035522				MOD178:	UMON^
  5738	035522	7 000 20 0 00 634440 		CONO	634440		;PREPARE TO TURN ON USER
  5739	035523	7 004 20 0 00 010000 		CONO	PI,10000	;MODE. CL PI, IOB, RELOC
  5740	035524	7 000 14 0 00 036525 		DATAO	[XWD -1,0]^
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 56-2
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0137

  5741	035525	254 01 0 00 035526 		JRST	1,.+1		;SEE IF IR 9+10 WITH OUT
  5742	035526	200 00 0 00 036574 		MOVE	[JSP .+4]	;A JRST WILL TRAP
  5743	035527	202 00 0 00 000041 		MOVEM	41		;SEE IR UUO ON IR-2 PRINT
  5744	035530	402 00 0 00 000040 		SETZM	40
  5745	035531	255 14 0 00 035532 		JFCL	14,.+1
  5746	035532	332 00 0 00 000040 		SKIPE	40
  5747						HOLD^
  5748	035533	324 00 0 00 035533 		JUMPA	.		;MACH ERROR. HALT MAY TRAP
  5749	035534	320 00 0 00 035535 		JUMP	.+1		;SO WAITING FOR OPERATOR
  5750					^
  5751						UMOFF^
  5752	035535	200 00 0 00 036575 		MOVE	[JSP .+3]	;TURN OFF USER MODE VIA
  5753	035536	202 00 0 00 000041 		MOVEM	41		;UUO. PROG RETURNS TO END
  5754	035537	040000	000000			XWD	040000,0	;OF MACRO. PC+FLAGS STORED .+1
  5755					^
  5756
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 57
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0138

  5757					;CHECK THAT AN IOT AT INTERRUPT LEVEL WILL NOT LOOK
  5758					;LIKE A UUO SEE IR-2 PRINT
  5759
  5760	035540				MOD179:	UMON^
  5761	035540	7 000 20 0 00 634440 		CONO	634440		;PREPARE TO TURN ON USER
  5762	035541	7 004 20 0 00 010000 		CONO	PI,10000	;MODE. CL PI, IOB, RELOC
  5763	035542	7 000 14 0 00 036525 		DATAO	[XWD -1,0]^
  5764	035543	7 000 20 0 00 000001 		CONO	1
  5765	035544	200 00 0 00 036576 		MOVE	[BLKI]
  5766	035545	202 00 0 00 000042 		MOVEM	42
  5767	035546	200 00 0 00 036577 		MOVE	[JSP M179+1]
  5768	035547	202 00 0 00 000041 		MOVEM	41
  5769	035550	403 00 0 00 000040 		SETZB	40
  5770	035551	200 00 0 00 036600 		MOVE [JSP M179]
  5771	035552	202 00 0 00 000043 		MOVEM 43
  5772	035553	474 00 0 00 000000 		SETO
  5773	035554	7 004 20 0 00 002300 		CONO	PI,ACT+PIOSET+100
  5774	035555	254 01 0 00 035556 		JRST	1,.+1
  5775	035556	310 00 0 00 777777 		CAM	-1
  5776	035557	332 00 0 00 000040 	M179:	SKIPE	40
  5777						HOLD^
  5778	035560	324 00 0 00 035560 		JUMPA	.		;MACH ERROR. HALT MAY TRAP
  5779	035561	320 00 0 00 035562 		JUMP	.+1		;SO WAITING FOR OPERATOR
  5780					^
  5781						UMOFF^
  5782	035562	200 00 0 00 036601 		MOVE	[JSP .+3]	;TURN OFF USER MODE VIA
  5783	035563	202 00 0 00 000041 		MOVEM	41		;UUO. PROG RETURNS TO END
  5784	035564	040000	000000			XWD	040000,0	;OF MACRO. PC+FLAGS STORED .+1
  5785					^
  5786
  5787	035565				MODXX1:	UMON	^		;TEST TRAP (60) TURN OFF OF
  5788
  5789	035565	7 000 20 0 00 634440 		CONO	634440		;PREPARE TO TURN ON USER
  5790	035566	7 004 20 0 00 010000 		CONO	PI,10000	;MODE. CL PI, IOB, RELOC
  5791	035567	7 000 14 0 00 036525 		DATAO	[XWD -1,0]
  5792	035570	200 00 0 00 036602 		MOVE	[JSP .+5]	;USER MODE
  5793	035571	202 00 0 00 000061 		MOVEM	61
  5794	035572	254 01 0 00 035573 		JRST	1,.+1
  5795	035573	100000	000000			XWD	100000,0	;OP CODE 100
  5796						HOLD	^		;IT FAILED TO TRAP
  5797
  5798	035574	324 00 0 00 035574 		JUMPA	.		;MACH ERROR. HALT MAY TRAP
  5799	035575	320 00 0 00 035576 		JUMP	.+1		;SO WAITING FOR OPERATOR
  5800
  5801	035576	265 00 0 00 035577 		JSP	.+1		;IT SHOULD ALSO
  5802	035577	603 00 0 00 010000 		TLNE	USERF		;TURN OFF USER MODE
  5803						HOLD^
  5804	035600	324 00 0 00 035600 		JUMPA	.		;MACH ERROR. HALT MAY TRAP
  5805	035601	320 00 0 00 035602 		JUMP	.+1		;SO WAITING FOR OPERATOR
  5806					^
  5807
  5808	035602				MODXX2:	UMON^
  5809	035602	7 000 20 0 00 634440 		CONO	634440		;PREPARE TO TURN ON USER
  5810	035603	7 004 20 0 00 010000 		CONO	PI,10000	;MODE. CL PI, IOB, RELOC
  5811	035604	7 000 14 0 00 036525 		DATAO	[XWD -1,0]^
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 57-1
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0139

  5812	035605	200 00 0 00 036603 		MOVE	[JSP .+4]	;TEST IR TO C(40)
  5813	035606	202 00 0 00 000041 		MOVEM	41		;FOR BITS 1,2,3
  5814	035607	254 02 1 00 036604 		JRST 2,@[XWD USERF,.+1]
  5815	035610	700000	000000			XWD	700000,0	;AN IOT
  5816	035611	200 00 0 00 000040 		MOVE	40
  5817	035612	312 00 0 00 036576 		CAME	[XWD 700000,0]
  5818						HOLD^
  5819	035613	324 00 0 00 035613 		JUMPA	.		;MACH ERROR. HALT MAY TRAP
  5820	035614	320 00 0 00 035615 		JUMP	.+1		;SO WAITING FOR OPERATOR
  5821					^
  5822
  5823	035615				MOD180:	UMON^
  5824	035615	7 000 20 0 00 634440 		CONO	634440		;PREPARE TO TURN ON USER
  5825	035616	7 004 20 0 00 010000 		CONO	PI,10000	;MODE. CL PI, IOB, RELOC
  5826	035617	7 000 14 0 00 036525 		DATAO	[XWD -1,0]^
  5827	035620	7 000 14 0 00 036425 		DATAO	[0]		;GET RID OF PROTECT REG
  5828
  5829	035621	7 000 20 0 00 000001 		CONO 1
  5830	035622	7 004 20 0 00 002300 		CONO PI,ACT+PIOSET+100
  5831	035623	200 00 0 00 036605 		MOVE [JSP M180]
  5832	035624	202 00 0 00 000042 		MOVEM 42
  5833	035625	200 00 0 00 036605 		MOVE [JSP .+4]
  5834	035626	202 00 0 00 000041 		MOVEM 41
  5835	035627	254 02 1 00 036606 		JRST	2,@[XWD USERF+UMIOT,.+1]	;ENABLE USER
  5836	035630	324 00 0 00 035630 		JUMPA .			;THIS INST SHOULD SET PROT
  5837	035631	7 000 34 0 00 020000 	M180:	CONSO	PROT		;HERE IF FLAG FAIL
  5838						HOLD^
  5839	035632	324 00 0 00 035632 		JUMPA	.		;MACH ERROR. HALT MAY TRAP
  5840	035633	320 00 0 00 035634 		JUMP	.+1		;SO WAITING FOR OPERATOR
  5841					^
  5842	035634	7 000 30 0 00 010000 		CONSZ	NONEX		;NEVER NON EX WITH PROT
  5843						HOLD^
  5844	035635	324 00 0 00 035635 		JUMPA	.		;MACH ERROR. HALT MAY TRAP
  5845	035636	320 00 0 00 035637 		JUMP	.+1		;SO WAITING FOR OPERATOR
  5846					^
  5847	035637	7 000 20 0 00 020000 		CONO	1B22		;FAIL TO CLEAR PROT
  5848	035640	7 000 30 0 00 020000 		CONSZ	PROT		;FLAG SEE CPA PRINT
  5849						HOLD^
  5850	035641	324 00 0 00 035641 		JUMPA	.		;MACH ERROR. HALT MAY TRAP
  5851	035642	320 00 0 00 035643 		JUMP	.+1		;SO WAITING FOR OPERATOR
  5852					^
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 58
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0140

  5853
  5854					DEFINE	EXCT	(A) <
  5855						MOVE	[JSP .+3]	;EXECUTE A UUO
  5856						MOVEM	41		;AND STORE FLAGS
  5857						XWD	A,0		;IN AC0.
  5858					>
  5859					;CHECK UUO 0 TRAPING TO EXEC MODE AND UUO 1-37
  5860					;NOT TRAPING TO EXEC MODE...1P19 ON EX CONTROL PRINT.
  5861
  5862	035643				MOD18A:	UMON^
  5863	035643	7 000 20 0 00 634440 		CONO	634440		;PREPARE TO TURN ON USER
  5864	035644	7 004 20 0 00 010000 		CONO	PI,10000	;MODE. CL PI, IOB, RELOC
  5865	035645	7 000 14 0 00 036525 		DATAO	[XWD -1,0]^
  5866	035646	254 02 1 00 036607 		JRST	2,@[XWD USERF+UMIOT,.+1]
  5867						EXCT	0^
  5868	035647	200 00 0 00 036610 		MOVE	[JSP .+3]	;EXECUTE 0 UUO
  5869	035650	202 00 0 00 000041 		MOVEM	41		;AND STORE FLAGS
  5870	035651	000000	000000			XWD	0,0		;IN AC0.
  5871					^
  5872						EXCT	0^
  5873	035652	200 00 0 00 036611 		MOVE	[JSP .+3]	;EXECUTE 0 UUO
  5874	035653	202 00 0 00 000041 		MOVEM	41		;AND STORE FLAGS
  5875	035654	000000	000000			XWD	0,0		;IN AC0.
  5876					^
  5877	035655	603 00 0 00 010000 		TLNE	USERF		;USER MODE ON?..CK 1P19 EX CONT PNT.
  5878						HOLD^
  5879	035656	324 00 0 00 035656 		JUMPA	.		;MACH ERROR. HALT MAY TRAP
  5880	035657	320 00 0 00 035660 		JUMP	.+1		;SO WAITING FOR OPERATOR
  5881					^
  5882
  5883						UMON^
  5884	035660	7 000 20 0 00 634440 		CONO	634440		;PREPARE TO TURN ON USER
  5885	035661	7 004 20 0 00 010000 		CONO	PI,10000	;MODE. CL PI, IOB, RELOC
  5886	035662	7 000 14 0 00 036525 		DATAO	[XWD -1,0]^
  5887	035663	254 02 1 00 036612 		JRST	2,@[XWD USERF+UMIOT,.+1]
  5888						EXCT	1000^
  5889	035664	200 00 0 00 036613 		MOVE	[JSP .+3]	;EXECUTE 1000 UUO
  5890	035665	202 00 0 00 000041 		MOVEM	41		;AND STORE FLAGS
  5891	035666	001000	000000			XWD	1000,0		;IN AC0.
  5892					^
  5893	035667	607 00 0 00 010000 		TLNN	USERF		;CK BIT 8 INPUT TO 1P19 EX CONTROL PRINT.
  5894						HOLD^
  5895	035670	324 00 0 00 035670 		JUMPA	.		;MACH ERROR. HALT MAY TRAP
  5896	035671	320 00 0 00 035672 		JUMP	.+1		;SO WAITING FOR OPERATOR
  5897					^
  5898
  5899
  5900
  5901						UMON^
  5902	035672	7 000 20 0 00 634440 		CONO	634440		;PREPARE TO TURN ON USER
  5903	035673	7 004 20 0 00 010000 		CONO	PI,10000	;MODE. CL PI, IOB, RELOC
  5904	035674	7 000 14 0 00 036525 		DATAO	[XWD -1,0]^
  5905	035675	254 02 1 00 036614 		JRST	2,@[XWD USERF+UMIOT,.+1]
  5906						EXCT	2000^
  5907	035676	200 00 0 00 036615 		MOVE	[JSP .+3]	;EXECUTE 2000 UUO
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 58-1
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0141

  5908	035677	202 00 0 00 000041 		MOVEM	41		;AND STORE FLAGS
  5909	035700	002000	000000			XWD	2000,0		;IN AC0.
  5910					^
  5911	035701	607 00 0 00 010000 		TLNN	USERF		;CK BIT 7 INPUT TO 1P19 EX CONTROL PNT.
  5912						HOLD^
  5913	035702	324 00 0 00 035702 		JUMPA	.		;MACH ERROR. HALT MAY TRAP
  5914	035703	320 00 0 00 035704 		JUMP	.+1		;SO WAITING FOR OPERATOR
  5915					^
  5916
  5917						UMON^
  5918	035704	7 000 20 0 00 634440 		CONO	634440		;PREPARE TO TURN ON USER
  5919	035705	7 004 20 0 00 010000 		CONO	PI,10000	;MODE. CL PI, IOB, RELOC
  5920	035706	7 000 14 0 00 036525 		DATAO	[XWD -1,0]^
  5921	035707	254 02 1 00 036616 		JRST	2,@[XWD USERF+UMIOT,.+1]
  5922						EXCT	4000^
  5923	035710	200 00 0 00 036617 		MOVE	[JSP .+3]	;EXECUTE 4000 UUO
  5924	035711	202 00 0 00 000041 		MOVEM	41		;AND STORE FLAGS
  5925	035712	004000	000000			XWD	4000,0		;IN AC0.
  5926					^
  5927	035713	607 00 0 00 010000 		TLNN	USERF		;CK BIT 6 INPUT TO 1P19 EX CONTROL PNT.
  5928						HOLD^
  5929	035714	324 00 0 00 035714 		JUMPA	.		;MACH ERROR. HALT MAY TRAP
  5930	035715	320 00 0 00 035716 		JUMP	.+1		;SO WAITING FOR OPERATOR
  5931					^
  5932
  5933						UMON^
  5934	035716	7 000 20 0 00 634440 		CONO	634440		;PREPARE TO TURN ON USER
  5935	035717	7 004 20 0 00 010000 		CONO	PI,10000	;MODE. CL PI, IOB, RELOC
  5936	035720	7 000 14 0 00 036525 		DATAO	[XWD -1,0]^
  5937	035721	254 02 1 00 036620 		JRST	2,@[XWD USERF+UMIOT,.+1]
  5938						EXCT	10000^
  5939	035722	200 00 0 00 036621 		MOVE	[JSP .+3]	;EXECUTE 10000 UUO
  5940	035723	202 00 0 00 000041 		MOVEM	41		;AND STORE FLAGS
  5941	035724	010000	000000			XWD	10000,0		;IN AC0.
  5942					^
  5943	035725	607 00 0 00 010000 		TLNN	USERF		;CK BIT 5 INPUT TO 1P19 EX CONTROL PNT.
  5944						HOLD^
  5945	035726	324 00 0 00 035726 		JUMPA	.		;MACH ERROR. HALT MAY TRAP
  5946	035727	320 00 0 00 035730 		JUMP	.+1		;SO WAITING FOR OPERATOR
  5947					^
  5948
  5949
  5950						UMON^
  5951	035730	7 000 20 0 00 634440 		CONO	634440		;PREPARE TO TURN ON USER
  5952	035731	7 004 20 0 00 010000 		CONO	PI,10000	;MODE. CL PI, IOB, RELOC
  5953	035732	7 000 14 0 00 036525 		DATAO	[XWD -1,0]^
  5954	035733	254 02 1 00 036622 		JRST	2,@[XWD USERF+UMIOT,.+1]
  5955						EXCT	20000^
  5956	035734	200 00 0 00 036623 		MOVE	[JSP .+3]	;EXECUTE 20000 UUO
  5957	035735	202 00 0 00 000041 		MOVEM	41		;AND STORE FLAGS
  5958	035736	020000	000000			XWD	20000,0		;IN AC0.
  5959					^
  5960	035737	607 00 0 00 010000 		TLNN	USERF		;CK BIT 4 INPUT TO 1P19 EX CONTROL PNT.
  5961						HOLD^
  5962	035740	324 00 0 00 035740 		JUMPA	.		;MACH ERROR. HALT MAY TRAP
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 58-2
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0142

  5963	035741	320 00 0 00 035742 		JUMP	.+1		;SO WAITING FOR OPERATOR
  5964					^
  5965
  5966						UMON^
  5967	035742	7 000 20 0 00 634440 		CONO	634440		;PREPARE TO TURN ON USER
  5968	035743	7 004 20 0 00 010000 		CONO	PI,10000	;MODE. CL PI, IOB, RELOC
  5969	035744	7 000 14 0 00 036525 		DATAO	[XWD -1,0]^
  5970	035745	254 02 1 00 036624 		JRST	2,@[XWD USERF,.+1]
  5971	035746	200 00 0 00 036625 		MOVE	0,[JSP .+3]
  5972	035747	202 00 0 00 000041 		MOVEM	0,41
  5973	035750	700000	000000			XWD 700000,0		;XCT AN IOT.
  5974	035751	265 00 0 00 035752 		JSP	.+1		;GET FLAGS.
  5975	035752	603 00 0 00 010000 		TLNE	0,USERF		;USER MODE STILL ON?
  5976						HOLD	^		;YES. CK EX NON REL UUO
  5977
  5978	035753	324 00 0 00 035753 		JUMPA	.		;MACH ERROR. HALT MAY TRAP
  5979	035754	320 00 0 00 035755 		JUMP	.+1		;SO WAITING FOR OPERATOR
  5980
  5981									;EX PRINT.
  5982
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 59
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0143

  5983	035755	200 00 0 00 010040 	MOD181:	MOVE 10040		;SAVE THESE LOC
  5984	035756	336 00 0 00 035772 		SKIPN SAV40
  5985	035757	202 00 0 00 035772 		MOVEM SAV40
  5986	035760	200 00 0 00 010041 		MOVE 10041
  5987	035761	336 00 0 00 035773 		SKIPN SAV41
  5988	035762	202 00 0 00 035773 		MOVEM SAV41
  5989	035763	200 00 0 00 010042 		MOVE 10042
  5990	035764	336 00 0 00 035774 		SKIPN SAV42
  5991	035765	202 00 0 00 035774 		MOVEM SAV42
  5992	035766	200 00 0 00 010043 		MOVE 10043
  5993	035767	336 00 0 00 035775 		SKIPN SAV43
  5994	035770	202 00 0 00 035775 		MOVEM SAV43
  5995	035771	254 00 0 00 035776 		JRST	.+5
  5996	035772	000000	000000		SAV40:	0
  5997	035773	000000	000000		SAV41:	0
  5998	035774	000000	000000		SAV42:	0
  5999	035775	000000	000000		SAV43:	0
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 60
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0144

  6000
  6001					;TEST THE SETTING OF PROTECT FLAG BY MOVING A
  6002					;TWO INST PROG TO AC 1+2 PROG IS CAM X AND UU0
  6003					;WITH TRAP SET TO REAL WORLD THE CAM SHOULD TEST
  6004					;THE PROT FLAG
  6005
  6006			002000		X=2000
  6007
  6008					DEFINE	LAC	(A)<
  6009						UMON
  6010						DATAO	[0]
  6011						MOVE	1,[CAM A]
  6012						MOVSI	2,40000
  6013
  6014						CONO PI,ACT+PIOSET+100
  6015						CONO 1
  6016						MOVE [JSP .+5]
  6017						MOVEM 42
  6018						MOVE	[JSP .+3]
  6019						MOVEM	41		;SET TRAP RETURN
  6020						JRST	1,1		;TURN ON USER MODE
  6021						CONSO	PROT		;THE PROT FLAG SHOULD BE SET
  6022						HOLD
  6023						CONSZ	NONEX
  6024						HOLD
  6025					>
  6026					MOD182:	REPEAT	10,<
  6027						LAC	X
  6028						X=X+X>
  6029
  6030						LAC	X^
  6031						UMON^
  6032	035776	7 000 20 0 00 634440 		CONO	634440		;PREPARE TO TURN ON USER
  6033	035777	7 004 20 0 00 010000 		CONO	PI,10000	;MODE. CL PI, IOB, RELOC
  6034	036000	7 000 14 0 00 036525 		DATAO	[XWD -1,0]^
  6035	036001	7 000 14 0 00 036425 		DATAO	[0]
  6036	036002	200 01 0 00 036626 		MOVE	1,[CAM X]
  6037	036003	205 02 0 00 040000 		MOVSI	2,40000
  6038
  6039	036004	7 004 20 0 00 002300 		CONO PI,ACT+PIOSET+100
  6040	036005	7 000 20 0 00 000001 		CONO 1
  6041	036006	200 00 0 00 036627 		MOVE [JSP .+5]
  6042	036007	202 00 0 00 000042 		MOVEM 42
  6043	036010	200 00 0 00 036627 		MOVE	[JSP .+3]
  6044	036011	202 00 0 00 000041 		MOVEM	41		;SET TRAP RETURN
  6045	036012	254 01 0 00 000001 		JRST	1,1		;TURN ON USER MODE
  6046	036013	7 000 34 0 00 020000 		CONSO	PROT		;THE PROT FLAG SHOULD BE SET
  6047						HOLD^
  6048	036014	324 00 0 00 036014 		JUMPA	.		;MACH ERROR. HALT MAY TRAP
  6049	036015	320 00 0 00 036016 		JUMP	.+1		;SO WAITING FOR OPERATOR
  6050					^
  6051	036016	7 000 30 0 00 010000 		CONSZ	NONEX
  6052						HOLD^
  6053	036017	324 00 0 00 036017 		JUMPA	.		;MACH ERROR. HALT MAY TRAP
  6054	036020	320 00 0 00 036021 		JUMP	.+1		;SO WAITING FOR OPERATOR
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 60-1
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0145

  6055					^
  6056					^
  6057			004000			X=X+X
  6058
  6059						LAC	X^
  6060						UMON^
  6061	036021	7 000 20 0 00 634440 		CONO	634440		;PREPARE TO TURN ON USER
  6062	036022	7 004 20 0 00 010000 		CONO	PI,10000	;MODE. CL PI, IOB, RELOC
  6063	036023	7 000 14 0 00 036525 		DATAO	[XWD -1,0]^
  6064	036024	7 000 14 0 00 036425 		DATAO	[0]
  6065	036025	200 01 0 00 036630 		MOVE	1,[CAM X]
  6066	036026	205 02 0 00 040000 		MOVSI	2,40000
  6067
  6068	036027	7 004 20 0 00 002300 		CONO PI,ACT+PIOSET+100
  6069	036030	7 000 20 0 00 000001 		CONO 1
  6070	036031	200 00 0 00 036631 		MOVE [JSP .+5]
  6071	036032	202 00 0 00 000042 		MOVEM 42
  6072	036033	200 00 0 00 036631 		MOVE	[JSP .+3]
  6073	036034	202 00 0 00 000041 		MOVEM	41		;SET TRAP RETURN
  6074	036035	254 01 0 00 000001 		JRST	1,1		;TURN ON USER MODE
  6075	036036	7 000 34 0 00 020000 		CONSO	PROT		;THE PROT FLAG SHOULD BE SET
  6076						HOLD^
  6077	036037	324 00 0 00 036037 		JUMPA	.		;MACH ERROR. HALT MAY TRAP
  6078	036040	320 00 0 00 036041 		JUMP	.+1		;SO WAITING FOR OPERATOR
  6079					^
  6080	036041	7 000 30 0 00 010000 		CONSZ	NONEX
  6081						HOLD^
  6082	036042	324 00 0 00 036042 		JUMPA	.		;MACH ERROR. HALT MAY TRAP
  6083	036043	320 00 0 00 036044 		JUMP	.+1		;SO WAITING FOR OPERATOR
  6084					^
  6085					^
  6086			010000			X=X+X
  6087
  6088						LAC	X^
  6089						UMON^
  6090	036044	7 000 20 0 00 634440 		CONO	634440		;PREPARE TO TURN ON USER
  6091	036045	7 004 20 0 00 010000 		CONO	PI,10000	;MODE. CL PI, IOB, RELOC
  6092	036046	7 000 14 0 00 036525 		DATAO	[XWD -1,0]^
  6093	036047	7 000 14 0 00 036425 		DATAO	[0]
  6094	036050	200 01 0 00 036632 		MOVE	1,[CAM X]
  6095	036051	205 02 0 00 040000 		MOVSI	2,40000
  6096
  6097	036052	7 004 20 0 00 002300 		CONO PI,ACT+PIOSET+100
  6098	036053	7 000 20 0 00 000001 		CONO 1
  6099	036054	200 00 0 00 036633 		MOVE [JSP .+5]
  6100	036055	202 00 0 00 000042 		MOVEM 42
  6101	036056	200 00 0 00 036633 		MOVE	[JSP .+3]
  6102	036057	202 00 0 00 000041 		MOVEM	41		;SET TRAP RETURN
  6103	036060	254 01 0 00 000001 		JRST	1,1		;TURN ON USER MODE
  6104	036061	7 000 34 0 00 020000 		CONSO	PROT		;THE PROT FLAG SHOULD BE SET
  6105						HOLD^
  6106	036062	324 00 0 00 036062 		JUMPA	.		;MACH ERROR. HALT MAY TRAP
  6107	036063	320 00 0 00 036064 		JUMP	.+1		;SO WAITING FOR OPERATOR
  6108					^
  6109	036064	7 000 30 0 00 010000 		CONSZ	NONEX
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 60-2
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0146

  6110						HOLD^
  6111	036065	324 00 0 00 036065 		JUMPA	.		;MACH ERROR. HALT MAY TRAP
  6112	036066	320 00 0 00 036067 		JUMP	.+1		;SO WAITING FOR OPERATOR
  6113					^
  6114					^
  6115			020000			X=X+X
  6116
  6117						LAC	X^
  6118						UMON^
  6119	036067	7 000 20 0 00 634440 		CONO	634440		;PREPARE TO TURN ON USER
  6120	036070	7 004 20 0 00 010000 		CONO	PI,10000	;MODE. CL PI, IOB, RELOC
  6121	036071	7 000 14 0 00 036525 		DATAO	[XWD -1,0]^
  6122	036072	7 000 14 0 00 036425 		DATAO	[0]
  6123	036073	200 01 0 00 036634 		MOVE	1,[CAM X]
  6124	036074	205 02 0 00 040000 		MOVSI	2,40000
  6125
  6126	036075	7 004 20 0 00 002300 		CONO PI,ACT+PIOSET+100
  6127	036076	7 000 20 0 00 000001 		CONO 1
  6128	036077	200 00 0 00 036635 		MOVE [JSP .+5]
  6129	036100	202 00 0 00 000042 		MOVEM 42
  6130	036101	200 00 0 00 036635 		MOVE	[JSP .+3]
  6131	036102	202 00 0 00 000041 		MOVEM	41		;SET TRAP RETURN
  6132	036103	254 01 0 00 000001 		JRST	1,1		;TURN ON USER MODE
  6133	036104	7 000 34 0 00 020000 		CONSO	PROT		;THE PROT FLAG SHOULD BE SET
  6134						HOLD^
  6135	036105	324 00 0 00 036105 		JUMPA	.		;MACH ERROR. HALT MAY TRAP
  6136	036106	320 00 0 00 036107 		JUMP	.+1		;SO WAITING FOR OPERATOR
  6137					^
  6138	036107	7 000 30 0 00 010000 		CONSZ	NONEX
  6139						HOLD^
  6140	036110	324 00 0 00 036110 		JUMPA	.		;MACH ERROR. HALT MAY TRAP
  6141	036111	320 00 0 00 036112 		JUMP	.+1		;SO WAITING FOR OPERATOR
  6142					^
  6143					^
  6144			040000			X=X+X
  6145
  6146						LAC	X^
  6147						UMON^
  6148	036112	7 000 20 0 00 634440 		CONO	634440		;PREPARE TO TURN ON USER
  6149	036113	7 004 20 0 00 010000 		CONO	PI,10000	;MODE. CL PI, IOB, RELOC
  6150	036114	7 000 14 0 00 036525 		DATAO	[XWD -1,0]^
  6151	036115	7 000 14 0 00 036425 		DATAO	[0]
  6152	036116	200 01 0 00 036636 		MOVE	1,[CAM X]
  6153	036117	205 02 0 00 040000 		MOVSI	2,40000
  6154
  6155	036120	7 004 20 0 00 002300 		CONO PI,ACT+PIOSET+100
  6156	036121	7 000 20 0 00 000001 		CONO 1
  6157	036122	200 00 0 00 036637 		MOVE [JSP .+5]
  6158	036123	202 00 0 00 000042 		MOVEM 42
  6159	036124	200 00 0 00 036637 		MOVE	[JSP .+3]
  6160	036125	202 00 0 00 000041 		MOVEM	41		;SET TRAP RETURN
  6161	036126	254 01 0 00 000001 		JRST	1,1		;TURN ON USER MODE
  6162	036127	7 000 34 0 00 020000 		CONSO	PROT		;THE PROT FLAG SHOULD BE SET
  6163						HOLD^
  6164	036130	324 00 0 00 036130 		JUMPA	.		;MACH ERROR. HALT MAY TRAP
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 60-3
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0147

  6165	036131	320 00 0 00 036132 		JUMP	.+1		;SO WAITING FOR OPERATOR
  6166					^
  6167	036132	7 000 30 0 00 010000 		CONSZ	NONEX
  6168						HOLD^
  6169	036133	324 00 0 00 036133 		JUMPA	.		;MACH ERROR. HALT MAY TRAP
  6170	036134	320 00 0 00 036135 		JUMP	.+1		;SO WAITING FOR OPERATOR
  6171					^
  6172					^
  6173			100000			X=X+X
  6174
  6175						LAC	X^
  6176						UMON^
  6177	036135	7 000 20 0 00 634440 		CONO	634440		;PREPARE TO TURN ON USER
  6178	036136	7 004 20 0 00 010000 		CONO	PI,10000	;MODE. CL PI, IOB, RELOC
  6179	036137	7 000 14 0 00 036525 		DATAO	[XWD -1,0]^
  6180	036140	7 000 14 0 00 036425 		DATAO	[0]
  6181	036141	200 01 0 00 036640 		MOVE	1,[CAM X]
  6182	036142	205 02 0 00 040000 		MOVSI	2,40000
  6183
  6184	036143	7 004 20 0 00 002300 		CONO PI,ACT+PIOSET+100
  6185	036144	7 000 20 0 00 000001 		CONO 1
  6186	036145	200 00 0 00 036641 		MOVE [JSP .+5]
  6187	036146	202 00 0 00 000042 		MOVEM 42
  6188	036147	200 00 0 00 036641 		MOVE	[JSP .+3]
  6189	036150	202 00 0 00 000041 		MOVEM	41		;SET TRAP RETURN
  6190	036151	254 01 0 00 000001 		JRST	1,1		;TURN ON USER MODE
  6191	036152	7 000 34 0 00 020000 		CONSO	PROT		;THE PROT FLAG SHOULD BE SET
  6192						HOLD^
  6193	036153	324 00 0 00 036153 		JUMPA	.		;MACH ERROR. HALT MAY TRAP
  6194	036154	320 00 0 00 036155 		JUMP	.+1		;SO WAITING FOR OPERATOR
  6195					^
  6196	036155	7 000 30 0 00 010000 		CONSZ	NONEX
  6197						HOLD^
  6198	036156	324 00 0 00 036156 		JUMPA	.		;MACH ERROR. HALT MAY TRAP
  6199	036157	320 00 0 00 036160 		JUMP	.+1		;SO WAITING FOR OPERATOR
  6200					^
  6201					^
  6202			200000			X=X+X
  6203
  6204						LAC	X^
  6205						UMON^
  6206	036160	7 000 20 0 00 634440 		CONO	634440		;PREPARE TO TURN ON USER
  6207	036161	7 004 20 0 00 010000 		CONO	PI,10000	;MODE. CL PI, IOB, RELOC
  6208	036162	7 000 14 0 00 036525 		DATAO	[XWD -1,0]^
  6209	036163	7 000 14 0 00 036425 		DATAO	[0]
  6210	036164	200 01 0 00 036642 		MOVE	1,[CAM X]
  6211	036165	205 02 0 00 040000 		MOVSI	2,40000
  6212
  6213	036166	7 004 20 0 00 002300 		CONO PI,ACT+PIOSET+100
  6214	036167	7 000 20 0 00 000001 		CONO 1
  6215	036170	200 00 0 00 036643 		MOVE [JSP .+5]
  6216	036171	202 00 0 00 000042 		MOVEM 42
  6217	036172	200 00 0 00 036643 		MOVE	[JSP .+3]
  6218	036173	202 00 0 00 000041 		MOVEM	41		;SET TRAP RETURN
  6219	036174	254 01 0 00 000001 		JRST	1,1		;TURN ON USER MODE
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 60-4
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0148

  6220	036175	7 000 34 0 00 020000 		CONSO	PROT		;THE PROT FLAG SHOULD BE SET
  6221						HOLD^
  6222	036176	324 00 0 00 036176 		JUMPA	.		;MACH ERROR. HALT MAY TRAP
  6223	036177	320 00 0 00 036200 		JUMP	.+1		;SO WAITING FOR OPERATOR
  6224					^
  6225	036200	7 000 30 0 00 010000 		CONSZ	NONEX
  6226						HOLD^
  6227	036201	324 00 0 00 036201 		JUMPA	.		;MACH ERROR. HALT MAY TRAP
  6228	036202	320 00 0 00 036203 		JUMP	.+1		;SO WAITING FOR OPERATOR
  6229					^
  6230					^
  6231			400000			X=X+X
  6232
  6233						LAC	X^
  6234						UMON^
  6235	036203	7 000 20 0 00 634440 		CONO	634440		;PREPARE TO TURN ON USER
  6236	036204	7 004 20 0 00 010000 		CONO	PI,10000	;MODE. CL PI, IOB, RELOC
  6237	036205	7 000 14 0 00 036525 		DATAO	[XWD -1,0]^
  6238	036206	7 000 14 0 00 036425 		DATAO	[0]
  6239	036207	200 01 0 00 036644 		MOVE	1,[CAM X]
  6240	036210	205 02 0 00 040000 		MOVSI	2,40000
  6241
  6242	036211	7 004 20 0 00 002300 		CONO PI,ACT+PIOSET+100
  6243	036212	7 000 20 0 00 000001 		CONO 1
  6244	036213	200 00 0 00 036645 		MOVE [JSP .+5]
  6245	036214	202 00 0 00 000042 		MOVEM 42
  6246	036215	200 00 0 00 036645 		MOVE	[JSP .+3]
  6247	036216	202 00 0 00 000041 		MOVEM	41		;SET TRAP RETURN
  6248	036217	254 01 0 00 000001 		JRST	1,1		;TURN ON USER MODE
  6249	036220	7 000 34 0 00 020000 		CONSO	PROT		;THE PROT FLAG SHOULD BE SET
  6250						HOLD^
  6251	036221	324 00 0 00 036221 		JUMPA	.		;MACH ERROR. HALT MAY TRAP
  6252	036222	320 00 0 00 036223 		JUMP	.+1		;SO WAITING FOR OPERATOR
  6253					^
  6254	036223	7 000 30 0 00 010000 		CONSZ	NONEX
  6255						HOLD^
  6256	036224	324 00 0 00 036224 		JUMPA	.		;MACH ERROR. HALT MAY TRAP
  6257	036225	320 00 0 00 036226 		JUMP	.+1		;SO WAITING FOR OPERATOR
  6258					^
  6259					^
  6260		000001	000000			X=X+X
  6261
  6262	036226	402 00 0 00 000040 	MOD185:	SETZM	40		;TEST FOR TRAP TO REAL LOC 40
  6263	036227	200 00 0 00 036646 		MOVE	[JSP MOD186-1]	;NOT RELOCATED 40
  6264	036230	202 00 0 00 000041 		MOVEM	41		;SETUP TRAP FOR OK
  6265	036231	7 000 14 0 00 036647 		DATAO	[XWD -1,10000]
  6266	036232	200 00 0 00 036650 		MOVE	[JSP MOD186]	;SETUP TRAP FOR ERR
  6267	036233	202 00 0 00 010041 		MOVEM	10041
  6268	036234	254 01 0 00 026235 		JRST	1,.+1-10000	;IF THE UUO TRAPS TO
  6269	036235	040000	000000			XWD	40000,0		;RELOCATED 40 PROG WILL HOLD
  6270	036236	336 00 0 00 000040 		SKIPN	40		;AT THIS POINT
  6271
  6272	036237				MOD186:	HOLD^
  6273	036237	324 00 0 00 036237 		JUMPA	.		;MACH ERROR. HALT MAY TRAP
  6274	036240	320 00 0 00 036241 		JUMP	.+1		;SO WAITING FOR OPERATOR
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 60-5
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0149

  6275					^
  6276	036241	265 00 0 00 036242 		JSP	.+1		;IF USER MODE STILL ON
  6277	036242	603 00 0 00 010000 		TLNE	USERF		;THEN WAIT HERE
  6278						HOLD^
  6279	036243	324 00 0 00 036243 		JUMPA	.		;MACH ERROR. HALT MAY TRAP
  6280	036244	320 00 0 00 036245 		JUMP	.+1		;SO WAITING FOR OPERATOR
  6281					^
  6282
  6283					;TEST FOR INTERRUPT TO REAL PI (NOT RELOCATED)
  6284	036245				MOD190:	UMON^
  6285	036245	7 000 20 0 00 634440 		CONO	634440		;PREPARE TO TURN ON USER
  6286	036246	7 004 20 0 00 010000 		CONO	PI,10000	;MODE. CL PI, IOB, RELOC
  6287	036247	7 000 14 0 00 036525 		DATAO	[XWD -1,0]^
  6288	036250	200 00 0 00 036651 		MOVE	[JSP MOD191]	;SET ERROR PI RET
  6289	036251	202 00 0 00 010042 		MOVEM 10042
  6290	036252	200 00 0 00 036652 		MOVE	[JSP MOD191+1]	;SET OK PI
  6291	036253	202 00 0 00 000042 		MOVEM 42
  6292	036254	7 000 14 0 00 036647 		DATAO [XWD -1,10000]
  6293	036255	254 02 1 00 036653 		JRST 2,@[XWD USERF+UMIOT,.+1-10000]
  6294	036256	7 004 20 0 00 004300 		CONO	PI,ACT+PIREQ+100	;SHOULD INTERRUPT
  6295						HOLD^
  6296	036257	324 00 0 00 036257 		JUMPA	.		;MACH ERROR. HALT MAY TRAP
  6297	036260	320 00 0 00 036261 		JUMP	.+1		;SO WAITING FOR OPERATOR
  6298					^
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 61
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0150

  6299	036261				MOD191:	HOLD^
  6300	036261	324 00 0 00 036261 		JUMPA	.		;MACH ERROR. HALT MAY TRAP
  6301	036262	320 00 0 00 036263 		JUMP	.+1		;SO WAITING FOR OPERATOR
  6302					^
  6303						UMOFF^
  6304	036263	200 00 0 00 036654 		MOVE	[JSP .+3]	;TURN OFF USER MODE VIA
  6305	036264	202 00 0 00 000041 		MOVEM	41		;UUO. PROG RETURNS TO END
  6306	036265	040000	000000			XWD	040000,0	;OF MACRO. PC+FLAGS STORED .+1
  6307					^
  6308					;TEST FOR NOT RELOCATION OF AC'S
  6309	036266	402 00 0 00 000005 	MOD192:	SETZM	5
  6310						UMON^
  6311	036267	7 000 20 0 00 634440 		CONO	634440		;PREPARE TO TURN ON USER
  6312	036270	7 004 20 0 00 010000 		CONO	PI,10000	;MODE. CL PI, IOB, RELOC
  6313	036271	7 000 14 0 00 036525 		DATAO	[XWD -1,0]^
  6314	036272	200 00 0 00 036655 		MOVE [JSP M192]
  6315	036273	202 00 0 00 000041 		MOVEM 41
  6316	036274	7 000 14 0 00 036647 		DATAO [XWD -1,10000]
  6317	036275	254 01 0 00 026276 		JRST 1,.+1-10000
  6318	036276	201 05 0 00 012345 		MOVEI	5,12345
  6319	036277	040000	000000			XWD 040000,0		;UUO TO TERM USER MODE
  6320	036300	302 05 0 00 012345 	M192:	CAIE	5,12345
  6321						HOLD^
  6322	036301	324 00 0 00 036301 		JUMPA	.		;MACH ERROR. HALT MAY TRAP
  6323	036302	320 00 0 00 036303 		JUMP	.+1		;SO WAITING FOR OPERATOR
  6324					^
  6325	036303	332 00 0 00 036670 	MOD195:	SKIPE	FPTRAP		;SEE IF SWITCH SAYS FP
  6326	036304	254 00 0 00 036315 		JRST MOD196
  6327	036305	200 00 0 00 036656 		MOVE [JSP .+3]		;TEST THE ABILITY TO
  6328	036306	202 00 0 00 000061 		MOVEM 61		;TRAP A FP INST
  6329	036307	145 00 0 00 777777 		FADRI -1		;THIS INST SHOULD TRAP
  6330	036310	200 02 0 00 036307 		MOVE 2,.-1		;FAIL TO TRAP PROPERLY
  6331	036311	312 02 0 00 000060 		CAME 2,60
  6332						STOP^
  6333	036312	254 04 0 00 036313 		HALT	.+1
  6334	036313	320 00 0 00 036314 		JUMP	.+1
  6335									^
  6336	036314	254 00 0 00 036414 		JRST MOD197		;WHAT ABOUT SWITCHS
  6337	036315	200 00 0 00 036657 	MOD196:	MOVE [JSP .+4]		;TEST FOR FP NOT TRAP
  6338	036316	402 00 0 00 000060 		SETZM 60
  6339	036317	202 00 0 00 000061 		MOVEM 61		;SET RETURN
  6340	036320	145 00 0 00 777777 		FADRI -1
  6341	036321	332 00 0 00 000060 		SKIPE 60		;DOES MACH HAVE FP
  6342						STOP^
  6343	036322	254 04 0 00 036323 		HALT	.+1
  6344	036323	320 00 0 00 036324 		JUMP	.+1
  6345									^
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 62
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0151

  6346					;CHECK BYT7A SETING BYF6.
  6347	036324	7 000 20 0 00 635550 	MOD19X:	CONO	635550		;CLR THE WORLD.
  6348	036325	200 00 0 00 036660 		MOVE	[JSP MOD19B]
  6349	036326	202 00 0 00 000042 		MOVEM	42		;SETUP FOR INT ON CH # 1.
  6350	036327	7 004 20 0 00 012300 		CONO	PI,12300	;SETUP PI.
  6351	036330	200 01 0 00 036351 		MOVE	1,POINTR	;PUT POINTER INTO AC1.
  6352	036331	7 000 20 0 00 001000 		CONO	1000		;CLR CLOCK FLAG.
  6353	036332	7 000 34 0 00 001000 		CONSO	1000		;WAIT FOR
  6354	036333	254 00 0 00 036332 		JRST	.-1		;CLOCK FLAG.
  6355	036334	7 000 20 0 00 003001 		CONO	3001		;SET INT ENABLE AND PI 35 AND CLR CLK FLG.
  6356	036335	134 00 0 00 000001 		ILDB	0,1		;SHOULD STAY IN INDIRECT LOOP.
  6357	036336	7 000 34 0 00 001000 	MOD19B:	CONSO	1000		;CLK FLG INT?
  6358						HOLD^
  6359	036337	324 00 0 00 036337 		JUMPA	.		;MACH ERROR. HALT MAY TRAP
  6360	036340	320 00 0 00 036341 		JUMP	.+1		;SO WAITING FOR OPERATOR
  6361					^
  6362	036341	607 00 0 00 020000 		TLNN	0,20000		;BYF6 FLAG SET? NO..CK BYT7A ON BYTE PRINT.
  6363						HOLD^
  6364	036342	324 00 0 00 036342 		JUMPA	.		;MACH ERROR. HALT MAY TRAP
  6365	036343	320 00 0 00 036344 		JUMP	.+1		;SO WAITING FOR OPERATOR
  6366					^
  6367	036344	265 00 0 00 036345 		JSP	.+1		;CAUSE ARLT FM FLAGS(J)A.
  6368	036345	603 00 0 00 020000 		TLNE	0,20000		;CK BYTE PRINT.
  6369						HOLD^
  6370	036346	324 00 0 00 036346 		JUMPA	.		;MACH ERROR. HALT MAY TRAP
  6371	036347	320 00 0 00 036350 		JUMP	.+1		;SO WAITING FOR OPERATOR
  6372					^
  6373
  6374	036350	254 00 0 00 036414 		JRST	MOD197
  6375
  6376	036351	440720	000001		POINTR:	XWD 440720,1
  6377					;CK TO SEE THAT UUO 0 TRAPS TO 141.
  6378	036352				MOD200:	UMON^
  6379	036352	7 000 20 0 00 634440 		CONO	634440		;PREPARE TO TURN ON USER
  6380	036353	7 004 20 0 00 010000 		CONO	PI,10000	;MODE. CL PI, IOB, RELOC
  6381	036354	7 000 14 0 00 036525 		DATAO	[XWD -1,0]^
  6382	036355	254 02 1 00 036661 		JRST	2,@[XWD USERF+UMIOT,.+1]
  6383	036356	200 00 0 00 036662 		MOVE	[JSP .+5]
  6384	036357	202 00 0 00 000041 		MOVEM	41
  6385	036360	340 00 0 00 000000 		AOJ
  6386	036361	202 00 0 00 000141 		MOVEM	141
  6387	036362	000000	000000			0
  6388						HOLD	^		;UUO 0 TRAPED TO 40. CK 2L44 ON MA CONTROL PRINT.
  6389
  6390	036363	324 00 0 00 036363 		JUMPA	.		;MACH ERROR. HALT MAY TRAP
  6391	036364	320 00 0 00 036365 		JUMP	.+1		;SO WAITING FOR OPERATOR
  6392
  6393	036365	607 00 0 00 010000 		TLNN	USERF		;USER MODE GET CLR?..CK 1P19 ON EX CONT PNT.
  6394						HOLD^
  6395	036366	324 00 0 00 036366 		JUMPA	.		;MACH ERROR. HALT MAY TRAP
  6396	036367	320 00 0 00 036370 		JUMP	.+1		;SO WAITING FOR OPERATOR
  6397					^
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 63
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0152

  6398					;CK TO SEE THAT UUO 37 TRAPS TO 41.
  6399
  6400						UMON^
  6401	036370	7 000 20 0 00 634440 		CONO	634440		;PREPARE TO TURN ON USER
  6402	036371	7 004 20 0 00 010000 		CONO	PI,10000	;MODE. CL PI, IOB, RELOC
  6403	036372	7 000 14 0 00 036525 		DATAO	[XWD -1,0]^
  6404	036373	254 02 1 00 036663 		JRST	2,@[XWD USERF + UMIOT, .+1]
  6405	036374	200 00 0 00 036664 		MOVE	[JSP .+5]
  6406	036375	202 00 0 00 000141 		MOVEM	141
  6407	036376	340 00 0 00 000000 		AOJ
  6408	036377	202 00 0 00 000041 		MOVEM	41
  6409	036400	037000	000000			037000000000
  6410						HOLD	^		;UUO 37 TRAPPED TO 141, CK 2L44 ON MA CONTROL PRINT
  6411					.
  6412
  6413	036401	324 00 0 00 036401 		JUMPA	.		;MACH ERROR. HALT MAY TRAP
  6414	036402	320 00 0 00 036403 		JUMP	.+1		;SO WAITING FOR OPERATOR
  6415
  6416
  6417
  6418					;CK TO SEE THAT AN INTERRUPT ON CH # 1 TRAPS TO 142.
  6419
  6420	036403	200 00 0 00 036665 		MOVE	[MOVEI 142]
  6421	036404	202 00 0 00 000142 		MOVEM	142
  6422	036405	7 000 20 0 00 634440 		CONO	634440		;CLR THE WORLD.
  6423	036406	400 00 0 00 000000 		SETZ	0,
  6424	036407	7 004 20 0 00 010000 		CONO	PI,10000	;CLR PI.
  6425	036410	7 004 20 0 00 004300 		CONO	PI,ACT+PIREQ+100;CAUSE INT.
  6426	036411	302 00 0 00 000142 		CAIE	0,142		;CK 2K44 ON MA CONTROL PRINT.
  6427	036412	254 04 0 00 000000 		HALT
  6428
  6429	036413	476 00 0 00 036671 		SETOM	MATPOF		;SET FLG SO KNOW IN THIS ROUTINE.
  6430
  6431
  6432	036414	254 00 0 00 030057 	MOD197:	JRST	BEGEND		;REPEAT DIAGNOSTIC
  6433
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 64
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0153

  6434					;DIAGNOSTIC STORAGE
  6435
  6436	036415					LIT
  6437	036415	000001	000001
  6438	036416	254 00 0 00 030737
  6439	036417	015 012 077 105 130
  6440	036420	105 103 040 115 117
  6441	036421	104 105 040 104 111
  6442	036422	101 107 116 117 123
  6443	036423	124 111 103 040 117
  6444	036424	116 114 131 015 012
  6445	036425	000 000 000 000 000
  6446	036426	000000	000001
  6447	036427	000000	000002
  6448	036430	265 02 0 00 030776
  6449	036431	254 00 0 00 030776
  6450	036432	265 00 0 00 030777
  6451	036433	265 02 0 00 031006
  6452	036434	254 00 0 00 031007
  6453	036435	265 02 0 00 031017
  6454	036436	265 00 0 00 031020
  6455	036437	265 02 0 00 031026
  6456	036440	265 02 0 00 031036
  6457	036441	777777	777777
  6458	036442	265 02 0 00 031046
  6459	036443	265 02 0 00 031055
  6460	036444	265 02 0 00 031064
  6461	036445	265 02 0 00 031073
  6462	036446	265 02 0 00 031102
  6463	036447	265 02 0 00 031111
  6464	036450	265 02 0 00 031120
  6465	036451	265 02 0 00 031127
  6466	036452	265 02 0 00 031136
  6467	036453	265 02 0 00 031145
  6468	036454	265 02 0 00 031154
  6469	036455	265 02 0 00 031163
  6470	036456	265 02 0 00 031172
  6471	036457	265 02 0 00 031201
  6472	036460	265 02 0 00 031210
  6473	036461	265 02 0 00 031217
  6474	036462	265 02 0 00 031227
  6475	036463	077740	000000
  6476	036464	265 02 0 00 031237
  6477	036465	077740	777777
  6478	036466	265 02 0 00 031247
  6479	036467	265 02 0 00 031257
  6480	036470	265 02 0 00 031274
  6481	036471	123456	654321
  6482	036472	400000	000000
  6483	036473	201 00 0 00 000040
  6484	036474	201 00 0 00 000057
  6485	036475	201 00 0 00 000017
  6486	036476	201 00 0 00 000000
  6487	036477	7 177 2 0 00 000000
  6488	036500	350 00 0 00 000000
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 64-1
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0154

  6489	036501	201 00 0 00 000042
  6490	036502	7 177 3 0 00 000000
  6491	036503	7 177 1 0 00 000000
  6492	036504	201 01 0 00 000042
  6493	036505	334 00 0 00 000000
  6494	036506	264 00 0 00 035106
  6495	036507	260 00 0 00 035116
  6496	036510	201 00 0 00 000043
  6497	036511	7 177 2 0 00 000004
  6498	036512	265 00 0 00 035153
  6499	036513	265 00 0 00 035154
  6500	036514	000000	035163
  6501	036515	004000	035170
  6502	036516	000000	035171
  6503	036517	000000	035176
  6504	036520	004000	035177
  6505	036521	000000	035204
  6506	036522	004000	035210
  6507	036523	265 00 0 00 035216
  6508	036524	265 00 0 00 035227
  6509	036525	777777	000000
  6510	036526	014000	035231
  6511	036527	265 00 0 00 035234
  6512	036530	014000	035243
  6513	036531	265 00 0 00 035246
  6514	036532	265 00 0 00 035251
  6515	036533	014000	035260
  6516	036534	324 00 0 00 035263
  6517	036535	265 00 0 00 035272
  6518	036536	265 00 0 00 035275
  6519	036537	014000	035301
  6520	036540	265 00 0 00 035311
  6521	036541	265 00 0 00 035314
  6522	036542	265 00 0 00 035327
  6523	036543	010000	035333
  6524	036544	014000	035334
  6525	036545	265 00 0 00 035343
  6526	036546	010000	035347
  6527	036547	265 00 0 00 035353
  6528	036550	265 00 0 00 035361
  6529	036551	014000	035365
  6530	036552	265 00 0 00 035371
  6531	036553	265 00 0 00 035400
  6532	036554	014000	035404
  6533	036555	265 00 0 00 035407
  6534	036556	324 00 0 00 035416
  6535	036557	010000	035422
  6536	036560	265 00 0 00 035432
  6537	036561	010000	035436
  6538	036562	265 00 0 00 035442
  6539	036563	265 00 0 00 035450
  6540	036564	010000	035454
  6541	036565	265 00 0 00 035460
  6542	036566	265 00 0 00 035466
  6543	036567	014000	035472
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 64-2
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0155

  6544	036570	265 00 0 00 035476
  6545	036571	265 00 0 00 035504
  6546	036572	265 00 0 00 035514
  6547	036573	265 00 0 00 035522
  6548	036574	265 00 0 00 035532
  6549	036575	265 00 0 00 035540
  6550	036576	7 000 0 0 00 000000
  6551	036577	265 00 0 00 035560
  6552	036600	265 00 0 00 035557
  6553	036601	265 00 0 00 035565
  6554	036602	265 00 0 00 035575
  6555	036603	265 00 0 00 035611
  6556	036604	010000	035610
  6557	036605	265 00 0 00 035631
  6558	036606	014000	035630
  6559	036607	014000	035647
  6560	036610	265 00 0 00 035652
  6561	036611	265 00 0 00 035655
  6562	036612	014000	035664
  6563	036613	265 00 0 00 035667
  6564	036614	014000	035676
  6565	036615	265 00 0 00 035701
  6566	036616	014000	035710
  6567	036617	265 00 0 00 035713
  6568	036620	014000	035722
  6569	036621	265 00 0 00 035725
  6570	036622	014000	035734
  6571	036623	265 00 0 00 035737
  6572	036624	010000	035746
  6573	036625	265 00 0 00 035751
  6574	036626	310 00 0 00 002000
  6575	036627	265 00 0 00 036013
  6576	036630	310 00 0 00 004000
  6577	036631	265 00 0 00 036036
  6578	036632	310 00 0 00 010000
  6579	036633	265 00 0 00 036061
  6580	036634	310 00 0 00 020000
  6581	036635	265 00 0 00 036104
  6582	036636	310 00 0 00 040000
  6583	036637	265 00 0 00 036127
  6584	036640	310 00 0 00 100000
  6585	036641	265 00 0 00 036152
  6586	036642	310 00 0 00 200000
  6587	036643	265 00 0 00 036175
  6588	036644	310 00 0 00 400000
  6589	036645	265 00 0 00 036220
  6590	036646	265 00 0 00 036236
  6591	036647	777777	010000
  6592	036650	265 00 0 00 036237
  6593	036651	265 00 0 00 036261
  6594	036652	265 00 0 00 036262
  6595	036653	014000	026256
  6596	036654	265 00 0 00 036266
  6597	036655	265 00 0 00 036300
  6598	036656	265 00 0 00 036310
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 64-3
DAKAHM	MAC	19-JAN-77 17:39		DIAGNOSTIC SECTION                                                                 SEQ 0156

  6599	036657	265 00 0 00 036321
  6600	036660	265 00 0 00 036336
  6601	036661	014000	036356
  6602	036662	265 00 0 00 036363
  6603	036663	014000	036374
  6604	036664	265 00 0 00 036401
  6605	036665	201 00 0 00 000142
  6606
  6607	036667					VAR
  6608
  6609	036675	254 04 0 00 030000 	LAST:	JRST	4,BEGIN
  6610
DAKAH PDP-10 KA10 BASIC INSTRUCTION DIAGNOSTIC (8) 0,2	MACRO %52(537) 17:47 19-JAN-77 PAGE 1
STOR	KLM	18-JAN-77 11:42		*STOR* RESERVED STORAGE, JAN 18,1977                                               SEQ 0157

  6611					SUBTTL	*STOR* RESERVED STORAGE, JAN 18,1977
  6612
  6613					;PROGRAM LITERALS
  6614
  6615						XLIST
  6616					IFNDEF	$LPAPER,<LIST>
  6617	036676					LIT
  6618						LIST
  6619	036676	000000	000000		ENDSLD:	0
  6620
  6621					IFDEF	DEBUG,<
  6622					PATCH:	BLOCK DEBUG		;PATCHING AREA
  6623					>
  6624
  6625					;PROGRAM VARIABLES
  6626	036677					VAR
  6627
  6628					IFDEF	PGMEND,<
  6629	036677	000000	000000		END:	0
  6630			030000			END	BEGIN	>

NO ERRORS DETECTED

PROGRAM BREAK IS 000000
ABSLUTE BREAK IS 036700
CPU TIME USED 00:22.958

12K CORE USED
