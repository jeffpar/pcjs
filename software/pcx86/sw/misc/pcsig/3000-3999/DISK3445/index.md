---
layout: page
title: "PC-SIG Library Disk #3445"
permalink: /software/pcx86/sw/misc/pcsig/3000-3999/DISK3445/
machines:
  - id: ibm5170
    type: pcx86
    config: /machines/pcx86/ibm/5170/cga/1024kb/rev3/machine.xml
    diskettes: /machines/pcx86/diskettes.json,/disks/pcsigdisks/pcx86/diskettes.json
    autoGen: true
    autoMount:
      B: "PC-SIG Library Disk #3445"
    autoType: $date\r$time\rB:\rDIR\r
---

{% include machine.html id="ibm5170" %}
{% comment %}samples_begin{% endcomment %}

## EXAMPLE.BAS

```bas
10 DEFINT A-Z
20 PORT=&H378:' Set to port address
30 A=1
40 OUT PORT,A XOR &HFF:'this inverts value!
50 TIME$="00:00:00"
60 IF TIME$<"00:00:01" THEN 60
70 A=2*A
80 IF A<256 THEN 40
90 GOTO 30
```

## REMOTE.BAS

```bas
100 REM *** REMOTE CONTROL PROGRAM BY P.E.KING ***
110 REM
120 REM *** DATE 11/11/1987 (C) COPYRIGHT 1987 ***
130 REM
140 DEFINT A-Z
150 PORT=&H378:'Port address
160 DIM D$(170),T$(170)
170 DN=21:'index increment
180 I=0:'all off
190 OUT PORT,I XOR &HFF:'send out
200 SCREEN 0:WIDTH 80:KEY OFF:CLS:LOCATE,,1
210 GOSUB 450:'Print sign on
220 GOSUB 1220:'get date/time entries
230 REM
240 REM *** MAIN EXECUTION LOOP ***
250 REM
260 CLS:PRINT:PRINT:PRINT"Now executing REMOTE...";
270 GOSUB 620:'scan dates & times
280 OUT PORT,I XOR &HFF:'send out
290 A$=INKEY$:IF A$=CHR$(27) THEN 400:'Escape
300 IF A$<>"" THEN 180
310 LOCATE 1,1:PRINT CT$,CD$;
320 IF RT THEN IF CT$>=RT$ THEN TIME$="00:00:00"
330 GOTO 270
340 REM
350 REM *** END OF MAIN LOOP ***
360 REM
370 REM
380 REM *** END PROGRAM ***
390 REM
400 I=0:OUT PORT,I XOR &HFF:'all off
410 CLS:PRINT:PRINT"GoodBye from REMOTE...":PRINT:END
420 REM
430 REM *** SIGN-ON MESSAGE AND WAIT ***
440 REM
450 PRINT
460 PRINT"REMOTE DATE/TIME CONTROL by P.E.King"
470 PRINT
480 PRINT"From:  ProCon Software"
490 PRINT"       P.O. Box 43"
500 PRINT"       Essendon, 3040"
510 PRINT"       AUSTRALIA"
520 PRINT
530 PRINT"       Copyright 1987"
540 PRINT
550 PRINT"PRESS any key to continue...";
560 A$=INKEY$:IF A$="" THEN 560 ELSE IF A$=CHR$(27) THEN 400:'exit
570 PRINT
580 RETURN
590 REM
600 REM *** GET DATE/TIME LOOP THOU R1 TO R8 ***
610 REM
620 N=1:M=1:R=1:GOSUB 1120:'Get current date & time
630 I=0:'all off
640 GOSUB 750:'test against date & time
650 IF EX THEN 690
660 IF ST THEN I=I OR M:GOTO 690
670 N=N+2:'next date/time
680 GOTO 640
690 R=R+DN:N=R:M=M*2:'next relay
700 IF M<256 THEN 640
710 RETURN
720 REM
730 REM *** TEST DATE/TIME AGAINST ONE SETTING ***
740 REM
750 D$=D$(N):T$=T$(N):D1$=D$(N+1):T1$=T$(N+1):EX=0
760 IF D$<>"" THEN 870:'if date included
770 IF T$="" THEN EX=1:RETURN:'exit
780 IF T$>T1$ THEN 830:'Time/No Date
790 ST=0:'turn off
800 IF CT$<T$ THEN 820
810 ST=CT$<T1$
820 RETURN
830 ST=1:'turn on
840 IF CT$<T1$ THEN 860
850 ST=CT$>=T$
860 RETURN
870 IF D$=D1$ THEN IF T$>T1$ THEN 990 ELSE 890
880 IF D$>D1$ THEN 990
890 ST=0:'turn off
900 IF CD$<D$ THEN 980
910 IF CD$>D$ THEN 930
920 IF CT$<T$ THEN 980
930 ST=1:'turn on
940 IF CD$<D1$ THEN 980
950 IF CD$>D1$ THEN 970
960 IF CT$<T1$ THEN 980
970 ST=0:'turn off
980 RETURN
990 ST=1:'turn on
1000 IF CD$<D1$ THEN 1080
1010 IF CD$>D1$ THEN 1030
1020 IF CT$<T1$ THEN 1080
1030 ST=0:'turn off
1040 IF CD$<D$ THEN 1080
1050 IF CD$>D$ THEN 1070
1060 IF CT$<T$ THEN 1080
1070 ST=1:'turn on
1080 RETURN
1090 REM
1100 REM *** GET SYSTEM DATE & TIME ***
1110 REM
1120 T$=CT$
1130 CD$=DATE$:'Get date
1140 CT$=TIME$:'Get time
1150 IF CD$<>DATE$ THEN 1130:'Has date changed?
1160 IF T$=CT$ THEN 1130:'Has time changed?
1170 CD$=RIGHT$(CD$,4)+"-"+LEFT$(CD$,5):'yyyy-mm-dd format
1180 RETURN
1190 REM
1200 REM *** MAIN OPTIONS DISPLAY ***
1210 REM
1220 CLS:RT=0
1230 PRINT:PRINT"REMOTE V1.00 CONTROL OPTIONS:"
1240 PRINT:PRINT"(T) SET TIME & DATE"
1250 PRINT"(L) LOAD FROM FILE"
1260 PRINT"(S) SAVE TO FILE"
1270 PRINT"(R) EXECUTE & RESET TIME"
1280 PRINT"(E) EXECUTE"
1290 PRINT:PRINT:PRINT"ENTER/CHANGE SETTINGS:"
1300 PRINT:PRINT"(1) RL1 OUTPUT"
1310 PRINT"(2) RL2 OUTPUT"
1320 PRINT"(3) RL3 OUTPUT"
1330 PRINT"(4) RL4 OUTPUT"
1340 PRINT"(5) RL5 OUTPUT"
1350 PRINT"(6) RL6 OUTPUT"
1360 PRINT"(7) RL7 OUTPUT"
1370 PRINT"(8) RL8 OUTPUT"
1380 PRINT:PRINT"WHICH OPTION? ";
1390 A$=INKEY$:IF A$="" THEN 1390
1400 A=ASC(A$)
1410 IF A=27 THEN 400:'Esc
1420 IF A=84 OR A=116 THEN 2390:'Set time
1430 IF A=76 OR A=108 THEN 2070:'Load
1440 IF A=83 OR A=115 THEN 2230:'Save
1450 IF A=69 OR A=101 THEN RETURN:'Execute
1460 IF A=82 OR A=114 THEN RT=RT$<>"":TIME$="00:00:00":RETURN:'Reset-Execute
1470 IF A<49 OR A>56 THEN 1390:'Invalid
1480 REM
1490 REM *** HERE TO CHANGE SETTINGS ***
1500 REM
1510 RL=A-48:N=21*RL-20:X=0
1520 Y=0
1530 B=N+2*X+Y:'Calc index
1540 CLS:GOSUB 1120:'Get date & time
1550 IF X<10 THEN GOSUB 1970:'Sort Date & Time
1560 PRINT:PRINT"ENTER/CHANGE  RL";RL;" SETTINGS       CURRENT DATE: ";CD$;"    TIME: ";CT$
1570 PRINT:PRINT:PRINT TAB(10);"--------ON---------";TAB(50);"--------OFF--------"
1580 PRINT:PRINT TAB(10);"DATE1         TIME1";TAB(50);"DATE2         TIME2"
1590 PRINT:C=1
1600 FOR A=N TO N+19 STEP 2
1610 PRINT USING"##.";C;
1620 IF D$(A)<>"" OR T$(A)<>"" THEN PRINT USING"      \        \    \      \                  \        \    \      \";D$(A),T$(A),D$(A+1),T$(A+1);
1630 PRINT
1640 C=C+1
1650 NEXT A
1660 IF X>9 THEN 1870
1670 LOCATE 25,1:PRINT" '-' TO DELETE ENTRY/ '=' TO FINISH UP/ '<' GO BACK/ 'Return' LEAVE UNCHANGED";
1680 K=0:B=N+2*X+Y:LOCATE 21,1:PRINT SPACE$(80);
1690 LOCATE 21,1:PRINT USING" ENTER/CHANGE  (##. DATE#)";X+1,Y+1;
1700 INPUT A$:IF A$="" THEN K=1:GOTO 1740
1710 IF A$="<" THEN IF Y=1 THEN 1520 ELSE 1680
1720 IF A$="=" THEN X=10:GOTO 1520:'Finished
1730 IF A$="-" THEN D$(B)="" ELSE D$(B)=A$
1740 LOCATE 21,1:PRINT SPACE$(80);
1750 LOCATE 21,1:PRINT USING" ENTER/CHANGE  (##. TIME#)";X+1,Y+1;
1760 INPUT A$:IF A$="" THEN K=K+1:GOTO 1800
1770 IF A$="<" THEN 1680
1780 IF A$="=" THEN X=10:GOTO 1520:'Finished
1790 IF A$="-" THEN T$(B)="" ELSE T$(B)=A$
1800 IF Y=0 THEN IF T$(B)="" THEN IF D$(B)="" THEN D$(B+1)="":T$(B+1)="":GOTO 1520
1810 Y=Y+1:IF Y>1 THEN Y=0:X=X+1:IF X>9 THEN 1530
1820 IF K=2 THEN 1680
1830 GOTO 1530:'Display again
1840 REM
1850 REM *** TERMINATE ENTRY ***
1860 REM
1870 LOCATE 21,1:PRINT SPACE$(80);
1880 LOCATE 21,1:PRINT" ARE YOU FINISHED (Y/N)? ";
1890 A$=INKEY$:IF A$="" THEN 1890
1900 A=ASC(A$)
1910 IF A=27 THEN 400:'Esc
1920 IF A=89 OR A=121 THEN 1220:'Yes
1930 X=0:GOTO 1520:'No
1940 REM
1950 REM *** DELETE/MOVE ENTRIES ***
1960 REM
1970 IF D$(B)<>"" OR T$(B)<>"" THEN RETURN
1980 IF D$(B+2)="" AND T$(B+2)="" THEN RETURN
1990 FOR A=B TO N+19 STEP 2
2000 D$(A)=D$(A+2):T$(A)=T$(A+2)
2010 D$(A+1)=D$(A+3):T$(A+1)=T$(A+3)
2020 NEXT A
2030 RETURN
2040 REM
2050 REM *** LOAD FROM FILE ***
2060 REM
2070 CLS
2080 PRINT:PRINT"SAVE DATE/TIMES TO FILE"
2090 PRINT:PRINT:FILES "*.REM":PRINT:PRINT
2100 INPUT "FILE NAME (XXX.REM)";A$
2110 IF A$="" THEN 1220
2120 A$=A$+".REM":'Add ext
2130 OPEN A$ FOR INPUT AS #1
2140 FOR A=1 TO 168
2150 INPUT #1,D$(A),T$(A)
2160 NEXT A
2170 INPUT #1,RT$
2180 CLOSE #1
2190 GOTO 1220
2200 REM
2210 REM *** SAVE TO FILE ***
2220 REM
2230 CLS
2240 PRINT:PRINT"SAVE DATE/TIMES TO FILE"
2250 PRINT:PRINT
2260 INPUT "FILE NAME (XXX.REM)";A$
2270 IF A$="" THEN 1220
2280 A$=A$+".REM":'Add ext
2290 OPEN A$ FOR OUTPUT AS #1
2300 FOR A=1 TO 168
2310 PRINT #1,D$(A);",";T$(A)
2320 NEXT A
2330 PRINT #1,RT$
2340 CLOSE #1
2350 GOTO 1220
2360 REM
2370 REM *** ENTER/CHANGE DATE/TIME/REPEAT TIME ***
2380 REM
2390 CLS:GOSUB 1120:'Get date & time
2400 PRINT:PRINT"CHANGE  TIME/DATE  SETTINGS        CURRENT DATE: ";CD$;"    TIME: ";CT$
2410 PRINT:PRINT:PRINT:PRINT"Enter new DATE (YYYY-MM-DD)";
2420 INPUT A$:IF A$="" THEN 2440
2430 DATE$=RIGHT$(A$,5)+"-"+LEFT$(A$,4)
2440 PRINT:PRINT"Enter new TIME (HH:MM:SS)";
2450 INPUT A$:IF A$="" THEN 2470
2460 TIME$=A$:'Set time
2470 PRINT:PRINT:PRINT"CURRENT REPEAT TIME = ";RT$
2480 PRINT:PRINT"Enter repeat TIME (HH:MM:SS)";
2490 INPUT A$:IF A$="" THEN 2510
2500 IF A$="-" THEN RT$="" ELSE RT$=A$
2510 GOTO 1220
```

## STICK.BAS

```bas
100 REM *** JOYSTICK CONTROL PROGRAM ***
110 REM
120 REM *** DATE: 11/11/87
130 REM
140 DEFINT A-Z
150 PORT=&H378:' Port address of relays
160 INC=25:'Movement req'd for slow
170 IFAST=45:'Movement req'd for fast
172 XC=50:'X centre position
174 YC=50:'Y centre position
180 R10=&H1:R11=&HFE:'Relay 1 Mask
190 R20=&H2:R21=&HFD:'Relay 2
200 R30=&H4:R31=&HFB:'Relay 3
210 R40=&H8:R41=&HF7:'Relay 4
220 R50=&H10:R51=&HEF:'Relay 5
230 R60=&H20:R61=&HDF:'Relay 6
240 R70=&H40:R71=&HBF:'Relay 7
250 R80=&H80:R81=&H7F:'Relay 8
260 I=&HFF:S0=-1:STRIG ON
270 I=I OR &H7F:'Set all OFF except RL8
280 IF STRIG(5) THEN I=I AND R71:'Switch B1
290 A=STRIG(1):IF NOT A THEN S0=-1:'Switch A1
300 IF A AND S0 THEN S0=0:I=I XOR R80
310 X=STICK(0)-XC:Y=STICK(1)-YC:'Get stick position X & Y
320 SL=0:FA=0
330 IF X<-INC THEN I=I AND R11:SL=1:FA=X<-IFAST
340 IF X>INC THEN I=I AND R21:SL=1:FA=X>IFAST
350 IF Y<-INC THEN I=I AND R31:SL=1:FA=Y<-IFAST
360 IF Y>INC THEN I=I AND R41:SL=1:FA=Y>IFAST
370 IF SL THEN I=I AND R51
380 IF FA THEN I=I AND R61
390 OUT PORT,I:'Output to relays
400 GOTO 270
```

{% comment %}samples_end{% endcomment %}

### Directory of PC-SIG Library Disk #3445

     Volume in drive A has no label
     Directory of A:\

    CONTROL  COM       204  11-11-87  12:46p
    CONFIG   SYS        20  11-25-87   4:03p
    CONTROL  DOC      9216  11-26-87   2:37p
    EXAMPLE  BAS       202  11-23-87  12:52a
    CLOCK    SYS       429   1-02-80   1:02a
    ORDER    DOC      2176  11-25-87   9:36p
    CLEAR    REM       506  11-24-87  12:02a
    SHOW     EXE      2040   9-12-88  10:48a
    GO       BAT        37   3-17-93   3:11p
    TEST     REM      1038  11-24-87  12:01a
    STICK    BAS      1108  11-23-87  12:55a
    SHIFT    REM       642  11-24-87  12:00a
    REMOTE   EXE     41263  11-24-87  12:00a
    REMOTE   BAS      7413  11-23-87  12:02a
           14 file(s)      66294 bytes
                           90112 bytes free
